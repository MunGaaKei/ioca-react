{"version":3,"file":"index.js","sources":["../../../../packages/js/useTheme/index.ts"],"sourcesContent":["import { useLocalStorageState } from \"ahooks\";\nimport { useEffect, useState } from \"react\";\nimport { ITheme } from \"./type\";\n\nconst useTheme = (props?: ITheme) => {\n\tconst {\n\t\tkey = \"ioca-react-theme\",\n\t\tdefaultValue = \"theme-auto\",\n\t\tlistenStorageChange,\n\t} = props ?? {};\n\n\tconst [mounted, setMounted] = useState(false);\n\n\tconst [theme, setTheme] = useLocalStorageState<string>(key, {\n\t\tdefaultValue,\n\t\tlistenStorageChange,\n\t});\n\n\tuseEffect(() => {\n\t\tsetMounted(true);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!mounted || !theme) return;\n\n\t\tconst cls = document.documentElement.classList;\n\t\tconst prev = Array.from(cls).find((n) => n.startsWith(\"theme-\"));\n\n\t\tif (prev) {\n\t\t\tcls.replace(prev, theme);\n\t\t} else {\n\t\t\tcls.add(theme);\n\t\t}\n\t}, [theme, mounted]);\n\n\treturn {\n\t\ttheme: mounted ? theme : defaultValue,\n\t\tsetTheme: mounted ? setTheme : () => {},\n\t};\n};\n\nexport default useTheme;\n"],"names":["useState","useLocalStorageState","useEffect"],"mappings":";;;;;;;AAIA,MAAM,QAAQ,GAAG,CAAC,KAAc,KAAI;AACnC,IAAA,MAAM,EACL,GAAG,GAAG,kBAAkB,EACxB,YAAY,GAAG,YAAY,EAC3B,mBAAmB,GACnB,GAAG,KAAK,IAAI,EAAE;IAEf,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAGA,cAAQ,CAAC,KAAK,CAAC;IAE7C,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAGC,2BAAoB,CAAS,GAAG,EAAE;QAC3D,YAAY;QACZ,mBAAmB;AACnB,KAAA,CAAC;IAEFC,eAAS,CAAC,MAAK;QACd,UAAU,CAAC,IAAI,CAAC;KAChB,EAAE,EAAE,CAAC;IAENA,eAAS,CAAC,MAAK;AACd,QAAA,IAAI,CAAC,OAAO,IAAI,CAAC,KAAK;YAAE;AAExB,QAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS;QAC9C,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAEhE,IAAI,IAAI,EAAE;AACT,YAAA,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC;;aAClB;AACN,YAAA,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;;AAEhB,KAAC,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IAEpB,OAAO;QACN,KAAK,EAAE,OAAO,GAAG,KAAK,GAAG,YAAY;AACrC,QAAA,QAAQ,EAAE,OAAO,GAAG,QAAQ,GAAG,MAAK,GAAG;KACvC;AACF;;;;"}