{"version":3,"file":"utils.js","sources":["../../../packages/js/utils.ts"],"sourcesContent":["import type { MouseEvent } from \"react\";\nimport { ReactNode, useEffect, useRef, useState } from \"react\";\nimport { Root, createRoot } from \"react-dom/client\";\nimport type { TOption, TOptions, TRelativeOptions } from \"../type\";\n\ntype TComputePosition = {\n\tcontainerSize: number;\n\ttargetSize: number;\n\ttargetOffset: number;\n\tcontentSize: number;\n\tgap: number;\n\talign?: \"start\" | \"center\" | \"end\";\n};\n\nexport function getPosition(\n\t$source?: HTMLElement | null,\n\t$popup?: HTMLElement | null,\n\toptions: TRelativeOptions = {}\n): [\n\tx: number,\n\ty: number,\n\tz: {\n\t\tarrowX: number;\n\t\tarrowY: number;\n\t\tarrowPos: string;\n\t}\n] {\n\tconst { refWindow, gap = 0, offset = 0, position = \"top\", align } = options;\n\n\tif (!$source || !$popup)\n\t\treturn [\n\t\t\t0,\n\t\t\t0,\n\t\t\t{\n\t\t\t\tarrowX: 0,\n\t\t\t\tarrowY: 0,\n\t\t\t\tarrowPos: \"bottom\",\n\t\t\t},\n\t\t];\n\n\tconst rectT = $source.getBoundingClientRect();\n\tconst rectC = $popup.getBoundingClientRect();\n\n\tlet w = window.innerWidth;\n\tlet h = window.innerHeight;\n\tlet {\n\t\tleft: tl,\n\t\ttop: tt,\n\t\tright: tr,\n\t\tbottom: tb,\n\t\twidth: tw,\n\t\theight: th,\n\t} = rectT;\n\tconst { height: ch, width: cw } = rectC;\n\n\tif (!refWindow) {\n\t\tconst rectPa = $source.offsetParent?.getBoundingClientRect();\n\n\t\tw = rectPa?.width || w;\n\t\th = rectPa?.height || h;\n\t\ttl = $source.offsetLeft;\n\t\ttt = $source.offsetTop;\n\t\ttr = tl + rectT.width;\n\t\ttb = tt + rectT.height;\n\t}\n\n\tlet y = 0;\n\tlet x = 0;\n\tlet arrowX = 0;\n\tlet arrowY = 0;\n\tlet arrowPos = \"bottom\";\n\n\tswitch (position) {\n\t\tcase \"left\":\n\t\tcase \"right\":\n\t\t\ty =\n\t\t\t\tth !== ch\n\t\t\t\t\t? computePosition({\n\t\t\t\t\t\t\tcontainerSize: h,\n\t\t\t\t\t\t\ttargetSize: th,\n\t\t\t\t\t\t\ttargetOffset: tt,\n\t\t\t\t\t\t\tcontentSize: ch,\n\t\t\t\t\t\t\tgap,\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t  })\n\t\t\t\t\t: tt;\n\t\t\tarrowY = y < tt ? tt - y + th / 2 : th / 2;\n\n\t\t\tconst xl = tl - offset - cw;\n\t\t\tconst xr = tr + offset + cw;\n\n\t\t\tif (position === \"left\") {\n\t\t\t\tconst R = xl < 0 && xr <= w;\n\t\t\t\tx = R ? tr + offset : xl;\n\t\t\t\tarrowX = R ? 0 : cw;\n\t\t\t\tarrowPos = R ? \"left\" : \"right\";\n\t\t\t} else {\n\t\t\t\tconst R = w > xr || xl < 0;\n\t\t\t\tx = R ? tr + offset : xl;\n\t\t\t\tarrowX = R ? 0 : cw;\n\t\t\t\tarrowPos = R ? \"left\" : \"right\";\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\tcase \"bottom\":\n\t\t\tx =\n\t\t\t\ttw !== cw\n\t\t\t\t\t? computePosition({\n\t\t\t\t\t\t\tcontainerSize: w,\n\t\t\t\t\t\t\ttargetOffset: tl,\n\t\t\t\t\t\t\ttargetSize: tw,\n\t\t\t\t\t\t\tcontentSize: cw,\n\t\t\t\t\t\t\tgap,\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t  })\n\t\t\t\t\t: tl;\n\t\t\tarrowX = x > tl ? cw / 2 : tl - x + tw / 2;\n\n\t\t\tconst yt = tt - offset - ch;\n\t\t\tconst yb = tb + offset + ch;\n\t\t\tif (position === \"top\") {\n\t\t\t\tconst T = yt < 0 && yb <= h;\n\t\t\t\ty = T ? tb + offset : yt;\n\t\t\t\tarrowY = T ? 0 : ch;\n\t\t\t\tarrowPos = T ? \"top\" : \"bottom\";\n\t\t\t} else {\n\t\t\t\tconst B = h > yb || yt < 0;\n\t\t\t\ty = B ? tb + offset : yt;\n\t\t\t\tarrowY = B ? 0 : ch;\n\t\t\t\tarrowPos = B ? \"top\" : \"bottom\";\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\treturn [\n\t\tx,\n\t\ty,\n\t\t{\n\t\t\tarrowX,\n\t\t\tarrowY,\n\t\t\tarrowPos,\n\t\t},\n\t];\n}\n\nexport function getPointPosition(e: MouseEvent, content: HTMLElement) {\n\tconst { width: w, height: h } = content.getBoundingClientRect();\n\tconst parent = content.offsetParent;\n\tlet pw,\n\t\tph,\n\t\tpl = 0,\n\t\tpt = 0;\n\n\tif (parent) {\n\t\tconst {\n\t\t\twidth: ow,\n\t\t\theight: oh,\n\t\t\tleft: ol,\n\t\t\ttop: ot,\n\t\t} = parent.getBoundingClientRect();\n\t\tconst st = parent.scrollTop ?? 0;\n\n\t\tpw = ow;\n\t\tph = oh;\n\t\tpt = ot - st;\n\t\tpl = ol;\n\t} else {\n\t\tpw = window.innerWidth;\n\t\tph = window.innerHeight;\n\t}\n\tconst x = e.pageX - pl;\n\tconst y = e.pageY - pt;\n\n\tconst left = x + w >= pw ? (x - w > 0 ? x - w : x) : x;\n\tconst top = y + h >= ph ? (y - h > 0 ? y - h : y) : y;\n\n\treturn [left, top];\n}\n\nfunction computePosition({\n\tcontainerSize,\n\ttargetSize,\n\ttargetOffset,\n\tcontentSize,\n\tgap,\n\talign = \"center\",\n}: TComputePosition) {\n\tconst centerPoint = targetOffset + targetSize / 2;\n\n\tswitch (align) {\n\t\tcase \"start\":\n\t\t\treturn targetOffset + contentSize > containerSize\n\t\t\t\t? containerSize - contentSize - gap\n\t\t\t\t: targetOffset;\n\t\tcase \"center\":\n\t\t\tif (targetSize >= contentSize) {\n\t\t\t\treturn centerPoint - contentSize / 2;\n\t\t\t}\n\n\t\t\tif (centerPoint + contentSize / 2 + gap > containerSize) {\n\t\t\t\treturn targetOffset + targetSize - contentSize;\n\t\t\t}\n\n\t\t\tif (centerPoint - contentSize / 2 - gap < 0) {\n\t\t\t\treturn gap;\n\t\t\t}\n\n\t\t\treturn centerPoint - contentSize / 2;\n\t\tcase \"end\":\n\t\t\tconst result = targetOffset + targetSize - contentSize;\n\t\t\treturn result > 0 ? result : gap;\n\t\tdefault:\n\t\t\treturn centerPoint - contentSize / 2;\n\t}\n}\n\nexport function formatOption(options: TOptions): TOption[] {\n\treturn options.map((option) =>\n\t\t[\"string\", \"number\"].includes(typeof option)\n\t\t\t? { label: option, value: option }\n\t\t\t: option\n\t) as TOption[];\n}\n\nexport function animate(\n\tfrom: number,\n\tto: number,\n\tduration: number = 1000,\n\tcallback?: (v: number) => void,\n\teasing: (t: number) => number = (t) => 1 - Math.pow(1 - t, 4)\n) {\n\tconst start = performance.now();\n\tconst diff = to - from;\n\tlet raf = requestAnimationFrame(loop);\n\n\tfunction loop() {\n\t\traf = requestAnimationFrame(loop);\n\n\t\tconst past = performance.now() - start;\n\t\tlet percent = past / duration;\n\n\t\tif (percent >= 1) {\n\t\t\tpercent = 1;\n\t\t\tcancelAnimationFrame(raf);\n\t\t}\n\n\t\tconst pass = diff * easing(percent);\n\t\tcallback?.(pass);\n\t}\n}\n\nexport function formatNumber(\n\tvalue: number,\n\toptions: {\n\t\tprecision?: number;\n\t\tthousand?: string;\n\t} = {}\n) {\n\tconst { precision, thousand } = options;\n\n\tconst result = value.toFixed(precision);\n\n\tif (!thousand) return result;\n\n\tconst points = result.split(\".\");\n\tconst integer = points[0].replace(\n\t\t/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,\n\t\t`$&${thousand}`\n\t);\n\n\tif (points.length === 1) return integer;\n\n\treturn `${integer}.${points[1]}`;\n}\n\nexport function renderNode(node: ReactNode, container = document.body) {\n\tconst div: HTMLDivElement | null = document.createElement(\"div\");\n\tcontainer.append(div);\n\n\tconst root: Root | null = createRoot(div);\n\tconst sto = setTimeout(() => {\n\t\troot?.render(node);\n\t}, 0);\n\n\treturn () => {\n\t\tdiv?.remove();\n\t\troot?.unmount();\n\t\tsto && clearTimeout(sto);\n\t};\n}\n\nexport function getSuffixByUrl(url: string) {\n\treturn url.match(/\\.([^\\./\\?]+)($|\\?)/)?.[1];\n}\n\nexport function getFileType(suffix: string, type?: string) {\n\tswitch (true) {\n\t\tcase [\n\t\t\t\"jpg\",\n\t\t\t\"jpeg\",\n\t\t\t\"png\",\n\t\t\t\"webp\",\n\t\t\t\"svg\",\n\t\t\t\"avif\",\n\t\t\t\"heif\",\n\t\t\t\"heic\",\n\t\t\t\"apng\",\n\t\t\t\"bmp\",\n\t\t\t\"ico\",\n\t\t].includes(suffix) || type?.startsWith(\"image/\"):\n\t\t\treturn \"IMAGE\";\n\t\tcase [\n\t\t\t\"mp4\",\n\t\t\t\"avi\",\n\t\t\t\"webm\",\n\t\t\t\"ogv\",\n\t\t\t\"mov\",\n\t\t\t\"mkv\",\n\t\t\t\"mpd\",\n\t\t\t\"m3u8\",\n\t\t].includes(suffix) || type?.startsWith(\"video/\"):\n\t\t\treturn \"VIDEO\";\n\t\tdefault:\n\t\t\treturn \"UNKNOWN\";\n\t}\n}\n\nexport function fullScreen(el: HTMLElement) {\n\tel.requestFullscreen?.();\n}\n\nexport function exitFullScreen() {\n\tdocument.exitFullscreen?.();\n}\n\nexport function formatTime(\n\ttime: number,\n\toptions?: {\n\t\tzero?: boolean;\n\t\tunits?: string[];\n\t}\n) {\n\tconst result: string[] = [];\n\tconst { zero = true, units = [\"\", \":\", \":\"] } = options || {};\n\n\tconst l = units.length;\n\tlet i = 0;\n\n\twhile (i < l) {\n\t\tif (time <= 0 && i > 1) break;\n\n\t\tconst n = Math.round(time % 60);\n\n\t\ttime = Math.floor(time / 60);\n\n\t\tresult.unshift((zero && n < 10 ? `0${n}` : n) + units[i++]);\n\t}\n\n\treturn result.join(\"\");\n}\n\nexport function getNextSorter(\n\tprevSortBy: string,\n\tprevSortType: string,\n\tsortBy: string\n): [sortBy: string, sortType: string] {\n\tconst types = [\"desc\", \"asc\"];\n\n\tif (prevSortBy === sortBy) {\n\t\tconst i = types.findIndex((t) => t === prevSortType) + 1;\n\t\tconst type = types[i] || \"\";\n\t\tconst by = type === \"\" ? \"\" : sortBy;\n\n\t\treturn [by, type];\n\t}\n\n\treturn [sortBy, \"desc\"];\n}\n\nexport function formatBytes(bytes: number, decimals = 2) {\n\tif (!+bytes) return \"0 Bytes\";\n\n\tconst k = 1024;\n\tconst dm = decimals < 0 ? 0 : decimals;\n\tconst sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\n\treturn `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nexport function clamp(value: number, min: number, max: number) {\n\treturn value < min ? min : value > max ? max : value;\n}\n\nexport const arrayMove = (array, fromIndex: number, toIndex: number) => {\n\tif (toIndex >= array.length) {\n\t\tlet k = toIndex - array.length + 1;\n\t\twhile (k--) {\n\t\t\tarray.push(undefined);\n\t\t}\n\t}\n\tarray.splice(toIndex, 0, array.splice(fromIndex, 1)[0]);\n\treturn array;\n};\n\ntype ReactiveObject<T> = T & { __isReactive?: boolean };\n\nexport function useReactive<T extends object>(\n\tinitialState: T\n): ReactiveObject<T> {\n\tconst [, setState] = useState<number>(0);\n\tconst reactiveState = useRef<ReactiveObject<T>>(initialState);\n\n\tuseEffect(() => {\n\t\tif (!reactiveState.current.__isReactive) {\n\t\t\treactiveState.current = createReactiveObject(\n\t\t\t\treactiveState.current,\n\t\t\t\tsetState\n\t\t\t);\n\t\t}\n\t}, []);\n\n\treturn reactiveState.current;\n}\n\nfunction createReactiveObject<T extends object>(\n\ttarget: T,\n\tsetState: React.Dispatch<React.SetStateAction<number>>\n): ReactiveObject<T> {\n\treturn new Proxy(target, {\n\t\tget(obj, prop) {\n\t\t\tif (prop === \"__isReactive\") return true;\n\t\t\treturn Reflect.get(obj, prop);\n\t\t},\n\t\tset(obj, prop, value) {\n\t\t\tconst result = Reflect.set(obj, prop, value);\n\t\t\tsetState((prev) => prev + 1); // Trigger re-render\n\t\t\treturn result;\n\t\t},\n\t}) as ReactiveObject<T>;\n}\n\nexport default useReactive;\n"],"names":["createRoot"],"mappings":"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"}