{"version":3,"file":"item.js","sources":["../../../../packages/components/tree/item.tsx"],"sourcesContent":["import { KeyboardArrowDownRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport { MouseEvent, useState } from \"react\";\r\nimport Checkbox from \"../checkbox\";\r\nimport Icon from \"../icon\";\r\nimport { ITree, ITreeHeader, PropsTreeItem } from \"./type\";\r\n\r\ninterface ITreeList extends Omit<ITree, \"nodeProps\"> {\r\n\tnodeProps: {\r\n\t\tkey: string;\r\n\t\ttitle: string;\r\n\t\tchildren: string;\r\n\t};\r\n}\r\n\r\nexport function TreeList(props: ITreeList) {\r\n\tconst {\r\n\t\tdata = [],\r\n\t\tdepth = 0,\r\n\t\tround,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tparent,\r\n\t\tnodeProps,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst contents = data.map((item, i) => {\r\n\t\tconst { type } = item;\r\n\t\tconst title = item[nodeProps.title];\r\n\t\tconst itemKey =\r\n\t\t\titem[nodeProps.key] ||\r\n\t\t\t(parent?.key !== undefined ? `${parent.key}-${i}` : `${i}`);\r\n\r\n\t\titem.key = itemKey;\r\n\t\titem.parent = parent;\r\n\r\n\t\tif (type === \"title\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div key={i} className='i-tree-group-title'>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (type && type !== \"item\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div key={i} className={`i-tree-type-${type}`}>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<TreeItem\r\n\t\t\t\tkey={itemKey}\r\n\t\t\t\tindex={i}\r\n\t\t\t\titem={item}\r\n\t\t\t\tdepth={depth}\r\n\t\t\t\tnodeProps={nodeProps}\r\n\t\t\t\t{...restProps}\r\n\t\t\t/>\r\n\t\t);\r\n\t});\r\n\r\n\tif (depth > 0) return <>{contents}</>;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-tree\", className, {\r\n\t\t\t\t\"i-tree-round\": round,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{contents}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Header = (props: ITreeHeader) => {\r\n\tconst { as: Tag = \"a\", href, selected, children, ...restProps } = props;\r\n\r\n\tconst className = classNames(\"i-tree-item-header\", {\r\n\t\t\"i-tree-item-selected\": selected,\r\n\t});\r\n\r\n\tif (typeof Tag === \"string\") {\r\n\t\treturn (\r\n\t\t\t<Tag href={href} className={className} {...restProps}>\r\n\t\t\t\t{children}\r\n\t\t\t</Tag>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Tag to={href || \"\"} className={className} {...restProps}>\r\n\t\t\t{children}\r\n\t\t</Tag>\r\n\t);\r\n};\r\n\r\nexport const TreeItem = (props: PropsTreeItem) => {\r\n\tconst {\r\n\t\titem,\r\n\t\tdepth = 0,\r\n\t\tindex,\r\n\t\tselected,\r\n\t\tchecked = [],\r\n\t\tpartofs = {},\r\n\t\tcheckable,\r\n\t\tnodeProps,\r\n\t\trenderExtra,\r\n\t\tonItemClick,\r\n\t\tonItemSelect,\r\n\t\tonItemCheck,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst { as, key = \"\", href, icon, title, expanded, disabled } = item;\r\n\tconst children = item[nodeProps.children];\r\n\r\n\tconst [expand, setExpand] = useState(expanded);\r\n\r\n\tconst handleExpand = (e: MouseEvent<HTMLElement>, fromToggle?: boolean) => {\r\n\t\tif (fromToggle) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\tif (disabled || !children?.length) return;\r\n\r\n\t\tsetExpand((v) => !v);\r\n\t};\r\n\r\n\tconst handleItemClick = (e: MouseEvent<HTMLElement>) => {\r\n\t\tif (disabled) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thandleExpand(e);\r\n\t\tonItemClick?.(item, e);\r\n\t\tonItemSelect?.(key, item);\r\n\t};\r\n\r\n\tconst handleItemCheck = (checked) => onItemCheck?.(item, checked, []);\r\n\tconst itemChecked = checked.includes(key);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-tree-item\", {\r\n\t\t\t\t\"i-tree-expand\": expand,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t<Header\r\n\t\t\t\tas={as}\r\n\t\t\t\thref={href}\r\n\t\t\t\tstyle={{ paddingLeft: `${depth * 1.5 + 0.5}em` }}\r\n\t\t\t\tselected={selected === key}\r\n\t\t\t\tonClick={handleItemClick}\r\n\t\t\t>\r\n\t\t\t\t{checkable && (\r\n\t\t\t\t\t<Checkbox.Item\r\n\t\t\t\t\t\tvalue={itemChecked}\r\n\t\t\t\t\t\tpartof={!itemChecked && partofs[key]}\r\n\t\t\t\t\t\tclassName='i-tree-checkbox'\r\n\t\t\t\t\t\tonChange={handleItemCheck}\r\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{icon && <span className='i-tree-item-icon'>{icon}</span>}\r\n\r\n\t\t\t\t<span className='i-tree-item-title'>{title}</span>\r\n\r\n\t\t\t\t{renderExtra?.(item)}\r\n\r\n\t\t\t\t{children && (\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<KeyboardArrowDownRound />}\r\n\t\t\t\t\t\tclassName='i-tree-toggle'\r\n\t\t\t\t\t\tonClick={(e) => handleExpand(e, true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Header>\r\n\r\n\t\t\t{children?.length && (\r\n\t\t\t\t<div className='i-tree-item-content'>\r\n\t\t\t\t\t<TreeList\r\n\t\t\t\t\t\tdata={children}\r\n\t\t\t\t\t\tdepth={depth + 1}\r\n\t\t\t\t\t\tselected={selected}\r\n\t\t\t\t\t\tcheckable={checkable}\r\n\t\t\t\t\t\tparent={item}\r\n\t\t\t\t\t\tpartofs={partofs}\r\n\t\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\t\tnodeProps={nodeProps}\r\n\t\t\t\t\t\trenderExtra={renderExtra}\r\n\t\t\t\t\t\tonItemClick={onItemClick}\r\n\t\t\t\t\t\tonItemSelect={onItemSelect}\r\n\t\t\t\t\t\tonItemCheck={onItemCheck}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n"],"names":["_jsx","_Fragment","classNames","icon","useState","_jsxs","Checkbox","Icon","KeyboardArrowDownRound"],"mappings":"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"}