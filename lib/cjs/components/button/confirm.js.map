{"version":3,"file":"confirm.js","sources":["../../../../packages/components/button/confirm.tsx"],"sourcesContent":["import { useReactive } from \"ahooks\";\r\nimport Button from \"./button\";\r\nimport type { IButton, IButtonConfirm } from \"./type\";\r\n\r\nconst defaultOk = {\r\n\tchildren: \"确定\",\r\n\tclassName: \"bg-error\",\r\n};\r\n\r\nconst defaultCancel = {\r\n\tchildren: \"取消\",\r\n\tsecondary: true,\r\n};\r\n\r\nexport default function Confirm(props: IButtonConfirm) {\r\n\tconst {\r\n\t\tref,\r\n\t\tsize,\r\n\t\tokButtonProps,\r\n\t\tcancelButtonProps,\r\n\t\tonOk,\r\n\t\tonCancel,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tactive: false,\r\n\t\tloading: false,\r\n\t});\r\n\r\n\tconst ok: IButton = okButtonProps\r\n\t\t? Object.assign({}, defaultOk, okButtonProps)\r\n\t\t: defaultOk;\r\n\tconst cancel: IButton = cancelButtonProps\r\n\t\t? Object.assign({}, defaultCancel, cancelButtonProps)\r\n\t\t: defaultCancel;\r\n\r\n\tconst handleClick = (e) => {\r\n\t\tonClick?.(e);\r\n\t\tstate.active = true;\r\n\t};\r\n\r\n\tconst hanldeOk = async () => {\r\n\t\tif (state.loading) return;\r\n\t\tstate.loading = true;\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await onOk?.();\r\n\r\n\t\t\tif (res !== false) {\r\n\t\t\t\tstate.active = false;\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tstate.loading = false;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleCancel = () => {\r\n\t\tonCancel?.();\r\n\t\tstate.active = false;\r\n\t};\r\n\r\n\tif (!state.active) {\r\n\t\treturn (\r\n\t\t\t<Button\r\n\t\t\t\tref={ref}\r\n\t\t\t\tsize={size}\r\n\t\t\t\t{...restProps}\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Button.Group>\r\n\t\t\t<Button\r\n\t\t\t\tsize={size}\r\n\t\t\t\t{...ok}\r\n\t\t\t\tloading={state.loading}\r\n\t\t\t\tonClick={hanldeOk}\r\n\t\t\t/>\r\n\t\t\t<Button\r\n\t\t\t\tsize={size}\r\n\t\t\t\t{...cancel}\r\n\t\t\t\tdisabled={state.loading}\r\n\t\t\t\tonClick={handleCancel}\r\n\t\t\t/>\r\n\t\t</Button.Group>\r\n\t);\r\n}\r\n"],"names":["useReactive","_jsx","Button","_jsxs"],"mappings":";;;;;;;;AAIA,MAAM,SAAS,GAAG;AACjB,IAAA,QAAQ,EAAE,IAAI;AACd,IAAA,SAAS,EAAE,UAAU;CACrB;AAED,MAAM,aAAa,GAAG;AACrB,IAAA,QAAQ,EAAE,IAAI;AACd,IAAA,SAAS,EAAE,IAAI;CACf;AAEuB,SAAA,OAAO,CAAC,KAAqB,EAAA;IACpD,MAAM,EACL,GAAG,EACH,IAAI,EACJ,aAAa,EACb,iBAAiB,EACjB,IAAI,EACJ,QAAQ,EACR,OAAO,EACP,GAAG,SAAS,EACZ,GAAG,KAAK;IAET,MAAM,KAAK,GAAGA,kBAAW,CAAC;AACzB,QAAA,MAAM,EAAE,KAAK;AACb,QAAA,OAAO,EAAE,KAAK;AACd,KAAA,CAAC;IAEF,MAAM,EAAE,GAAY;UACjB,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,EAAE,aAAa;UAC1C,SAAS;IACZ,MAAM,MAAM,GAAY;UACrB,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,aAAa,EAAE,iBAAiB;UAClD,aAAa;AAEhB,IAAA,MAAM,WAAW,GAAG,CAAC,CAAC,KAAI;AACzB,QAAA,OAAO,GAAG,CAAC,CAAC;AACZ,QAAA,KAAK,CAAC,MAAM,GAAG,IAAI;AACpB,KAAC;AAED,IAAA,MAAM,QAAQ,GAAG,YAAW;QAC3B,IAAI,KAAK,CAAC,OAAO;YAAE;AACnB,QAAA,KAAK,CAAC,OAAO,GAAG,IAAI;AAEpB,QAAA,IAAI;AACH,YAAA,MAAM,GAAG,GAAG,MAAM,IAAI,IAAI;AAE1B,YAAA,IAAI,GAAG,KAAK,KAAK,EAAE;AAClB,gBAAA,KAAK,CAAC,MAAM,GAAG,KAAK;;;gBAEZ;AACT,YAAA,KAAK,CAAC,OAAO,GAAG,KAAK;;AAEvB,KAAC;IAED,MAAM,YAAY,GAAG,MAAK;QACzB,QAAQ,IAAI;AACZ,QAAA,KAAK,CAAC,MAAM,GAAG,KAAK;AACrB,KAAC;AAED,IAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AAClB,QAAA,QACCC,cAAC,CAAAC,cAAM,IACN,GAAG,EAAE,GAAG,EACR,IAAI,EAAE,IAAI,EAAA,GACN,SAAS,EACb,OAAO,EAAE,WAAW,EAAA,CACnB;;IAIJ,QACCC,gBAACD,cAAM,CAAC,KAAK,EACZ,EAAA,QAAA,EAAA,CAAAD,cAAA,CAACC,cAAM,EACN,EAAA,IAAI,EAAE,IAAI,EAAA,GACN,EAAE,EACN,OAAO,EAAE,KAAK,CAAC,OAAO,EACtB,OAAO,EAAE,QAAQ,EAChB,CAAA,EACFD,eAACC,cAAM,EAAA,EACN,IAAI,EAAE,IAAI,EACN,GAAA,MAAM,EACV,QAAQ,EAAE,KAAK,CAAC,OAAO,EACvB,OAAO,EAAE,YAAY,EAAA,CACpB,CACY,EAAA,CAAA;AAEjB;;;;"}