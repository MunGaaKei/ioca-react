{"version":3,"file":"collapse.js","sources":["../../../../packages/components/collapse/collapse.tsx"],"sourcesContent":["import { MinusRound, PlusRound } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { Children, useMemo } from \"react\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { ICollapse, ICollapseItem, TKey } from \"./type\";\r\n\r\nconst Collapse = (props: ICollapse) => {\r\n\tconst {\r\n\t\tactive,\r\n\t\titems,\r\n\t\tmultiple,\r\n\t\tborder,\r\n\t\theaderClickable,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\trenderToggle = (active: boolean) =>\r\n\t\t\tactive ? <MinusRound /> : <PlusRound />,\r\n\t\tonCollapse,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tactive,\r\n\t});\r\n\r\n\tconst collapses = useMemo(() => {\r\n\t\tif (!items) {\r\n\t\t\tif (!children) return [];\r\n\r\n\t\t\treturn (\r\n\t\t\t\tChildren.map(children, (node, i) => {\r\n\t\t\t\t\tconst { key, props: nodeProps } = node as {\r\n\t\t\t\t\t\tkey?: TKey;\r\n\t\t\t\t\t\tprops?: any;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst { title, children, content, disabled, ...restProps } =\r\n\t\t\t\t\t\tnodeProps;\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...restProps,\r\n\t\t\t\t\t\tkey: key || i,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tcontent: children || content,\r\n\t\t\t\t\t\tdisabled,\r\n\t\t\t\t\t};\r\n\t\t\t\t}) || []\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn items;\r\n\t}, [children]);\r\n\r\n\tconst handleHeaderClick = (item: ICollapseItem) => {\r\n\t\tif (!headerClickable) return;\r\n\r\n\t\thandleToggle(item);\r\n\t};\r\n\r\n\tconst handleToggle = (item: ICollapseItem, e?) => {\r\n\t\tconst { key, disabled } = item;\r\n\t\te?.stopPropagation();\r\n\t\tif (disabled) return;\r\n\r\n\t\tif (!multiple) {\r\n\t\t\tstate.active = state.active === key ? undefined : key;\r\n\t\t\tonCollapse?.(key as TKey, state.active !== undefined);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(state.active)) state.active = [];\r\n\r\n\t\tconst i = state.active.findIndex((k) => k === key);\r\n\r\n\t\tif (i > -1) {\r\n\t\t\tstate.active.splice(i, 1);\r\n\t\t} else {\r\n\t\t\tkey !== undefined && state.active.push(key);\r\n\t\t}\r\n\t\tonCollapse?.(key as TKey, i < 0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-collapse\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-collapse-bordered\": border,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{collapses.map((item) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tcontent,\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t\tclassName,\r\n\t\t\t\t\t...restProps\r\n\t\t\t\t} = item;\r\n\t\t\t\tconst isActive = multiple\r\n\t\t\t\t\t? ((state.active as TKey[]) || []).includes(key)\r\n\t\t\t\t\t: state.active === key;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\tclassName={classNames(\"i-collapse-item\", className, {\r\n\t\t\t\t\t\t\t\"i-collapse-active\": isActive,\r\n\t\t\t\t\t\t\t\"i-collapse-disabled\": disabled,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='i-collapse-header'\r\n\t\t\t\t\t\t\tonClick={() => handleHeaderClick(item)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{title}\r\n\r\n\t\t\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\tclassName='i-collapse-toggle'\r\n\t\t\t\t\t\t\t\ticon={renderToggle(isActive)}\r\n\t\t\t\t\t\t\t\tonClick={(e) => handleToggle(item, e)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='i-collapse-content'>{content}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCollapse.Item = Item;\r\n\r\nexport default Collapse;\r\n"],"names":["_jsx","MinusRound","PlusRound","useReactive","useMemo","Children","classNames","_jsxs","Helpericon","Item"],"mappings":"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"}