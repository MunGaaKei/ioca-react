{"version":3,"file":"resizable.js","sources":["../../../../packages/components/resizable/resizable.tsx"],"sourcesContent":["import { useReactive } from \"ahooks\";\nimport classNames from \"classnames\";\nimport { useRef } from \"react\";\nimport { useMouseMove, useMouseUp } from \"../../js/hooks\";\nimport \"./index.css\";\nimport { IResizable } from \"./type\";\n\nconst Resizable = (props: IResizable) => {\n\tconst {\n\t\tother,\n\t\tchildren,\n\t\tvertical,\n\t\theight,\n\t\tsize = \"auto\",\n\t\tminSize = 0,\n\t\tmaxSize = \"100%\",\n\t\tstyle,\n\t\tline,\n\t\tclassName,\n\t\tasPercent,\n\t\tonResize,\n\t\tonResizeComplete,\n\t} = props;\n\n\tconst state = useReactive({\n\t\tsize,\n\t\tresizing: false,\n\t\tstart: 0,\n\t\ttotal: 0,\n\t});\n\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tconst handleMouseDown = () => {\n\t\tconst rect = ref.current?.getBoundingClientRect();\n\t\tif (!rect) return;\n\n\t\tstate.resizing = true;\n\n\t\tif (vertical) {\n\t\t\tstate.total = rect.height;\n\t\t\tstate.start = rect.top;\n\t\t\treturn;\n\t\t}\n\n\t\tstate.total = rect.width;\n\t\tstate.start = rect.left;\n\t};\n\n\tconst handleMouseMove = (e) => {\n\t\tif (!state.resizing) return;\n\n\t\te.preventDefault();\n\n\t\tif (e.touches) {\n\t\t\te = e.touches[0];\n\t\t}\n\n\t\tconst d = e[vertical ? \"pageY\" : \"pageX\"];\n\t\tconst offset = d - state.start;\n\n\t\tstate.size = asPercent ? `${(offset / state.total) * 100}%` : offset;\n\t\tonResize?.(state.size);\n\t};\n\n\tconst handleMouseUp = () => {\n\t\tif (!state.resizing) return;\n\n\t\tstate.resizing = false;\n\t\tonResizeComplete?.(state.size);\n\t};\n\n\tuseMouseUp(handleMouseUp);\n\tuseMouseMove(handleMouseMove);\n\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\tclassName={classNames(\"i-resizable\", className, {\n\t\t\t\t[`i-resizable-vertical`]: vertical,\n\t\t\t})}\n\t\t\tstyle={{ ...style, height }}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName='i-resizable-a'\n\t\t\t\tstyle={{\n\t\t\t\t\t[vertical ? \"height\" : \"width\"]: state.size,\n\t\t\t\t\t[vertical ? \"minHeight\" : \"minWidth\"]: minSize,\n\t\t\t\t\t[vertical ? \"maxHeight\" : \"maxWidth\"]: maxSize,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{other}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"i-resizable-line\", {\n\t\t\t\t\t[`i-resizable-resizing`]: state.resizing,\n\t\t\t\t})}\n\t\t\t\tonMouseDown={handleMouseDown}\n\t\t\t\tonTouchStart={handleMouseDown}\n\t\t\t\tonContextMenu={(e) => e.preventDefault()}\n\t\t\t>\n\t\t\t\t<div className='i-resizable-line-node'>{line}</div>\n\t\t\t</div>\n\n\t\t\t<div className='i-resizable-b'>{children}</div>\n\t\t</div>\n\t);\n};\n\nexport default Resizable;\n"],"names":["useReactive","useRef","useMouseUp","useMouseMove","_jsxs","_jsx"],"mappings":"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"}