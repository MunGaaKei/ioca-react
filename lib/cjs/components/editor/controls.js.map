{"version":3,"file":"controls.js","sources":["../../../../packages/components/editor/controls.tsx"],"sourcesContent":["import {\r\n\tClearAllRound,\r\n\tFormatBoldRound,\r\n\tFormatItalicRound,\r\n\tFormatUnderlinedRound,\r\n\tRedoRound,\r\n\tStrikethroughSRound,\r\n\tUndoRound,\r\n} from \"@ricons/material\";\r\nimport { Fragment } from \"react/jsx-runtime\";\r\nimport { escapeAttrValue } from \"xss\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\n\r\nexport const exec = (a, b?, c?) => {\r\n\tif (typeof document === \"undefined\") return;\r\n\treturn document.execCommand(a, b, c);\r\n};\r\n\r\nexport const xssOptions = {\r\n\tonIgnoreTagAttr: function (tag, name, value) {\r\n\t\tif ([\"data-\", \"style\"].includes(name.substr(0, 5))) {\r\n\t\t\treturn name + '=\"' + escapeAttrValue(value) + '\"';\r\n\t\t}\r\n\t},\r\n};\r\n\r\nconst fnMap = {\r\n\tbold: {\r\n\t\ticon: <FormatBoldRound />,\r\n\t\tonClick: () => exec(\"bold\"),\r\n\t\ttip: \"粗体\",\r\n\t},\r\n\titalic: {\r\n\t\ticon: <FormatItalicRound />,\r\n\t\tonClick: () => exec(\"italic\"),\r\n\t\ttip: \"斜体\",\r\n\t},\r\n\tunderline: {\r\n\t\ticon: <FormatUnderlinedRound />,\r\n\t\tonClick: () => exec(\"underline\"),\r\n\t\ttip: \"下划线\",\r\n\t},\r\n\tstrike: {\r\n\t\ticon: <StrikethroughSRound />,\r\n\t\tonClick: () => exec(\"strikeThrough\"),\r\n\t\ttip: \"删除线\",\r\n\t},\r\n\tredo: {\r\n\t\ticon: <RedoRound />,\r\n\t\tonClick: () => exec(\"redo\"),\r\n\t\ttip: \"重做\",\r\n\t},\r\n\tundo: {\r\n\t\ticon: <UndoRound />,\r\n\t\tonClick: () => exec(\"undo\"),\r\n\t\ttip: \"撤销\",\r\n\t},\r\n\t// color: {\r\n\t// \ticon: <FormatColorTextRound />,\r\n\t// \tonClick: () => exec(\"foreColor\", false, \"\"),\r\n\t// },\r\n\t// backColor: {\r\n\t// \ticon: <FormatColorFillRound />,\r\n\t// \tonClick: () => exec(\"backColor\", false, \"\"),\r\n\t// },\r\n\tclear: {\r\n\t\ticon: <ClearAllRound />,\r\n\t\tonClick: () => exec(\"removeFormat\"),\r\n\t\ttip: \"清除格式\",\r\n\t},\r\n};\r\n\r\nconst aliasMap = {\r\n\tsimple: [\"undo\", \"redo\", \"bold\", \"italic\", \"underline\", \"strike\", \"clear\"],\r\n\tall: Object.keys(fnMap),\r\n};\r\n\r\nexport default function getControls(fns, options) {\r\n\tconst { controlBtnProps } = options;\r\n\tconst keys = typeof fns === \"string\" ? aliasMap[fns] : fns;\r\n\r\n\treturn keys.map((k) => {\r\n\t\tif (fnMap[k]) {\r\n\t\t\tconst { icon, render, tip, onClick } = fnMap[k];\r\n\r\n\t\t\tif (render) {\r\n\t\t\t\treturn render(options);\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Button key={k} {...controlBtnProps} onClick={onClick}>\r\n\t\t\t\t\t<Icon icon={icon} />\r\n\t\t\t\t\t{tip && <span className='i-editor-control-tip'>{tip}</span>}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn <Fragment key={k} />;\r\n\t});\r\n}\r\n"],"names":["escapeAttrValue","_jsx","FormatBoldRound","FormatItalicRound","FormatUnderlinedRound","StrikethroughSRound","RedoRound","UndoRound","ClearAllRound","icon","_jsxs","Button","Icon","Fragment"],"mappings":"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"}