{"version":3,"file":"renderFile.js","sources":["../../../../packages/components/upload/renderFile.tsx"],"sourcesContent":["import { ListAltRound } from \"@ricons/material\";\r\nimport { title } from \"radash\";\r\nimport { RefObject } from \"react\";\r\nimport SortableContainer from \"react-easy-sort\";\r\nimport { TFileType } from \"../../js/usePreview/type\";\r\nimport { formatBytes, getFileType } from \"../../js/utils\";\r\nimport Icon from \"../icon\";\r\nimport Image from \"../image\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport { IUploadItem } from \"./type\";\r\n\r\nexport const ListContainer = (props) => {\r\n\tconst { sortable, onSortEnd, itemProps, ...restProps } = props;\r\n\tconst customProps = {\r\n\t\tclassName: \"i-upload-list\",\r\n\t\tonClick: (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t};\r\n\r\n\tif (!sortable) {\r\n\t\treturn <div {...customProps} {...restProps} />;\r\n\t}\r\n\treturn (\r\n\t\t<SortableContainer\r\n\t\t\tdraggedItemClassName='i-upload-item-dragged'\r\n\t\t\tonSortEnd={onSortEnd}\r\n\t\t\t{...customProps}\r\n\t\t\t{...restProps}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst FileListItem = (\r\n\tprops: IUploadItem & { ref?: RefObject<HTMLDivElement | null> }\r\n) => {\r\n\tconst { ref, mode, index, file, renderItem, onRemove, onPreview } = props;\r\n\r\n\tif (!file) return \"\";\r\n\r\n\tconst { id, name, size, url, src } = file;\r\n\tconst type = getFileType(name, file.type);\r\n\r\n\tif (renderItem) {\r\n\t\treturn renderItem(file, index);\r\n\t}\r\n\r\n\tconst CloseBtn = (\r\n\t\t<Helpericon\r\n\t\t\tactive\r\n\t\t\tclassName='i-upload-delete'\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tonRemove(index);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n\r\n\tswitch (mode) {\r\n\t\tcase \"card\":\r\n\t\t\tlet node = <></>;\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase TFileType.IMAGE:\r\n\t\t\t\t\tnode = (\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tlazyload\r\n\t\t\t\t\t\t\tsrc={url || src}\r\n\t\t\t\t\t\t\tfit='cover'\r\n\t\t\t\t\t\t\tonMouseDown={(e) => e.preventDefault()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase TFileType.VIDEO:\r\n\t\t\t\t\tnode = <video src={url || src} preload='none' />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnode = (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Icon icon={<ListAltRound />} />\r\n\t\t\t\t\t\t\t<span className='i-upload-file-name'>\r\n\t\t\t\t\t\t\t\t{title(name)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={ref}\r\n\t\t\t\t\ttitle={name}\r\n\t\t\t\t\tclassName='i-upload-item-card'\r\n\t\t\t\t\tonClick={() => onPreview?.(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{node}\r\n\t\t\t\t\t{CloseBtn}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={ref}\r\n\t\t\t\t\tkey={id}\r\n\t\t\t\t\tclassName='i-upload-item'\r\n\t\t\t\t\tonClick={() => onPreview?.(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{name}</span>\r\n\r\n\t\t\t\t\t<i className='i-upload-size'>{formatBytes(size ?? 0)}</i>\r\n\r\n\t\t\t\t\t{CloseBtn}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n};\r\n\r\nexport default FileListItem;\r\n"],"names":["_jsx","SortableContainer","type","getFileType","Helpericon","_Fragment","TFileType","Image","_jsxs","Icon","ListAltRound","title","formatBytes"],"mappings":"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"}