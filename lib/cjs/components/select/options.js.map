{"version":3,"file":"options.js","sources":["../../../../packages/components/select/options.tsx"],"sourcesContent":["import { CheckRound, SearchRound } from \"@ricons/material\";\nimport classNames from \"classnames\";\nimport { TOption } from \"../../type\";\nimport Icon from \"../icon\";\nimport List from \"../list\";\nimport Tag from \"../tag\";\nimport Empty from \"../utils/empty\";\nimport { ISelectOptions } from \"./type\";\nexport const Options = (props: ISelectOptions) => {\n\tconst {\n\t\tvalue: val,\n\t\toptions,\n\t\tfilter,\n\t\tfilterPlaceholder,\n\t\tmultiple,\n\t\tempty = <Empty />,\n\t\tonSelect,\n\t\tonFilter,\n\t} = props;\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"i-select-options\", {\n\t\t\t\t\"i-select-options-multiple\": multiple,\n\t\t\t})}\n\t\t>\n\t\t\t{filter && multiple && (\n\t\t\t\t<div className='i-select-filter'>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={<SearchRound />}\n\t\t\t\t\t\tclassName='color-8 ml-8 my-auto'\n\t\t\t\t\t\tsize='1.2em'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tclassName='i-input'\n\t\t\t\t\t\tplaceholder={filterPlaceholder}\n\t\t\t\t\t\tonChange={onFilter}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{options.length === 0 && empty}\n\n\t\t\t{options.map((option, i) => {\n\t\t\t\tconst { label, value, disabled } = option;\n\t\t\t\tconst isActive = multiple\n\t\t\t\t\t? val?.includes(value)\n\t\t\t\t\t: val === value;\n\n\t\t\t\treturn (\n\t\t\t\t\t<List.Item\n\t\t\t\t\t\tkey={(value as string) || i}\n\t\t\t\t\t\tactive={isActive}\n\t\t\t\t\t\ttype='option'\n\t\t\t\t\t\tonClick={() => onSelect?.(value, option)}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t{multiple && (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={<CheckRound />}\n\t\t\t\t\t\t\t\tclassName='i-select-option-check'\n\t\t\t\t\t\t\t\tsize='1em'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</List.Item>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n\nexport const activeOptions = (\n\toptions: TOption[] = [],\n\tvalue: any[] = [],\n\tmax = 3\n) => {\n\tconst total = options.flatMap((opt) =>\n\t\tvalue.includes(opt.value) ? [opt] : []\n\t);\n\n\tif (max >= total.length) return total;\n\n\tconst rest = total.length - max;\n\tconst after = total.slice(0, max);\n\tafter.push(rest as any);\n\n\treturn after;\n};\n\nexport const displayValue = (config) => {\n\tconst { options, value, maxDisplay, multiple, onSelect } = config;\n\n\tif (multiple) {\n\t\treturn activeOptions(options, value, maxDisplay).map((opt, i) => {\n\t\t\tif (typeof opt === \"number\") return <Tag key={i}>+{opt}</Tag>;\n\n\t\t\tconst { label, value } = opt;\n\n\t\t\treturn (\n\t\t\t\t<Tag\n\t\t\t\t\tkey={value as string}\n\t\t\t\t\thoverShowClose\n\t\t\t\t\tonClose={(e) => {\n\t\t\t\t\t\te?.stopPropagation();\n\t\t\t\t\t\tonSelect?.(value, opt);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</Tag>\n\t\t\t);\n\t\t});\n\t}\n\n\treturn options.find((opt: TOption) => opt.value === value)?.label;\n};\n"],"names":["_jsx","Empty","_jsxs","classNames","Icon","SearchRound","List","CheckRound","Tag"],"mappings":"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"}