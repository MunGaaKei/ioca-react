{"version":3,"file":"resizable.js","sources":["../../../../packages/components/resizable/resizable.tsx"],"sourcesContent":["import { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useRef } from \"react\";\r\nimport { useMouseMove, useMouseUp } from \"../../js/hooks\";\r\nimport \"./index.css\";\r\nimport { IResizable } from \"./type\";\r\n\r\nconst Resizable = (props: IResizable) => {\r\n\tconst {\r\n\t\tother,\r\n\t\tchildren,\r\n\t\tvertical,\r\n\t\theight,\r\n\t\tsize = \"auto\",\r\n\t\tminSize = 0,\r\n\t\tmaxSize = \"100%\",\r\n\t\tstyle,\r\n\t\tline,\r\n\t\tclassName,\r\n\t\tasPercent,\r\n\t\tonResize,\r\n\t\tonResizeComplete,\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tsize,\r\n\t\tresizing: false,\r\n\t\tstart: 0,\r\n\t\ttotal: 0,\r\n\t});\r\n\r\n\tconst ref = useRef<HTMLDivElement>(null);\r\n\r\n\tconst handleMouseDown = () => {\r\n\t\tconst rect = ref.current?.getBoundingClientRect();\r\n\t\tif (!rect) return;\r\n\r\n\t\tstate.resizing = true;\r\n\r\n\t\tif (vertical) {\r\n\t\t\tstate.total = rect.height;\r\n\t\t\tstate.start = rect.top;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.total = rect.width;\r\n\t\tstate.start = rect.left;\r\n\t};\r\n\r\n\tconst handleMouseMove = (e) => {\r\n\t\tif (!state.resizing) return;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif (e.touches) {\r\n\t\t\te = e.touches[0];\r\n\t\t}\r\n\r\n\t\tconst d = e[vertical ? \"pageY\" : \"pageX\"];\r\n\t\tconst offset = d - state.start;\r\n\r\n\t\tstate.size = asPercent ? `${(offset / state.total) * 100}%` : offset;\r\n\t\tonResize?.(state.size);\r\n\t};\r\n\r\n\tconst handleMouseUp = () => {\r\n\t\tif (!state.resizing) return;\r\n\r\n\t\tstate.resizing = false;\r\n\t\tonResizeComplete?.(state.size);\r\n\t};\r\n\r\n\tuseMouseUp(handleMouseUp);\r\n\tuseMouseMove(handleMouseMove);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classNames(\"i-resizable\", className, {\r\n\t\t\t\t[`i-resizable-vertical`]: vertical,\r\n\t\t\t})}\r\n\t\t\tstyle={{ ...style, height }}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName='i-resizable-a'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\t[vertical ? \"height\" : \"width\"]: state.size,\r\n\t\t\t\t\t[vertical ? \"minHeight\" : \"minWidth\"]: minSize,\r\n\t\t\t\t\t[vertical ? \"maxHeight\" : \"maxWidth\"]: maxSize,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{other}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-resizable-line\", {\r\n\t\t\t\t\t[`i-resizable-resizing`]: state.resizing,\r\n\t\t\t\t})}\r\n\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\tonTouchStart={handleMouseDown}\r\n\t\t\t\tonContextMenu={(e) => e.preventDefault()}\r\n\t\t\t>\r\n\t\t\t\t<div className='i-resizable-line-node'>{line}</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='i-resizable-b'>{children}</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Resizable;\r\n"],"names":["_jsxs","_jsx"],"mappings":"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"}