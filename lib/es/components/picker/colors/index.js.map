{"version":3,"file":"index.js","sources":["../../../../../packages/components/picker/colors/index.tsx"],"sourcesContent":["import ColorsPanel from \"@rc-component/color-picker\";\r\nimport { useReactive } from \"ahooks\";\r\nimport { useEffect } from \"react\";\r\nimport Popup from \"../../popup\";\r\nimport { IColorPicker } from \"../type\";\r\nimport Footer, { ColorMethods } from \"./footer\";\r\nimport Handle from \"./handle\";\r\nimport \"./index.css\";\r\n\r\nexport default function ColorPicker(props: IColorPicker) {\r\n\tconst {\r\n\t\tvalue,\r\n\t\ttype = \"HEX\",\r\n\t\tdisabledAlpha,\r\n\t\tchildren,\r\n\t\tusePanel,\r\n\t\thandle = \"both\",\r\n\t\tplaceholder = \"Colors\",\r\n\t\tpopupProps,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\ttype,\r\n\t\tvalue,\r\n\t\tsyncValue: value,\r\n\t\tvisible: popupProps?.visible,\r\n\t});\r\n\r\n\tconst handleChange = (target) => {\r\n\t\tstate.syncValue = target;\r\n\t};\r\n\r\n\tconst handleComplete = (target) => {\r\n\t\tconst method = ColorMethods[state.type];\r\n\r\n\t\tif (target.a !== 1) {\r\n\t\t\ttarget.a = parseFloat(target.a.toFixed(3));\r\n\t\t}\r\n\r\n\t\tstate.value = target[method]?.();\r\n\t};\r\n\r\n\tconst handleVisibleChange = (v: boolean) => {\r\n\t\tstate.visible = v;\r\n\t\tpopupProps?.onVisibleChange?.(v);\r\n\t};\r\n\r\n\tconst handleTypeChange = (t) => {\r\n\t\tconst method = ColorMethods[t];\r\n\r\n\t\tstate.type = t;\r\n\t\tstate.value = state.syncValue[method]?.();\r\n\t};\r\n\r\n\tconst handleValueChange = (v) => {\r\n\t\tstate.value = v;\r\n\t\tstate.syncValue = v;\r\n\t};\r\n\r\n\tconst handleOk = () => {\r\n\t\tonChange?.(state.value);\r\n\t\tstate.visible = false;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.syncValue = value;\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tif (usePanel) {\r\n\t\treturn <ColorsPanel {...props} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\ttrigger='click'\r\n\t\t\ttouchable\r\n\t\t\tposition='bottom'\r\n\t\t\t{...popupProps}\r\n\t\t\tvisible={state.visible}\r\n\t\t\tcontent={\r\n\t\t\t\t<ColorsPanel\r\n\t\t\t\t\tvalue={state.syncValue}\r\n\t\t\t\t\tdisabledAlpha={disabledAlpha}\r\n\t\t\t\t\tpanelRender={(panel) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{panel}\r\n\t\t\t\t\t\t\t\t<Footer\r\n\t\t\t\t\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\t\t\t\t\ttype={state.type}\r\n\t\t\t\t\t\t\t\t\tonTypeChange={handleTypeChange}\r\n\t\t\t\t\t\t\t\t\tonChange={handleValueChange}\r\n\t\t\t\t\t\t\t\t\tonOk={handleOk}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tonChangeComplete={handleComplete}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\tonVisibleChange={handleVisibleChange}\r\n\t\t>\r\n\t\t\t{children ?? (\r\n\t\t\t\t<Handle\r\n\t\t\t\t\tcolor={value}\r\n\t\t\t\t\thandle={handle}\r\n\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Popup>\r\n\t);\r\n}\r\n"],"names":["_jsx","_jsxs","_Fragment"],"mappings":"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"}