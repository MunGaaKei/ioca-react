{"version":3,"file":"index.js","sources":["../../../../../packages/components/picker/time/index.tsx"],"sourcesContent":["import { AccessTimeRound } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Icon from \"../../icon\";\r\nimport Input from \"../../input\";\r\nimport Popup from \"../../popup\";\r\nimport { ITimePicker } from \"../type\";\r\nimport Panel from \"./panel\";\r\n\r\nconst FORMAT = \"hh:mm:ss\";\r\n\r\nexport default function TimePicker(props: ITimePicker) {\r\n\tconst {\r\n\t\tname,\r\n\t\tvalue,\r\n\t\tformat = FORMAT,\r\n\t\tperiods,\r\n\t\tplaceholder = props.format ?? FORMAT,\r\n\t\tclassName,\r\n\t\trenderItem,\r\n\t\tonChange,\r\n\t\tonBlur,\r\n\t\tpopupProps,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t\tsafeValue: undefined,\r\n\t});\r\n\tconst [active, setActive] = useState<boolean>(false);\r\n\r\n\tconst handleChange = (v) => {\r\n\t\tstate.value = v;\r\n\t};\r\n\r\n\tconst handleFallback = (v) => {\r\n\t\tstate.safeValue = v;\r\n\t};\r\n\r\n\tconst handleValidTime = () => {\r\n\t\tif (!state.value) return;\r\n\r\n\t\tstate.value = state.safeValue;\r\n\t\thandleChange(state.safeValue);\r\n\t};\r\n\r\n\tconst handleBlur = (e) => {\r\n\t\tonBlur?.(e);\r\n\t\thandleValidTime();\r\n\t};\r\n\r\n\tconst handleVisibleChange = (v) => {\r\n\t\tpopupProps?.onVisibleChange?.(v);\r\n\t\tsetActive(v);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\tvisible={active}\r\n\t\t\ttrigger='click'\r\n\t\t\tposition='bottom'\r\n\t\t\tarrow={false}\r\n\t\t\talign='start'\r\n\t\t\twatchResize\r\n\t\t\t{...popupProps}\r\n\t\t\tonVisibleChange={handleVisibleChange}\r\n\t\t\tcontent={\r\n\t\t\t\t<Panel\r\n\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\tformat={format}\r\n\t\t\t\t\tperiods={periods}\r\n\t\t\t\t\trenderItem={renderItem}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tonFallback={handleFallback}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Input\r\n\t\t\t\tvalue={state.value}\r\n\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\tappend={\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<AccessTimeRound />}\r\n\t\t\t\t\t\tclassName='i-timepicker-icon'\r\n\t\t\t\t\t\tsize='1em'\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\tclassName={classNames(\"i-timepicker-label\", className)}\r\n\t\t\t\t{...restProps}\r\n\t\t\t/>\r\n\t\t</Popup>\r\n\t);\r\n}\r\n"],"names":["_jsx"],"mappings":";;;;;;;;;;AAUA,MAAM,MAAM,GAAG,UAAU;AAED,SAAA,UAAU,CAAC,KAAkB,EAAA;AACpD,IAAA,MAAM,EACL,IAAI,EACJ,KAAK,EACL,MAAM,GAAG,MAAM,EACf,OAAO,EACP,WAAW,GAAG,KAAK,CAAC,MAAM,IAAI,MAAM,EACpC,SAAS,EACT,UAAU,EACV,QAAQ,EACR,MAAM,EACN,UAAU,EACV,GAAG,SAAS,EACZ,GAAG,KAAK;IACT,MAAM,KAAK,GAAG,WAAW,CAAC;QACzB,KAAK;AACL,QAAA,SAAS,EAAE,SAAS;AACpB,KAAA,CAAC;IACF,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC;AAEpD,IAAA,MAAM,YAAY,GAAG,CAAC,CAAC,KAAI;AAC1B,QAAA,KAAK,CAAC,KAAK,GAAG,CAAC;AAChB,KAAC;AAED,IAAA,MAAM,cAAc,GAAG,CAAC,CAAC,KAAI;AAC5B,QAAA,KAAK,CAAC,SAAS,GAAG,CAAC;AACpB,KAAC;IAED,MAAM,eAAe,GAAG,MAAK;QAC5B,IAAI,CAAC,KAAK,CAAC,KAAK;YAAE;AAElB,QAAA,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,SAAS;AAC7B,QAAA,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC;AAC9B,KAAC;AAED,IAAA,MAAM,UAAU,GAAG,CAAC,CAAC,KAAI;AACxB,QAAA,MAAM,GAAG,CAAC,CAAC;AACX,QAAA,eAAe,EAAE;AAClB,KAAC;AAED,IAAA,MAAM,mBAAmB,GAAG,CAAC,CAAC,KAAI;AACjC,QAAA,UAAU,EAAE,eAAe,GAAG,CAAC,CAAC;QAChC,SAAS,CAAC,CAAC,CAAC;AACb,KAAC;IAED,SAAS,CAAC,MAAK;AACd,QAAA,KAAK,CAAC,KAAK,GAAG,KAAK;AACpB,KAAC,EAAE,CAAC,KAAK,CAAC,CAAC;IAEX,QACCA,GAAC,CAAA,KAAK,EACL,EAAA,OAAO,EAAE,MAAM,EACf,OAAO,EAAC,OAAO,EACf,QAAQ,EAAC,QAAQ,EACjB,KAAK,EAAE,KAAK,EACZ,KAAK,EAAC,OAAO,EACb,WAAW,EAAA,IAAA,EAAA,GACP,UAAU,EACd,eAAe,EAAE,mBAAmB,EACpC,OAAO,EACNA,GAAA,CAAC,KAAK,EAAA,EACL,KAAK,EAAE,KAAK,CAAC,KAAK,EAClB,MAAM,EAAE,MAAM,EACd,OAAO,EAAE,OAAO,EAChB,UAAU,EAAE,UAAU,EACtB,QAAQ,EAAE,YAAY,EACtB,UAAU,EAAE,cAAc,EACzB,CAAA,EAAA,QAAA,EAGHA,GAAC,CAAA,KAAK,EACL,EAAA,KAAK,EAAE,KAAK,CAAC,KAAK,EAClB,WAAW,EAAE,WAAW,EACxB,MAAM,EACLA,GAAC,CAAA,IAAI,EACJ,EAAA,IAAI,EAAEA,GAAA,CAAC,eAAe,EAAA,EAAA,CAAG,EACzB,SAAS,EAAC,mBAAmB,EAC7B,IAAI,EAAC,KAAK,EAAA,CACT,EAEH,QAAQ,EAAE,YAAY,EACtB,MAAM,EAAE,UAAU,EAClB,SAAS,EAAE,UAAU,CAAC,oBAAoB,EAAE,SAAS,CAAC,EAAA,GAClD,SAAS,EAAA,CACZ,EACK,CAAA;AAEV;;;;"}