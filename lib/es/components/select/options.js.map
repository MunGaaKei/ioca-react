{"version":3,"file":"options.js","sources":["../../../../packages/components/select/options.tsx"],"sourcesContent":["import { CheckRound, SearchRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport { TOption } from \"../../type\";\r\nimport Icon from \"../icon\";\r\nimport List from \"../list\";\r\nimport Tag from \"../tag\";\r\nimport Empty from \"../utils/empty\";\r\nimport { ISelectOptions } from \"./type\";\r\nexport const Options = (props: ISelectOptions) => {\r\n\tconst {\r\n\t\tvalue: val,\r\n\t\toptions,\r\n\t\tfilter,\r\n\t\tfilterPlaceholder,\r\n\t\tmultiple,\r\n\t\tempty = <Empty />,\r\n\t\tonSelect,\r\n\t\tonFilter,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-select-options\", {\r\n\t\t\t\t\"i-select-options-multiple\": multiple,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{filter && multiple && (\r\n\t\t\t\t<div className='i-select-filter'>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<SearchRound />}\r\n\t\t\t\t\t\tclassName='color-8 ml-8 my-auto'\r\n\t\t\t\t\t\tsize='1.2em'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tclassName='i-input'\r\n\t\t\t\t\t\tplaceholder={filterPlaceholder}\r\n\t\t\t\t\t\tonChange={onFilter}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{options.length === 0 && empty}\r\n\r\n\t\t\t{options.map((option, i) => {\r\n\t\t\t\tconst { label, value, disabled } = option;\r\n\t\t\t\tconst isActive = multiple\r\n\t\t\t\t\t? val?.includes(value)\r\n\t\t\t\t\t: val === value;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\tkey={(value as string) || i}\r\n\t\t\t\t\t\tactive={isActive}\r\n\t\t\t\t\t\ttype='option'\r\n\t\t\t\t\t\tonClick={() => onSelect?.(value, option)}\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{multiple && (\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={<CheckRound />}\r\n\t\t\t\t\t\t\t\tclassName='i-select-option-check'\r\n\t\t\t\t\t\t\t\tsize='1em'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{label}\r\n\t\t\t\t\t</List.Item>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport const activeOptions = (\r\n\toptions: TOption[] = [],\r\n\tvalue: any[] = [],\r\n\tmax = 3\r\n) => {\r\n\tconst total = options.flatMap((opt) =>\r\n\t\tvalue.includes(opt.value) ? [opt] : []\r\n\t);\r\n\r\n\tif (max >= total.length) return total;\r\n\r\n\tconst rest = total.length - max;\r\n\tconst after = total.slice(0, max);\r\n\tafter.push(rest as any);\r\n\r\n\treturn after;\r\n};\r\n\r\nexport const displayValue = (config) => {\r\n\tconst { options, value, maxDisplay, multiple, onSelect } = config;\r\n\r\n\tif (multiple) {\r\n\t\treturn activeOptions(options, value, maxDisplay).map((opt, i) => {\r\n\t\t\tif (typeof opt === \"number\") return <Tag key={i}>+{opt}</Tag>;\r\n\r\n\t\t\tconst { label, value } = opt;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Tag\r\n\t\t\t\t\tkey={value as string}\r\n\t\t\t\t\thoverShowClose\r\n\t\t\t\t\tonClose={(e) => {\r\n\t\t\t\t\t\te?.stopPropagation();\r\n\t\t\t\t\t\tonSelect?.(value, opt);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</Tag>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\treturn options.find((opt: TOption) => opt.value === value)?.label;\r\n};\r\n"],"names":["_jsx","_jsxs"],"mappings":"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"}