{"version":3,"file":"index.js","sources":["../../../../packages/js/useRipple/index.ts"],"sourcesContent":["import \"./ripple.css\";\r\n\r\nconst TIMEOUT = 500;\r\n\r\nconst useRipple = () => {\r\n\tif (!document) return;\r\n\tif (document.documentElement.dataset[\"iocaRipple\"]) return;\r\n\tdocument.documentElement.dataset[\"iocaRipple\"] = \"enable\";\r\n\r\n\tdocument.addEventListener(\"mousedown\", listener);\r\n};\r\n\r\nfunction listener(e: MouseEvent) {\r\n\tconst target = e.target as HTMLElement;\r\n\tconst parent = target.closest(\"[data-ripple]\") as HTMLElement;\r\n\r\n\tif (!target || !parent) return;\r\n\r\n\ttriggerRipple(parent, e);\r\n}\r\n\r\nfunction triggerRipple(target: HTMLElement, e: MouseEvent) {\r\n\tif (!document) return;\r\n\tconst [$box, $ripple] = createRipple();\r\n\tconst rect = target.getBoundingClientRect();\r\n\tconst size = Math.max(rect.width, rect.height) * 2;\r\n\r\n\t$ripple.style.cssText = `\r\n        left: ${e.pageX - rect.left}px;\r\n        top: ${e.pageY - rect.top}px;\r\n        width: ${size}px;\r\n        height: ${size}px;\r\n        transition: all ${TIMEOUT / 1000}s;\r\n    `;\r\n\ttarget.insertAdjacentElement(\"afterbegin\", $box);\r\n\ttarget.offsetHeight;\r\n\t$ripple.classList.add(\"i-ripple-active\");\r\n\r\n\tsetTimeout(() => {\r\n\t\t$box.remove();\r\n\t}, TIMEOUT);\r\n}\r\n\r\nfunction createRipple() {\r\n\tconst $box = document.createElement(\"SPAN\");\r\n\tconst $ripple = document.createElement(\"SPAN\");\r\n\r\n\t$box.className = \"i-ripple-container\";\r\n\t$ripple.className = \"i-ripple\";\r\n\r\n\t$box.append($ripple);\r\n\r\n\treturn [$box, $ripple];\r\n}\r\n\r\nexport default useRipple;\r\n"],"names":[],"mappings":"AAEA,MAAM,OAAO,GAAG,GAAG;AAEb,MAAA,SAAS,GAAG,MAAK;AACtB,IAAA,IAAI,CAAC,QAAQ;QAAE;AACf,IAAA,IAAI,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,YAAY,CAAC;QAAE;IACpD,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,QAAQ;AAEzD,IAAA,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,QAAQ,CAAC;AACjD;AAEA,SAAS,QAAQ,CAAC,CAAa,EAAA;AAC9B,IAAA,MAAM,MAAM,GAAG,CAAC,CAAC,MAAqB;IACtC,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,eAAe,CAAgB;AAE7D,IAAA,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM;QAAE;AAExB,IAAA,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC;AACzB;AAEA,SAAS,aAAa,CAAC,MAAmB,EAAE,CAAa,EAAA;AACxD,IAAA,IAAI,CAAC,QAAQ;QAAE;IACf,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,YAAY,EAAE;AACtC,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,qBAAqB,EAAE;AAC3C,IAAA,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;AAElD,IAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,CAAA;AACT,cAAA,EAAA,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAA;AACpB,aAAA,EAAA,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAA;iBAChB,IAAI,CAAA;kBACH,IAAI,CAAA;AACI,wBAAA,EAAA,OAAO,GAAG,IAAI,CAAA;KACnC;AACJ,IAAA,MAAM,CAAC,qBAAqB,CAAC,YAAY,EAAE,IAAI,CAAC;IAChD,MAAM,CAAC,YAAY;AACnB,IAAA,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC;IAExC,UAAU,CAAC,MAAK;QACf,IAAI,CAAC,MAAM,EAAE;KACb,EAAE,OAAO,CAAC;AACZ;AAEA,SAAS,YAAY,GAAA;IACpB,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC;IAC3C,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC;AAE9C,IAAA,IAAI,CAAC,SAAS,GAAG,oBAAoB;AACrC,IAAA,OAAO,CAAC,SAAS,GAAG,UAAU;AAE9B,IAAA,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;AAEpB,IAAA,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC;AACvB;;;;"}