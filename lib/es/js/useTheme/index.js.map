{"version":3,"file":"index.js","sources":["../../../../packages/js/useTheme/index.ts"],"sourcesContent":["import { useLocalStorageState } from \"ahooks\";\r\nimport { useEffect } from \"react\";\r\nimport { ITheme } from \"./type\";\r\n\r\nconst useTheme = (props?: ITheme) => {\r\n\tconst {\r\n\t\tkey = \"ioca-react-theme\",\r\n\t\tdefaultValue,\r\n\t\tlistenStorageChange,\r\n\t} = props ?? {};\r\n\tconst [theme, setTheme] = useLocalStorageState<string>(key, {\r\n\t\tdefaultValue: defaultValue ?? \"\",\r\n\t\tlistenStorageChange,\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst cls = document.documentElement.classList;\r\n\t\tconst cns = Array.from(cls);\r\n\t\tconst pre = cns.find((n) => n.startsWith(\"theme-\")) ?? \"\";\r\n\r\n\t\tif (pre) {\r\n\t\t\tcls.replace(pre, theme || \"theme-auto\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttheme && cls.add(theme);\r\n\t}, [theme]);\r\n\r\n\treturn {\r\n\t\ttheme,\r\n\t\tsetTheme,\r\n\t};\r\n};\r\n\r\nexport default useTheme;\r\n"],"names":[],"mappings":";;;AAIA,MAAM,QAAQ,GAAG,CAAC,KAAc,KAAI;AACnC,IAAA,MAAM,EACL,GAAG,GAAG,kBAAkB,EACxB,YAAY,EACZ,mBAAmB,GACnB,GAAG,KAAK,IAAI,EAAE;IACf,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,oBAAoB,CAAS,GAAG,EAAE;QAC3D,YAAY,EAAE,YAAY,IAAI,EAAE;QAChC,mBAAmB;AACnB,KAAA,CAAC;IAEF,SAAS,CAAC,MAAK;AACd,QAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS;QAC9C,MAAM,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC;QAC3B,MAAM,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE;QAEzD,IAAI,GAAG,EAAE;YACR,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,IAAI,YAAY,CAAC;YACvC;;AAGD,QAAA,KAAK,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;AACxB,KAAC,EAAE,CAAC,KAAK,CAAC,CAAC;IAEX,OAAO;QACN,KAAK;QACL,QAAQ;KACR;AACF;;;;"}