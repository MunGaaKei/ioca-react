import{jsxs as e,jsx as r}from"react/jsx-runtime";import{useReactive as t}from"ahooks";import i from"classnames";import{useRef as a,useMemo as n,useEffect as l}from"react";import{useMouseMove as s,useMouseUp as o}from"../../js/hooks.js";import g from"./circle.js";import u from"./line.js";const c=c=>{const{value:m=0,lineWidth:d=8,circleSize:h=40,precision:p=0,style:v,draggable:f=!0,type:b="line",barClass:C,vertical:j,label:x,labelInline:z,className:y,renderCursor:D,onChange:M,onDraggingChange:N}=c,S=a(null),W=t({value:m,dragging:!1,size:0,start:0}),k=j?"pageY":"pageX",w=j?"top":"left",B=j?"height":"width",F=n((()=>{let e=+W.value.toFixed(p);return e=Math.min(100,e),e=Math.max(0,e),e}),[W.value,p]),I=e=>{if(!S.current||!f)return;e.touches&&(e=e.touches[0]);const r=S.current.getBoundingClientRect(),t=100*(e[k]-r[w])/r[B];Object.assign(W,{value:j?100-t:t,size:r[B],start:r[w],dragging:!0}),N?.(!0)};return s((e=>{if(!W.dragging||!f)return;e.preventDefault(),e.touches&&(e=e.touches[0]);const{start:r,size:t}=W,i=e[k]-r;if(i<0||i>t)return;const a=100*(e[k]-r)/t;W.value=j?100-a:a})),o((()=>{W.dragging&&f&&(M?.(F),W.dragging=!1,N?.(!1))})),l((()=>{W.value=m>100?100:m<0?0:m}),[m]),e("div",{className:i("i-input-label",y,{"i-input-inline":z}),style:v,children:[x&&r("span",{className:"i-input-label-text",children:x}),"line"===b&&r(u,{ref:S,vertical:j,lineWidth:d,barClass:C,dragging:W.dragging,value:W.value,renderCursor:D,onMouseDown:I,onTouchStart:I}),"circle"===b&&r(g,{value:W.value,circleSize:h,lineWidth:d})]})};export{c as default};
//# sourceMappingURL=progress.js.map
