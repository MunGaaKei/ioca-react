{"version":3,"file":"options.js","sources":["../../../packages/components/select/options.tsx"],"sourcesContent":["import { CheckRound, SearchRound } from \"@ricons/material\";\nimport classNames from \"classnames\";\nimport { TOption } from \"../../type\";\nimport Icon from \"../icon\";\nimport List from \"../list\";\nimport Tag from \"../tag\";\nimport Empty from \"../utils/empty\";\nimport { ISelectOptions } from \"./type\";\nexport const Options = (props: ISelectOptions) => {\n\tconst {\n\t\tvalue: val,\n\t\toptions,\n\t\tfilter,\n\t\tfilterPlaceholder,\n\t\tmultiple,\n\t\tempty = <Empty />,\n\t\tonSelect,\n\t\tonFilter,\n\t} = props;\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"i-select-options\", {\n\t\t\t\t\"i-select-options-multiple\": multiple,\n\t\t\t})}\n\t\t>\n\t\t\t{filter && multiple && (\n\t\t\t\t<div className='i-select-filter'>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={<SearchRound />}\n\t\t\t\t\t\tclassName='color-8 ml-8 my-auto'\n\t\t\t\t\t\tsize='1.2em'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tclassName='i-input'\n\t\t\t\t\t\tplaceholder={filterPlaceholder}\n\t\t\t\t\t\tonChange={onFilter}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{options.length === 0 && empty}\n\n\t\t\t{options.map((option, i) => {\n\t\t\t\tconst { label, value, disabled } = option;\n\t\t\t\tconst isActive = multiple\n\t\t\t\t\t? val?.includes(value)\n\t\t\t\t\t: val === value;\n\n\t\t\t\treturn (\n\t\t\t\t\t<List.Item\n\t\t\t\t\t\tkey={(value as string) || i}\n\t\t\t\t\t\tactive={isActive}\n\t\t\t\t\t\ttype='option'\n\t\t\t\t\t\tonClick={() => onSelect?.(value, option)}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t{multiple && (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={<CheckRound />}\n\t\t\t\t\t\t\t\tclassName='i-select-option-check'\n\t\t\t\t\t\t\t\tsize='1em'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</List.Item>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n\nexport const activeOptions = (\n\toptions: TOption[] = [],\n\tvalue: any[] = [],\n\tmax = 3\n) => {\n\tconst total = options.flatMap((opt) =>\n\t\tvalue.includes(opt.value) ? [opt] : []\n\t);\n\n\tif (max >= total.length) return total;\n\n\tconst rest = total.length - max;\n\tconst after = total.slice(0, max);\n\tafter.push(rest as any);\n\n\treturn after;\n};\n\nexport const displayValue = (config) => {\n\tconst { options, value, maxDisplay, multiple, onSelect } = config;\n\n\tif (multiple) {\n\t\treturn activeOptions(options, value, maxDisplay).map((opt, i) => {\n\t\t\tif (typeof opt === \"number\") return <Tag key={i}>+{opt}</Tag>;\n\n\t\t\tconst { label, value } = opt;\n\n\t\t\treturn (\n\t\t\t\t<Tag\n\t\t\t\t\tkey={value as string}\n\t\t\t\t\thoverShowClose\n\t\t\t\t\tonClose={(e) => {\n\t\t\t\t\t\te?.stopPropagation();\n\t\t\t\t\t\tonSelect?.(value, opt);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</Tag>\n\t\t\t);\n\t\t});\n\t}\n\n\treturn options.find((opt: TOption) => opt.value === value)?.label;\n};\n"],"names":["Options","props","value","val","options","filter","filterPlaceholder","multiple","empty","_jsx","Empty","onSelect","onFilter","_jsxs","className","classNames","children","Icon","icon","SearchRound","size","type","placeholder","onChange","length","map","option","i","label","disabled","isActive","includes","List","Item","active","onClick","CheckRound","activeOptions","max","total","flatMap","opt","rest","after","slice","push","displayValue","config","maxDisplay","Tag","hoverShowClose","onClose","e","stopPropagation","find"],"mappings":"6QAQa,MAAAA,EAAWC,IACvB,MACCC,MAAOC,EAAGC,QACVA,EAAOC,OACPA,EAAMC,kBACNA,EAAiBC,SACjBA,EAAQC,MACRA,EAAQC,EAACC,EAAQ,CAAA,GAAAC,SACjBA,EAAQC,SACRA,GACGX,EAEJ,OACCY,EACC,MAAA,CAAAC,UAAWC,EAAW,mBAAoB,CACzC,4BAA6BR,IAG7BS,SAAA,CAAAX,GAAUE,GACVM,EAAK,MAAA,CAAAC,UAAU,kBACdE,SAAA,CAAAP,EAACQ,EACA,CAAAC,KAAMT,EAACU,EAAW,IAClBL,UAAU,uBACVM,KAAK,UAENX,EAAA,QAAA,CACCY,KAAK,OACLP,UAAU,UACVQ,YAAahB,EACbiB,SAAUX,OAKO,IAAnBR,EAAQoB,QAAgBhB,EAExBJ,EAAQqB,KAAI,CAACC,EAAQC,KACrB,MAAMC,MAAEA,EAAK1B,MAAEA,EAAK2B,SAAEA,GAAaH,EAC7BI,EAAWvB,EACdJ,GAAK4B,SAAS7B,GACdC,IAAQD,EAEX,OACCW,EAACmB,EAAKC,KAAI,CAETC,OAAQJ,EACRT,KAAK,SACLc,QAAS,IAAMxB,IAAWT,EAAOwB,GACjCG,SAAUA,EAETb,SAAA,CAAAT,GACAE,EAACQ,EACA,CAAAC,KAAMT,EAAC2B,EAAU,CAAA,GACjBtB,UAAU,wBACVM,KAAK,QAGNQ,IAbK1B,GAAoByB,EAcf,MAGT,EAIKU,EAAgB,CAC5BjC,EAAqB,GACrBF,EAAe,GACfoC,EAAM,KAEN,MAAMC,EAAQnC,EAAQoC,SAASC,GAC9BvC,EAAM6B,SAASU,EAAIvC,OAAS,CAACuC,GAAO,KAGrC,GAAIH,GAAOC,EAAMf,OAAQ,OAAOe,EAEhC,MAAMG,EAAOH,EAAMf,OAASc,EACtBK,EAAQJ,EAAMK,MAAM,EAAGN,GAG7B,OAFAK,EAAME,KAAKH,GAEJC,CAAK,EAGAG,EAAgBC,IAC5B,MAAM3C,QAAEA,EAAOF,MAAEA,EAAK8C,WAAEA,EAAUzC,SAAEA,EAAQI,SAAEA,GAAaoC,EAE3D,OAAIxC,EACI8B,EAAcjC,EAASF,EAAO8C,GAAYvB,KAAI,CAACgB,EAAKd,KAC1D,GAAmB,iBAARc,EAAkB,OAAO5B,EAACoC,EAAG,CAAAjC,SAAA,CAAA,IAAWyB,IAALd,GAE9C,MAAMC,MAAEA,EAAK1B,MAAEA,GAAUuC,EAEzB,OACChC,EAACwC,EAEA,CAAAC,gBACA,EAAAC,QAAUC,IACTA,GAAGC,kBACH1C,IAAWT,EAAOuC,EAAI,WAGtBb,GAPI1B,EAQA,IAKFE,EAAQkD,MAAMb,GAAiBA,EAAIvC,QAAUA,KAAQ0B,KAAK"}