import{jsxs as e,jsx as t}from"react/jsx-runtime";import r from"classnames";import{useRef as n,useImperativeHandle as o}from"react";import s from"xss";import i,{xssOptions as a,exec as c}from"./controls.js";const l=l=>{const{ref:u,width:d,height:m="10em",placeholder:p,autosize:f,border:h=!0,richPaste:y,controls:b="simple",className:g,style:D,onInput:H,onPaste:T,onKeyDown:v,...x}=l,L=n(null);o(u,(()=>({setValue(e){if(!L.current)return;const t=s(e,a);L.current.innerHTML=t},getSafeValue(){const e=L.current?.innerHTML??"";return s(e,a)}})));return e("div",{className:r("i-editor",g,{"i-editor-borderless":!h}),style:{...D,[f?"minHeight":"height"]:m,width:d},children:["none"!==b&&t("div",{className:"i-editor-controls",children:i(b,{controlBtnProps:{square:!0,flat:!0,size:"small"}})}),t("div",{ref:L,className:"i-editor-content","data-placeholder":p,contentEditable:!0,onPaste:async e=>{if(T?.(e),y)return;e.preventDefault();const t=e.clipboardData.getData("text/plain");c("insertText",!1,t)},onInput:e=>{let t=L.current?.innerHTML??"";["<br>","\n"].includes(t)&&L.current&&(t="",L.current.innerHTML=t),H?.(t,e)},onKeyDown:e=>{switch(v?.(e),e.key){case"Tab":e.preventDefault(),c("insertHTML",!1,"&#09;");break;case"Enter":if(e.preventDefault(),c("insertLineBreak"),!L.current)return;if(L.current.scrollBy({top:20,left:-1e3}),!f)return;L.current.style.height=`${L.current.scrollHeight}px`}},...x})]})};export{l as default};
//# sourceMappingURL=editor.js.map
