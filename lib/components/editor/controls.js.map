{"version":3,"file":"controls.js","sources":["../../../packages/components/editor/controls.tsx"],"sourcesContent":["import {\n\tClearAllRound,\n\tFormatBoldRound,\n\tFormatItalicRound,\n\tFormatUnderlinedRound,\n\tRedoRound,\n\tStrikethroughSRound,\n\tUndoRound,\n} from \"@ricons/material\";\nimport { Fragment } from \"react/jsx-runtime\";\nimport { escapeAttrValue } from \"xss\";\nimport Button from \"../button\";\nimport Icon from \"../icon\";\n\nexport const exec = (a, b?, c?) => document.execCommand(a, b, c);\n\nexport const xssOptions = {\n\tonIgnoreTagAttr: function (tag, name, value) {\n\t\tif ([\"data-\", \"style\"].includes(name.substr(0, 5))) {\n\t\t\treturn name + '=\"' + escapeAttrValue(value) + '\"';\n\t\t}\n\t},\n};\n\nconst fnMap = {\n\tbold: {\n\t\ticon: <FormatBoldRound />,\n\t\tonClick: () => exec(\"bold\"),\n\t\ttip: \"粗体\",\n\t},\n\titalic: {\n\t\ticon: <FormatItalicRound />,\n\t\tonClick: () => exec(\"italic\"),\n\t\ttip: \"斜体\",\n\t},\n\tunderline: {\n\t\ticon: <FormatUnderlinedRound />,\n\t\tonClick: () => exec(\"underline\"),\n\t\ttip: \"下划线\",\n\t},\n\tstrike: {\n\t\ticon: <StrikethroughSRound />,\n\t\tonClick: () => exec(\"strikeThrough\"),\n\t\ttip: \"删除线\",\n\t},\n\tredo: {\n\t\ticon: <RedoRound />,\n\t\tonClick: () => exec(\"redo\"),\n\t\ttip: \"重做\",\n\t},\n\tundo: {\n\t\ticon: <UndoRound />,\n\t\tonClick: () => exec(\"undo\"),\n\t\ttip: \"撤销\",\n\t},\n\t// color: {\n\t// \ticon: <FormatColorTextRound />,\n\t// \tonClick: () => exec(\"foreColor\", false, \"\"),\n\t// },\n\t// backColor: {\n\t// \ticon: <FormatColorFillRound />,\n\t// \tonClick: () => exec(\"backColor\", false, \"\"),\n\t// },\n\tclear: {\n\t\ticon: <ClearAllRound />,\n\t\tonClick: () => exec(\"removeFormat\"),\n\t\ttip: \"清除格式\",\n\t},\n};\n\nconst aliasMap = {\n\tsimple: [\"undo\", \"redo\", \"bold\", \"italic\", \"underline\", \"strike\", \"clear\"],\n\tall: Object.keys(fnMap),\n};\n\nexport default function getControls(fns, options) {\n\tconst { controlBtnProps } = options;\n\tconst keys = typeof fns === \"string\" ? aliasMap[fns] : fns;\n\n\treturn keys.map((k) => {\n\t\tif (fnMap[k]) {\n\t\t\tconst { icon, render, tip, onClick } = fnMap[k];\n\n\t\t\tif (render) {\n\t\t\t\treturn render(options);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<Button key={k} {...controlBtnProps} onClick={onClick}>\n\t\t\t\t\t<Icon icon={icon} />\n\t\t\t\t\t{tip && <span className='i-editor-control-tip'>{tip}</span>}\n\t\t\t\t</Button>\n\t\t\t);\n\t\t}\n\t\treturn <Fragment key={k} />;\n\t});\n}\n"],"names":["exec","a","b","c","document","execCommand","xssOptions","onIgnoreTagAttr","tag","name","value","includes","substr","escapeAttrValue","fnMap","bold","icon","_jsx","FormatBoldRound","onClick","tip","italic","FormatItalicRound","underline","FormatUnderlinedRound","strike","StrikethroughSRound","redo","RedoRound","undo","UndoRound","clear","ClearAllRound","aliasMap","simple","all","Object","keys","getControls","fns","options","controlBtnProps","map","k","render","_jsxs","Button","children","Icon","className","Fragment"],"mappings":"wXAcaA,EAAO,CAACC,EAAGC,EAAIC,IAAOC,SAASC,YAAYJ,EAAGC,EAAGC,GAEjDG,EAAa,CACzBC,gBAAiB,SAAUC,EAAKC,EAAMC,GACrC,GAAI,CAAC,QAAS,SAASC,SAASF,EAAKG,OAAO,EAAG,IAC9C,OAAOH,EAAO,KAAOI,EAAgBH,GAAS,GAE/C,GAGII,EAAQ,CACbC,KAAM,CACLC,KAAMC,EAACC,EAAkB,IACzBC,QAAS,IAAMnB,EAAK,QACpBoB,IAAK,MAENC,OAAQ,CACPL,KAAMC,EAACK,EAAoB,IAC3BH,QAAS,IAAMnB,EAAK,UACpBoB,IAAK,MAENG,UAAW,CACVP,KAAMC,EAACO,EAAwB,IAC/BL,QAAS,IAAMnB,EAAK,aACpBoB,IAAK,OAENK,OAAQ,CACPT,KAAMC,EAACS,EAAsB,IAC7BP,QAAS,IAAMnB,EAAK,iBACpBoB,IAAK,OAENO,KAAM,CACLX,KAAMC,EAACW,EAAY,IACnBT,QAAS,IAAMnB,EAAK,QACpBoB,IAAK,MAENS,KAAM,CACLb,KAAMC,EAACa,EAAY,IACnBX,QAAS,IAAMnB,EAAK,QACpBoB,IAAK,MAUNW,MAAO,CACNf,KAAMC,EAACe,EAAgB,IACvBb,QAAS,IAAMnB,EAAK,gBACpBoB,IAAK,SAIDa,EAAW,CAChBC,OAAQ,CAAC,OAAQ,OAAQ,OAAQ,SAAU,YAAa,SAAU,SAClEC,IAAKC,OAAOC,KAAKvB,IAGJ,SAAUwB,EAAYC,EAAKC,GACxC,MAAMC,gBAAEA,GAAoBD,EAG5B,OAF4B,iBAARD,EAAmBN,EAASM,GAAOA,GAE3CG,KAAKC,IAChB,GAAI7B,EAAM6B,GAAI,CACb,MAAM3B,KAAEA,EAAI4B,OAAEA,EAAMxB,IAAEA,EAAGD,QAAEA,GAAYL,EAAM6B,GAE7C,OAAIC,EACIA,EAAOJ,GAIdK,EAACC,EAAM,IAAaL,EAAiBtB,QAASA,EAAO4B,SAAA,CACpD9B,EAAC+B,GAAKhC,KAAMA,IACXI,GAAOH,EAAA,OAAA,CAAMgC,UAAU,uBAAwBF,SAAA3B,MAFpCuB,GAMf,OAAO1B,EAACiC,EAAc,CAAA,EAAAP,EAAK,GAE7B"}