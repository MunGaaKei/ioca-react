{"version":3,"file":"input.js","sources":["../../../packages/components/input/input.tsx"],"sourcesContent":["import { VisibilityOffRound, VisibilityRound } from \"@ricons/material\";\nimport { useReactive } from \"ahooks\";\nimport classNames from \"classnames\";\nimport { ChangeEvent, useEffect, useMemo } from \"react\";\nimport \"../../css/input.css\";\nimport Helpericon from \"../utils/helpericon\";\nimport InputContainer from \"./container\";\nimport type { CompositionInput, IInput } from \"./type\";\n\nconst Input = ((props: IInput) => {\n\tconst {\n\t\tref,\n\t\ttype = \"text\",\n\t\tlabel,\n\t\tname,\n\t\tvalue = props.initValue ?? \"\",\n\t\tinitValue = \"\",\n\t\tprepend,\n\t\tappend,\n\t\tlabelInline,\n\t\tclassName,\n\t\tstatus = \"normal\",\n\t\tmessage,\n\t\ttip,\n\t\tclear,\n\t\thideVisible,\n\t\tborder,\n\t\trequired,\n\t\tonChange,\n\t\tonEnter,\n\t\tstyle,\n\t\t...restProps\n\t} = props;\n\n\tconst state = useReactive({\n\t\tvalue,\n\t\ttype,\n\t\tvisible: false,\n\t});\n\n\tconst handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n\t\tconst v = e.target.value;\n\n\t\tstate.value = v;\n\t\tonChange?.(v, e);\n\t};\n\n\tconst handleKeydown = (e) => {\n\t\te.code === \"Enter\" && onEnter?.(e);\n\t};\n\n\tconst handleHelperClick = () => {\n\t\tif (type === \"password\" && !hideVisible) {\n\t\t\tObject.assign(state, {\n\t\t\t\tvisible: !state.visible,\n\t\t\t\ttype: !state.visible ? \"text\" : \"password\",\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst v = \"\";\n\t\tonChange?.(v);\n\t};\n\n\tconst HelperIcon = useMemo(() => {\n\t\tif (type === \"password\") {\n\t\t\treturn state.visible ? <VisibilityRound /> : <VisibilityOffRound />;\n\t\t}\n\n\t\treturn undefined;\n\t}, [state.visible]);\n\n\tuseEffect(() => {\n\t\tstate.value = value;\n\t}, [value]);\n\n\tconst inputProps = {\n\t\tref,\n\t\ttype: state.type,\n\t\tname,\n\t\tvalue: state.value,\n\t\tclassName: classNames(\"i-input\", `i-input-${type}`),\n\t\tonChange: handleChange,\n\t\tonKeyDown: handleKeydown,\n\t\t...restProps,\n\t};\n\n\tconst clearable = clear && state.value;\n\tconst showHelper = type === \"password\" && !!state.value;\n\n\treturn (\n\t\t<InputContainer\n\t\t\tlabel={label}\n\t\t\tlabelInline={labelInline}\n\t\t\tclassName={className}\n\t\t\tstyle={style}\n\t\t\ttip={message ?? tip}\n\t\t\tstatus={status}\n\t\t\trequired={required}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"i-input-item\", {\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\n\t\t\t\t\t\"i-input-borderless\": !border,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{prepend && <div className='i-input-prepend'>{prepend}</div>}\n\n\t\t\t\t<input {...inputProps} />\n\n\t\t\t\t<Helpericon\n\t\t\t\t\tactive={!!clearable || showHelper}\n\t\t\t\t\ticon={HelperIcon}\n\t\t\t\t\tonClick={handleHelperClick}\n\t\t\t\t/>\n\n\t\t\t\t{append && <div className='i-input-append'>{append}</div>}\n\t\t\t</div>\n\t\t</InputContainer>\n\t);\n}) as CompositionInput;\n\nexport default Input;\n"],"names":["Input","props","ref","type","label","name","value","initValue","prepend","append","labelInline","className","status","message","tip","clear","hideVisible","border","required","onChange","onEnter","style","restProps","state","useReactive","visible","HelperIcon","useMemo","_jsx","VisibilityRound","VisibilityOffRound","useEffect","inputProps","classNames","e","v","target","onKeyDown","code","clearable","showHelper","InputContainer","_jsxs","children","Helpericon","active","icon","onClick","Object","assign"],"mappings":"0TASA,MAAMA,EAAUC,IACf,MAAMC,IACLA,EAAGC,KACHA,EAAO,OAAMC,MACbA,EAAKC,KACLA,EAAIC,MACJA,EAAQL,EAAMM,WAAa,GAAEA,UAC7BA,EAAY,GAAEC,QACdA,EAAOC,OACPA,EAAMC,YACNA,EAAWC,UACXA,EAASC,OACTA,EAAS,SAAQC,QACjBA,EAAOC,IACPA,EAAGC,MACHA,EAAKC,YACLA,EAAWC,OACXA,EAAMC,SACNA,EAAQC,SACRA,EAAQC,QACRA,EAAOC,MACPA,KACGC,GACArB,EAEEsB,EAAQC,EAAY,CACzBlB,QACAH,OACAsB,SAAS,IA2BJC,EAAaC,GAAQ,KAC1B,GAAa,aAATxB,EACH,OAAOoB,EAAME,QAAUG,EAACC,EAAe,CAAA,GAAMD,EAACE,KAG/B,GACd,CAACP,EAAME,UAEVM,GAAU,KACTR,EAAMjB,MAAQA,CAAK,GACjB,CAACA,IAEJ,MAAM0B,EAAa,CAClB9B,MACAC,KAAMoB,EAAMpB,KACZE,OACAC,MAAOiB,EAAMjB,MACbK,UAAWsB,EAAW,UAAW,WAAW9B,KAC5CgB,SA1CqBe,IACrB,MAAMC,EAAID,EAAEE,OAAO9B,MAEnBiB,EAAMjB,MAAQ6B,EACdhB,IAAWgB,EAAGD,EAAE,EAuChBG,UApCsBH,IACX,UAAXA,EAAEI,MAAoBlB,IAAUc,EAAE,KAoC/BZ,GAGEiB,EAAYxB,GAASQ,EAAMjB,MAC3BkC,EAAsB,aAATrC,KAAyBoB,EAAMjB,MAElD,OACCsB,EAACa,GACArC,MAAOA,EACPM,YAAaA,EACbC,UAAWA,EACXU,MAAOA,EACPP,IAAKD,GAAWC,EAChBF,OAAQA,EACRM,SAAUA,WAEVwB,EACC,MAAA,CAAA/B,UAAWsB,EAAW,eAAgB,CACrC,CAAC,WAAWrB,KAAsB,WAAXA,EACvB,sBAAuBK,IACtB0B,SAAA,CAEDnC,GAAWoB,EAAA,MAAA,CAAKjB,UAAU,2BAAmBH,IAE9CoB,EAAW,QAAA,IAAAI,IAEXJ,EAACgB,EACA,CAAAC,SAAUN,GAAaC,EACvBM,KAAMpB,EACNqB,QA9DsB,KACzB,GAAa,aAAT5C,IAAwBa,EAK3B,YAJAgC,OAAOC,OAAO1B,EAAO,CACpBE,SAAUF,EAAME,QAChBtB,KAAOoB,EAAME,QAAmB,WAAT,SAMzBN,IADU,GACG,IAuDVV,GAAUmB,EAAK,MAAA,CAAAjB,UAAU,iBAAgBgC,SAAElC,QAI/C"}