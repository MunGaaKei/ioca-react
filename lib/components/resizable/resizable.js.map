{"version":3,"file":"resizable.js","sources":["../../../packages/components/resizable/resizable.tsx"],"sourcesContent":["import { useReactive } from \"ahooks\";\nimport classNames from \"classnames\";\nimport { useRef } from \"react\";\nimport { useMouseMove, useMouseUp } from \"../../js/hooks\";\nimport \"./index.css\";\nimport { IResizable } from \"./type\";\n\nconst Resizable = (props: IResizable) => {\n\tconst {\n\t\tother,\n\t\tchildren,\n\t\tvertical,\n\t\theight,\n\t\tsize = \"auto\",\n\t\tminSize = 0,\n\t\tmaxSize = \"100%\",\n\t\tstyle,\n\t\tline,\n\t\tclassName,\n\t\tasPercent,\n\t\tonResize,\n\t\tonResizeComplete,\n\t} = props;\n\n\tconst state = useReactive({\n\t\tsize,\n\t\tresizing: false,\n\t\tstart: 0,\n\t\ttotal: 0,\n\t});\n\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tconst handleMouseDown = () => {\n\t\tconst rect = ref.current?.getBoundingClientRect();\n\t\tif (!rect) return;\n\n\t\tstate.resizing = true;\n\n\t\tif (vertical) {\n\t\t\tstate.total = rect.height;\n\t\t\tstate.start = rect.top;\n\t\t\treturn;\n\t\t}\n\n\t\tstate.total = rect.width;\n\t\tstate.start = rect.left;\n\t};\n\n\tconst handleMouseMove = (e) => {\n\t\tif (!state.resizing) return;\n\n\t\te.preventDefault();\n\n\t\tif (e.touches) {\n\t\t\te = e.touches[0];\n\t\t}\n\n\t\tconst d = e[vertical ? \"pageY\" : \"pageX\"];\n\t\tconst offset = d - state.start;\n\n\t\tstate.size = asPercent ? `${(offset / state.total) * 100}%` : offset;\n\t\tonResize?.(state.size);\n\t};\n\n\tconst handleMouseUp = () => {\n\t\tif (!state.resizing) return;\n\n\t\tstate.resizing = false;\n\t\tonResizeComplete?.(state.size);\n\t};\n\n\tuseMouseUp(handleMouseUp);\n\tuseMouseMove(handleMouseMove);\n\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\tclassName={classNames(\"i-resizable\", className, {\n\t\t\t\t[`i-resizable-vertical`]: vertical,\n\t\t\t})}\n\t\t\tstyle={{ ...style, height }}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName='i-resizable-a'\n\t\t\t\tstyle={{\n\t\t\t\t\t[vertical ? \"height\" : \"width\"]: state.size,\n\t\t\t\t\t[vertical ? \"minHeight\" : \"minWidth\"]: minSize,\n\t\t\t\t\t[vertical ? \"maxHeight\" : \"maxWidth\"]: maxSize,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{other}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"i-resizable-line\", {\n\t\t\t\t\t[`i-resizable-resizing`]: state.resizing,\n\t\t\t\t})}\n\t\t\t\tonMouseDown={handleMouseDown}\n\t\t\t\tonTouchStart={handleMouseDown}\n\t\t\t\tonContextMenu={(e) => e.preventDefault()}\n\t\t\t>\n\t\t\t\t<div className='i-resizable-line-node'>{line}</div>\n\t\t\t</div>\n\n\t\t\t<div className='i-resizable-b'>{children}</div>\n\t\t</div>\n\t);\n};\n\nexport default Resizable;\n"],"names":["Resizable","props","other","children","vertical","height","size","minSize","maxSize","style","line","className","asPercent","onResize","onResizeComplete","state","useReactive","resizing","start","total","ref","useRef","handleMouseDown","rect","current","getBoundingClientRect","top","width","left","useMouseUp","useMouseMove","e","preventDefault","touches","offset","_jsxs","classNames","_jsx","onMouseDown","onTouchStart","onContextMenu"],"mappings":"iNAOA,MAAMA,EAAaC,IAClB,MAAMC,MACLA,EAAKC,SACLA,EAAQC,SACRA,EAAQC,OACRA,EAAMC,KACNA,EAAO,OAAMC,QACbA,EAAU,EAACC,QACXA,EAAU,OAAMC,MAChBA,EAAKC,KACLA,EAAIC,UACJA,EAASC,UACTA,EAASC,SACTA,EAAQC,iBACRA,GACGb,EAEEc,EAAQC,EAAY,CACzBV,OACAW,UAAU,EACVC,MAAO,EACPC,MAAO,IAGFC,EAAMC,EAAuB,MAE7BC,EAAkB,KACvB,MAAMC,EAAOH,EAAII,SAASC,wBAC1B,GAAKF,EAAL,CAIA,GAFAR,EAAME,UAAW,EAEbb,EAGH,OAFAW,EAAMI,MAAQI,EAAKlB,YACnBU,EAAMG,MAAQK,EAAKG,KAIpBX,EAAMI,MAAQI,EAAKI,MACnBZ,EAAMG,MAAQK,EAAKK,IAXR,CAWY,EA6BxB,OAHAC,GAPsB,KAChBd,EAAME,WAEXF,EAAME,UAAW,EACjBH,IAAmBC,EAAMT,MAAK,IAI/BwB,GAxByBC,IACxB,IAAKhB,EAAME,SAAU,OAErBc,EAAEC,iBAEED,EAAEE,UACLF,EAAIA,EAAEE,QAAQ,IAGf,MACMC,EADIH,EAAE3B,EAAW,QAAU,SACdW,EAAMG,MAEzBH,EAAMT,KAAOM,EAAgBsB,EAASnB,EAAMI,MAAS,IAA5B,IAAqCe,EAC9DrB,IAAWE,EAAMT,KAAK,IActB6B,EAAA,MAAA,CACCf,IAAKA,EACLT,UAAWyB,EAAW,cAAezB,EAAW,CAC/C,uBAA0BP,IAE3BK,MAAO,IAAKA,EAAOJ,UAAQF,SAAA,CAE3BkC,SACC1B,UAAU,gBACVF,MAAO,CACN,CAACL,EAAW,SAAW,SAAUW,EAAMT,KACvC,CAACF,EAAW,YAAc,YAAaG,EACvC,CAACH,EAAW,YAAc,YAAaI,GAGvCL,SAAAD,IAGFmC,EAAA,MAAA,CACC1B,UAAWyB,EAAW,mBAAoB,CACzC,uBAA0BrB,EAAME,WAEjCqB,YAAahB,EACbiB,aAAcjB,EACdkB,cAAgBT,GAAMA,EAAEC,iBAAgB7B,SAExCkC,SAAK1B,UAAU,wBAAyBR,SAAAO,MAGzC2B,EAAK,MAAA,CAAA1B,UAAU,gBAAeR,SAAEA,MAC3B"}