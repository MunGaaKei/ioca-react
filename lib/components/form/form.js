import{jsx as e}from"react/jsx-runtime";import r from"classnames";import i from"pubsub-js";import{useMemo as o,useEffect as a}from"react";import t from"./context.js";import l from"./field.js";import n from"./useForm.js";const m=l=>{const{form:n={},rules:m,initialValues:s,style:u,className:c,width:d,columns:f=1,gap:p="1em",labelInline:b,labelWidth:h,labelRight:g,children:j,onKeyDown:y,onEnter:w,onChange:x,...v}=l,C=o((()=>{if(f)return"number"==typeof f?"minmax(0, 1fr) ".repeat(f):f}),[f]);return a((()=>{Object.assign(n,{data:{...s},rules:m})}),[n]),a((()=>(i.subscribe(`${n.id}:change`,((e,r)=>{x?.(r.name,r.value)})),()=>{i.unsubscribe(`${n.id}:change`)})),[]),e(t,{value:n,children:e("form",{style:{...u,width:d,gap:p,gridTemplateColumns:C,"--label-width":h,"--label-align":g?"right":void 0},className:r("i-form",c,{"i-form-inline":b}),onKeyDown:e=>{y?.(e),13===e.keyCode&&w?.(n.data,n)},...v,children:j})})};m.useForm=n,m.Field=l;export{m as default};
//# sourceMappingURL=form.js.map
