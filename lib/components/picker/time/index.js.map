{"version":3,"file":"index.js","sources":["../../../../packages/components/picker/time/index.tsx"],"sourcesContent":["import { AccessTimeRound } from \"@ricons/material\";\nimport { useReactive } from \"ahooks\";\nimport { useEffect, useState } from \"react\";\nimport Icon from \"../../icon\";\nimport Input from \"../../input\";\nimport Popup from \"../../popup\";\nimport { ITimePicker } from \"../type\";\nimport Panel from \"./panel\";\n\nconst FORMAT = \"hh:mm:ss\";\n\nexport default function TimePicker(props: ITimePicker) {\n\tconst {\n\t\tname,\n\t\tvalue,\n\t\tformat = FORMAT,\n\t\tperiods,\n\t\tplaceholder = props.format ?? FORMAT,\n\t\trenderItem,\n\t\tonChange,\n\t\tonBlur,\n\t\tpopupProps,\n\t\t...restProps\n\t} = props;\n\tconst state = useReactive({\n\t\tvalue,\n\t\tsafeValue: undefined,\n\t});\n\tconst [active, setActive] = useState<boolean>(false);\n\n\tconst handleChange = (v) => {\n\t\tstate.value = v;\n\t};\n\n\tconst handleFallback = (v) => {\n\t\tstate.safeValue = v;\n\t};\n\n\tconst handleValidTime = () => {\n\t\tif (!state.value) return;\n\n\t\tstate.value = state.safeValue;\n\t\thandleChange(state.safeValue);\n\t};\n\n\tconst handleBlur = (e) => {\n\t\tonBlur?.(e);\n\t\thandleValidTime();\n\t};\n\n\tconst handleVisibleChange = (v) => {\n\t\tpopupProps?.onVisibleChange?.(v);\n\t\tsetActive(v);\n\t};\n\n\tuseEffect(() => {\n\t\tstate.value = value;\n\t}, [value]);\n\n\treturn (\n\t\t<Popup\n\t\t\tvisible={active}\n\t\t\ttrigger='click'\n\t\t\tposition='bottom'\n\t\t\tarrow={false}\n\t\t\talign='start'\n\t\t\twatchResize\n\t\t\t{...popupProps}\n\t\t\tonVisibleChange={handleVisibleChange}\n\t\t\tcontent={\n\t\t\t\t<Panel\n\t\t\t\t\tvalue={state.value}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tperiods={periods}\n\t\t\t\t\trenderItem={renderItem}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tonFallback={handleFallback}\n\t\t\t\t/>\n\t\t\t}\n\t\t>\n\t\t\t<Input\n\t\t\t\tvalue={state.value}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tappend={\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={<AccessTimeRound />}\n\t\t\t\t\t\tclassName='i-timepicker-icon'\n\t\t\t\t\t\tsize='1em'\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonBlur={handleBlur}\n\t\t\t\t{...restProps}\n\t\t\t/>\n\t\t</Popup>\n\t);\n}\n"],"names":["FORMAT","TimePicker","props","name","value","format","periods","placeholder","renderItem","onChange","onBlur","popupProps","restProps","state","useReactive","safeValue","undefined","active","setActive","useState","handleChange","v","useEffect","_jsx","Popup","visible","trigger","position","arrow","align","watchResize","onVisibleChange","content","Panel","onFallback","children","Input","append","Icon","icon","AccessTimeRound","className","size","e"],"mappings":"iVASA,MAAMA,EAAS,WAES,SAAAC,EAAWC,GAClC,MAAMC,KACLA,EAAIC,MACJA,EAAKC,OACLA,EAASL,EAAMM,QACfA,EAAOC,YACPA,EAAcL,EAAMG,QAAUL,EAAMQ,WACpCA,EAAUC,SACVA,EAAQC,OACRA,EAAMC,WACNA,KACGC,GACAV,EACEW,EAAQC,EAAY,CACzBV,QACAW,eAAWC,KAELC,EAAQC,GAAaC,GAAkB,GAExCC,EAAgBC,IACrBR,EAAMT,MAAQiB,CAAC,EA4BhB,OAJAC,GAAU,KACTT,EAAMT,MAAQA,CAAK,GACjB,CAACA,IAGHmB,EAACC,EACA,CAAAC,QAASR,EACTS,QAAQ,QACRC,SAAS,SACTC,OAAO,EACPC,MAAM,QACNC,aAAW,KACPnB,EACJoB,gBAlB2BV,IAC5BV,GAAYoB,kBAAkBV,GAC9BH,EAAUG,EAAE,EAiBXW,QACCT,EAACU,EACA,CAAA7B,MAAOS,EAAMT,MACbC,OAAQA,EACRC,QAASA,EACTE,WAAYA,EACZC,SAAUW,EACVc,WA1CoBb,IACvBR,EAAME,UAAYM,CAAC,IA0Cfc,SAGHZ,EAACa,EACA,CAAAhC,MAAOS,EAAMT,MACbG,YAAaA,EACb8B,OACCd,EAACe,EAAI,CACJC,KAAMhB,EAACiB,EAAe,CAAA,GACtBC,UAAU,oBACVC,KAAK,QAGPjC,SAAUW,EACVV,OA9CiBiC,IACnBjC,IAASiC,GAPJ9B,EAAMT,QAEXS,EAAMT,MAAQS,EAAME,UACpBK,EAAaP,EAAME,WAKF,KA6CXH,KAIR"}