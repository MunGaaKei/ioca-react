import{jsxs as e,Fragment as i,jsx as t}from"react/jsx-runtime";import{useReactive as r}from"ahooks";import{useMemo as n,useEffect as o}from"react";import s from"./item.js";const m={h:"hour",hh:"hour",m:"minute",mm:"minute",s:"second",ss:"second"};function c(c){const{value:l,stepH:d=1,stepM:h=1,stepS:a=1,format:u,periods:p,renderItem:v,onChange:g,onFallback:f}=c,k=r({period:void 0,hour:void 0,minute:void 0,second:void 0}),[C,N,I]=n((()=>{const e=u.includes("h"),i=u.includes("m"),t=u.includes("s");return[e?Array.from({length:(p?12:24)/d},((e,i)=>i*d)):[],i?Array.from({length:60/h},((e,i)=>i*h)):[],t?Array.from({length:60/a},((e,i)=>i*a)):[]]}),[d,h,a,u,p]),$=(e,i)=>{k[i]=e,(()=>{let e=u.replace(/(hh|h){1}|(mm|m){1}|(ss|s){1}/gi,(e=>{const i=e.toLowerCase(),t=k[m[i]]??0;return i.length>1&&t<10?`0${t??0}`:t??0}));p&&C.length>0&&(e=`${k.period??p[0]} ${e}`),g(e)})()};return o((()=>{let e=l??"";if(p&&C.length>0&&l){const[i,t]=l.split(" ");e=t??"",k.period=p.includes(i)?i:void 0}const i=e.match(/\d+/g)??[];if(!i.length)return void f("");let t=0;const r=u.replace(/(hh|h)+|(mm|m)+|(ss|s)+/gi,(e=>{const r=i[t++]??0;let n=e;return"hour"===m[e]&&(n=Math.min(p?11:23,r)),n=Math.min(59,r),k[m[e]]=n,e.length>1&&n<10?`0${n}`:n}));f(r)}),[l]),e("div",{className:"i-timepicker",children:[C.length>0&&e(i,{children:[p&&t("div",{className:"i-timepicker-list",children:t(s,{items:p,active:k.period,onClick:e=>$(e,"period")})}),t("div",{className:"i-timepicker-list",children:t(s,{items:C,active:k.hour,unit:"hour",renderItem:v,onClick:e=>$(e,"hour")})})]}),N.length>0&&t("div",{className:"i-timepicker-list",children:t(s,{items:N,active:k.minute,unit:"minute",renderItem:v,onClick:e=>$(e,"minute")})}),I.length>0&&t("div",{className:"i-timepicker-list",children:t(s,{items:I,active:k.second,unit:"second",renderItem:v,onClick:e=>$(e,"second")})})]})}export{c as default};
//# sourceMappingURL=panel.js.map
