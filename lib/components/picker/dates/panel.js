import{jsxs as e,jsx as a}from"react/jsx-runtime";import{KeyboardArrowLeftRound as t,KeyboardArrowRightRound as r}from"@ricons/material";import{useReactive as i}from"ahooks";import n from"classnames";import o from"dayjs";import{throttle as c}from"radash";import{useRef as l,useEffect as s}from"react";import d from"../../icon/icon.js";import m from"../../utils/helpericon/helpericon.js";import h from"./dates.js";const p=[1,2,3,4,5,6,7,8,9,10,11,12],k=t=>{const{value:r,unitMonth:i="月",unitYear:n="年",renderYear:o,renderMonth:c,onClick:l}=t;return e("a",{className:"i-datepicker-action","data-ripple":!0,onClick:l,children:[a("span",{children:o?.(r.year())}),n,a("span",{children:c?.(r.month()+1)}),i]})},y=y=>{const{value:u,unitYear:v,unitMonth:f,renderDate:Y,renderMonth:N=e=>e,renderYear:b=e=>e,disabledDate:C,onDateClick:D}=y,M=i({today:u,month:u||o(),selectedYear:o(),years:[],selectable:!1}),j=l(null),g=e=>{M.month=M.month[e?"add":"subtract"](1,"month")},x=c({interval:100},(e=>{const a=e.deltaY<0;M.years=M.years.map((e=>e+(a?-1:1)))}));return s((()=>{if(!M.selectable)return;M.selectedYear=M.month;const e=M.selectedYear.year(),a=Array.from({length:7}).map(((a,t)=>e-3+t));M.years=[...a]}),[M.selectable]),s((()=>{M.today=u,M.month=u||o()}),[u]),e("div",{className:"i-datepicker",children:[e("div",{className:"i-datepicker-units",children:[a(k,{value:M.month,unitYear:v,unitMonth:f,renderMonth:N,renderYear:b,onClick:()=>M.selectable=!0}),a("a",{className:"ml-auto i-datepicker-action","data-ripple":!0,onClick:()=>g(!1),children:a(d,{icon:a(t,{})})}),a("a",{className:"i-datepicker-action","data-ripple":!0,onClick:()=>g(!0),children:a(d,{icon:a(r,{})})})]}),e("div",{className:n("i-datepicker-ym",{"i-datepicker-active":M.selectable}),children:[a(m,{active:!0,className:"i-datepicker-close",onClick:e=>{e.stopPropagation(),M.selectable=!1}}),a("div",{ref:j,className:"i-datepicker-years",onWheel:x,children:M.years.map((e=>a("a",{className:n("i-datepicker-year",{"i-datepicker-active":e===M.selectedYear.year()}),onClick:()=>M.selectedYear=M.selectedYear.year(e),children:b(e)},e)))}),a("div",{className:"i-datepicker-months",children:p.map((e=>a("a",{className:n("i-datepicker-month",{"i-datepicker-active":e===M.month.month()+1}),onClick:()=>{return a=e,M.month=M.month.year(M.selectedYear.year()).month(a-1),void(M.selectable=!1);var a},children:N(e)},e)))})]}),a(h,{value:M.today,month:M.month,disabledDate:C,onDateClick:e=>{e.isSame(M.today,"day")||(e.isSame(M.month,"month")||(M.month=e),M.today=e,D?.(e))},renderDate:Y})]})};export{y as default};
//# sourceMappingURL=panel.js.map
