{"version":3,"file":"index.js","sources":["../../../../packages/components/picker/colors/index.tsx"],"sourcesContent":["import ColorsPanel from \"@rc-component/color-picker\";\nimport { useReactive } from \"ahooks\";\nimport { useEffect } from \"react\";\nimport Popup from \"../../popup\";\nimport { IColorPicker } from \"../type\";\nimport Footer, { ColorMethods } from \"./footer\";\nimport Handle from \"./handle\";\nimport \"./index.css\";\n\nexport default function ColorPicker(props: IColorPicker) {\n\tconst {\n\t\tvalue,\n\t\ttype = \"HEX\",\n\t\tdisabledAlpha,\n\t\tchildren,\n\t\tusePanel,\n\t\thandle = \"both\",\n\t\tplaceholder = \"Colors\",\n\t\tpopupProps,\n\t\tonChange,\n\t} = props;\n\n\tconst state = useReactive({\n\t\ttype,\n\t\tvalue,\n\t\tsyncValue: value,\n\t\tvisible: popupProps?.visible,\n\t});\n\n\tconst handleChange = (target) => {\n\t\tstate.syncValue = target;\n\t};\n\n\tconst handleComplete = (target) => {\n\t\tconst method = ColorMethods[state.type];\n\n\t\tif (target.a !== 1) {\n\t\t\ttarget.a = parseFloat(target.a.toFixed(3));\n\t\t}\n\n\t\tstate.value = target[method]?.();\n\t};\n\n\tconst handleVisibleChange = (v: boolean) => {\n\t\tstate.visible = v;\n\t\tpopupProps?.onVisibleChange?.(v);\n\t};\n\n\tconst handleTypeChange = (t) => {\n\t\tconst method = ColorMethods[t];\n\n\t\tstate.type = t;\n\t\tstate.value = state.syncValue[method]?.();\n\t};\n\n\tconst handleValueChange = (v) => {\n\t\tstate.value = v;\n\t\tstate.syncValue = v;\n\t};\n\n\tconst handleOk = () => {\n\t\tonChange?.(state.value);\n\t\tstate.visible = false;\n\t};\n\n\tuseEffect(() => {\n\t\tstate.syncValue = value;\n\t\tstate.value = value;\n\t}, [value]);\n\n\tif (usePanel) {\n\t\treturn <ColorsPanel {...props} />;\n\t}\n\n\treturn (\n\t\t<Popup\n\t\t\ttrigger='click'\n\t\t\ttouchable\n\t\t\tposition='bottom'\n\t\t\t{...popupProps}\n\t\t\tvisible={state.visible}\n\t\t\tcontent={\n\t\t\t\t<ColorsPanel\n\t\t\t\t\tvalue={state.syncValue}\n\t\t\t\t\tdisabledAlpha={disabledAlpha}\n\t\t\t\t\tpanelRender={(panel) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{panel}\n\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\tvalue={state.value}\n\t\t\t\t\t\t\t\t\ttype={state.type}\n\t\t\t\t\t\t\t\t\tonTypeChange={handleTypeChange}\n\t\t\t\t\t\t\t\t\tonChange={handleValueChange}\n\t\t\t\t\t\t\t\t\tonOk={handleOk}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tonChangeComplete={handleComplete}\n\t\t\t\t/>\n\t\t\t}\n\t\t\tonVisibleChange={handleVisibleChange}\n\t\t>\n\t\t\t{children ?? (\n\t\t\t\t<Handle\n\t\t\t\t\tcolor={value}\n\t\t\t\t\thandle={handle}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Popup>\n\t);\n}\n"],"names":["ColorPicker","props","value","type","disabledAlpha","children","usePanel","handle","placeholder","popupProps","onChange","state","useReactive","syncValue","visible","handleTypeChange","t","method","ColorMethods","handleValueChange","v","handleOk","useEffect","_jsx","ColorsPanel","Popup","trigger","touchable","position","content","panelRender","panel","_jsxs","_Fragment","Footer","onTypeChange","onOk","target","onChangeComplete","a","parseFloat","toFixed","onVisibleChange","Handle","color"],"mappings":"8RASwB,SAAAA,EAAYC,GACnC,MAAMC,MACLA,EAAKC,KACLA,EAAO,MAAKC,cACZA,EAAaC,SACbA,EAAQC,SACRA,EAAQC,OACRA,EAAS,OAAMC,YACfA,EAAc,SAAQC,WACtBA,EAAUC,SACVA,GACGT,EAEEU,EAAQC,EAAY,CACzBT,OACAD,QACAW,UAAWX,EACXY,QAASL,GAAYK,UAsBhBC,EAAoBC,IACzB,MAAMC,EAASC,EAAaF,GAE5BL,EAAMR,KAAOa,EACbL,EAAMT,MAAQS,EAAME,UAAUI,MAAW,EAGpCE,EAAqBC,IAC1BT,EAAMT,MAAQkB,EACdT,EAAME,UAAYO,CAAC,EAGdC,EAAW,KAChBX,IAAWC,EAAMT,OACjBS,EAAMG,SAAU,CAAK,EAQtB,OALAQ,GAAU,KACTX,EAAME,UAAYX,EAClBS,EAAMT,MAAQA,CAAK,GACjB,CAACA,IAEAI,EACIiB,EAACC,EAAgB,IAAAvB,IAIxBsB,EAACE,GACAC,QAAQ,QACRC,aACAC,SAAS,YACLnB,EACJK,QAASH,EAAMG,QACfe,QACCN,EAACC,GACAtB,MAAOS,EAAME,UACbT,cAAeA,EACf0B,YAAcC,GAEZC,EAAAC,EAAA,CAAA5B,SAAA,CACE0B,EACDR,EAACW,EAAM,CACNhC,MAAOS,EAAMT,MACbC,KAAMQ,EAAMR,KACZgC,aAAcpB,EACdL,SAAUS,EACViB,KAAMf,OAKVX,SAtEkB2B,IACrB1B,EAAME,UAAYwB,CAAM,EAsErBC,iBAnEoBD,IACvB,MAAMpB,EAASC,EAAaP,EAAMR,MAEjB,IAAbkC,EAAOE,IACVF,EAAOE,EAAIC,WAAWH,EAAOE,EAAEE,QAAQ,KAGxC9B,EAAMT,MAAQmC,EAAOpB,MAAW,IA+D/ByB,gBA5D2BtB,IAC5BT,EAAMG,QAAUM,EAChBX,GAAYiC,kBAAkBtB,EAAE,EA0DKf,SAEnCA,GACAkB,EAACoB,GACAC,MAAO1C,EACPK,OAAQA,EACRC,YAAaA,KAKlB"}