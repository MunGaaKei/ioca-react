{"version":3,"file":"toggle.js","sources":["../../../packages/components/button/toggle.tsx"],"sourcesContent":["import { useReactive } from \"ahooks\";\nimport classNames from \"classnames\";\nimport { MouseEvent, useEffect } from \"react\";\nimport Button from \"./button\";\nimport { IButtonToggle } from \"./type\";\n\nexport default function Toggle(props: IButtonToggle) {\n\tconst {\n\t\tref,\n\t\tactive,\n\t\tactiveClass,\n\t\tafter,\n\t\tdisabled,\n\t\tchildren,\n\t\tclassName,\n\t\ttoggable,\n\t\tonClick,\n\t\tonToggle,\n\t\t...restProps\n\t} = props;\n\n\tconst state = useReactive({\n\t\tactive,\n\t\tdone: true,\n\t});\n\n\tconst toggle = async () => {\n\t\tconst hasAfter = !!after;\n\t\tconst nextActive = !state.active;\n\n\t\tconst canToggle = toggable ? await toggable() : true;\n\t\tif (!canToggle) return;\n\n\t\tObject.assign(state, {\n\t\t\tactive: nextActive,\n\t\t\tdone: !hasAfter,\n\t\t});\n\t\tonToggle?.(nextActive);\n\n\t\tif (!hasAfter) return;\n\n\t\tsetTimeout(() => {\n\t\t\tstate.done = true;\n\t\t}, 16);\n\t};\n\n\tconst handleClick = (e: MouseEvent<HTMLElement>) => {\n\t\tonClick?.(e);\n\n\t\t!disabled && toggle();\n\t};\n\n\tuseEffect(() => {\n\t\tObject.assign(state, {\n\t\t\tactive,\n\t\t\tdone: true,\n\t\t});\n\t}, [active]);\n\n\treturn (\n\t\t<Button\n\t\t\tref={ref}\n\t\t\tclassName={classNames(\n\t\t\t\tclassName,\n\t\t\t\t{ [activeClass || \"\"]: state.active },\n\t\t\t\t\"i-btn-toggle\"\n\t\t\t)}\n\t\t\t{...restProps}\n\t\t\tonClick={handleClick}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"i-btn-toggle-content\", {\n\t\t\t\t\t\"i-btn-toggle-active\": state.done,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{state.active ? after ?? children : children}\n\t\t\t</div>\n\t\t</Button>\n\t);\n}\n"],"names":["Toggle","props","ref","active","activeClass","after","disabled","children","className","toggable","onClick","onToggle","restProps","state","useReactive","done","useEffect","Object","assign","_jsx","Button","classNames","e","async","hasAfter","nextActive","setTimeout","toggle"],"mappings":"oKAMwB,SAAAA,EAAOC,GAC9B,MAAMC,IACLA,EAAGC,OACHA,EAAMC,YACNA,EAAWC,MACXA,EAAKC,SACLA,EAAQC,SACRA,EAAQC,UACRA,EAASC,SACTA,EAAQC,QACRA,EAAOC,SACPA,KACGC,GACAX,EAEEY,EAAQC,EAAY,CACzBX,SACAY,MAAM,IAoCP,OAPAC,GAAU,KACTC,OAAOC,OAAOL,EAAO,CACpBV,SACAY,MAAM,GACL,GACA,CAACZ,IAGHgB,EAACC,GACAlB,IAAKA,EACLM,UAAWa,EACVb,EACA,CAAE,CAACJ,GAAe,IAAKS,EAAMV,QAC7B,mBAEGS,EACJF,QAtBmBY,IACpBZ,IAAUY,IAEThB,GAvBaiB,WACd,MAAMC,IAAanB,EACboB,GAAcZ,EAAMV,SAERM,SAAiBA,OAGnCQ,OAAOC,OAAOL,EAAO,CACpBV,OAAQsB,EACRV,MAAOS,IAERb,IAAWc,GAEND,GAELE,YAAW,KACVb,EAAME,MAAO,CAAI,GACf,IAAG,EAMOY,EAAQ,WAqBpBR,EACC,MAAA,CAAAX,UAAWa,EAAW,uBAAwB,CAC7C,sBAAuBR,EAAME,gBAG7BF,EAAMV,OAASE,GAASE,EAAWA,KAIxC"}