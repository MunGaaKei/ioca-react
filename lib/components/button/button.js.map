{"version":3,"file":"button.js","sources":["../../../packages/components/button/button.tsx"],"sourcesContent":["import useRipple from \"@p/js/useRipple\";\nimport classnames from \"classnames\";\nimport { MouseEvent, createElement, useEffect } from \"react\";\nimport Loading from \"../loading\";\nimport \"./index.css\";\nimport { CompositionButton, IButton } from \"./type\";\n\nconst formatClass = ({\n\toutline,\n\tflat,\n\tloading,\n\tdisabled,\n\tsize = \"normal\",\n\tblock,\n\tround,\n\tsquare,\n\tsecondary,\n\tclassName,\n}: IButton) =>\n\tclassnames(\"i-btn\", className, {\n\t\t\"i-btn-outline\": outline,\n\t\t\"i-btn-flat\": flat,\n\t\t\"i-btn-block\": block,\n\t\t\"i-btn-loading\": loading,\n\t\t\"i-btn-square\": square,\n\t\t\"i-btn-secondary\": secondary,\n\t\t[`i-btn-${size}`]: size !== \"normal\",\n\t\tround,\n\t\tdisabled,\n\t});\n\nconst Button = (props: IButton) => {\n\tconst {\n\t\tas: As = \"a\",\n\t\tref,\n\t\tchildren,\n\t\tclassName,\n\t\tloading,\n\t\tflat,\n\t\toutline,\n\t\tsquare,\n\t\tsecondary,\n\t\tsize,\n\t\tround,\n\t\thref,\n\t\tripple = true,\n\t\tonClick,\n\t\t...restProps\n\t} = props;\n\n\tconst handleClick = (e: MouseEvent<HTMLElement>) => {\n\t\tif (loading || restProps.disabled) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tonClick?.(e);\n\t};\n\n\tif (!children) return <></>;\n\n\tconst childNodes = [\n\t\tloading && <Loading key='loading' />,\n\t\tcreateElement(\n\t\t\t\"span\",\n\t\t\t{ key: \"content\", className: \"i-btn-content\" },\n\t\t\tchildren\n\t\t),\n\t];\n\n\tconst attrs = {\n\t\tclassName: formatClass(props),\n\t\t[\"data-ripple\"]:\n\t\t\tripple && !loading && !restProps.disabled ? \"\" : undefined,\n\t\tonClick: handleClick,\n\t};\n\n\tuseEffect(() => {\n\t\tripple && useRipple();\n\t}, [ripple]);\n\n\tif (typeof As === \"string\") {\n\t\treturn createElement(\n\t\t\tAs,\n\t\t\t{\n\t\t\t\tref,\n\t\t\t\thref,\n\t\t\t\t...attrs,\n\t\t\t\t...restProps,\n\t\t\t},\n\t\t\tchildNodes\n\t\t);\n\t}\n\n\treturn createElement(\n\t\tAs,\n\t\t{\n\t\t\tto: href || \"\",\n\t\t\t...attrs,\n\t\t\t...restProps,\n\t\t},\n\t\tchildNodes\n\t);\n};\n\nexport default Button as CompositionButton;\n"],"names":["formatClass","outline","flat","loading","disabled","size","block","round","square","secondary","className","classnames","Button","props","as","As","ref","children","href","ripple","onClick","restProps","_jsx","childNodes","Loading","createElement","key","attrs","undefined","e","stopPropagation","preventDefault","useEffect","useRipple","to"],"mappings":"qNAOA,MAAMA,EAAc,EACnBC,UACAC,OACAC,UACAC,WACAC,OAAO,SACPC,QACAC,QACAC,SACAC,YACAC,eAEAC,EAAW,QAASD,EAAW,CAC9B,gBAAiBT,EACjB,aAAcC,EACd,cAAeI,EACf,gBAAiBH,EACjB,eAAgBK,EAChB,kBAAmBC,EACnB,CAAC,SAASJ,KAAkB,WAATA,EACnBE,QACAH,aAGIQ,EAAUC,IACf,MACCC,GAAIC,EAAK,IAAGC,IACZA,EAAGC,SACHA,EAAQP,UACRA,EAASP,QACTA,EAAOD,KACPA,EAAID,QACJA,EAAOO,OACPA,EAAMC,UACNA,EAASJ,KACTA,EAAIE,MACJA,EAAKW,KACLA,EAAIC,OACJA,GAAS,EAAIC,QACbA,KACGC,GACAR,EAYJ,IAAKI,EAAU,OAAOK,QAEtB,MAAMC,EAAa,CAClBpB,GAAWmB,EAACE,EAAO,CAAA,EAAK,WACxBC,EACC,OACA,CAAEC,IAAK,UAAWhB,UAAW,iBAC7BO,IAIIU,EAAQ,CACbjB,UAAWV,EAAYa,GACvB,eACCM,GAAWhB,GAAYkB,EAAUjB,cAAgBwB,EAAL,GAC7CR,QAzBoBS,IACpB,GAAI1B,GAAWkB,EAAUjB,SAGxB,OAFAyB,EAAEC,uBACFD,EAAEE,iBAIHX,IAAUS,EAAE,GAyBb,OAJAG,GAAU,KACTb,GAAUc,GAAW,GACnB,CAACd,IAGIM,EACNV,EAFgB,iBAAPA,EAGT,CACCC,MACAE,UACGS,KACAN,GAQL,CACCa,GAAIhB,GAAQ,MACTS,KACAN,GATHE,EAYD"}