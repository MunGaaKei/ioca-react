{"version":3,"file":"popconfirm.js","sources":["../../../packages/components/popconfirm/popconfirm.tsx"],"sourcesContent":["import { InfoOutlined } from \"@ricons/material\";\nimport { useReactive } from \"ahooks\";\nimport { MouseEvent } from \"react\";\nimport Button from \"../button\";\nimport { IButton } from \"../button/type\";\nimport Flex from \"../flex\";\nimport Icon from \"../icon\";\nimport Popup from \"../popup\";\nimport \"./index.css\";\nimport { IPopconfirm } from \"./type\";\n\nconst defaultOk = {\n\tchildren: \"确定\",\n};\n\nconst defaultCancel = {\n\tchildren: \"取消\",\n\tsecondary: true,\n};\n\nconst Popconfirm = (props: IPopconfirm) => {\n\tconst {\n\t\ttrigger = \"click\",\n\t\tvisible,\n\t\ticon = <Icon icon={<InfoOutlined />} className='error' />,\n\t\tcontent,\n\t\tokButtonProps,\n\t\tcancelButtonProps,\n\t\tchildren,\n\t\talign = \"end\",\n\t\tposition = \"top\",\n\t\toffset = 12,\n\t\textra,\n\t\tonOk,\n\t\tonClose,\n\t\t...restProps\n\t} = props;\n\n\tconst state = useReactive({\n\t\tloading: false,\n\t\tvisible,\n\t});\n\n\tconst ok: IButton = okButtonProps\n\t\t? Object.assign({}, defaultOk, okButtonProps)\n\t\t: defaultOk;\n\tconst cancel: IButton = cancelButtonProps\n\t\t? Object.assign({}, defaultCancel, cancelButtonProps)\n\t\t: defaultCancel;\n\n\tconst handleVisibleChange = (v: boolean) => {\n\t\tstate.visible = v;\n\t\trestProps.onVisibleChange?.(v);\n\t};\n\n\tconst handleOk = async (e: MouseEvent<HTMLElement>) => {\n\t\tstate.loading = true;\n\t\tok.onClick?.(e);\n\n\t\tonOk?.()\n\t\t\t?.then(() => {\n\t\t\t\tstate.visible = false;\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tstate.loading = false;\n\t\t\t});\n\t};\n\n\tconst handleCancel = async (e: MouseEvent<HTMLElement>) => {\n\t\tcancel.onClick?.(e);\n\t\tawait onClose?.();\n\t\tstate.visible = false;\n\t};\n\n\tconst popconfirmContent = (\n\t\t<div className='i-popconfirm'>\n\t\t\t<Flex gap={12}>\n\t\t\t\t{icon}\n\t\t\t\t<div className='i-popconfirm-content'>{content}</div>\n\t\t\t</Flex>\n\n\t\t\t<Flex\n\t\t\t\tgap={12}\n\t\t\t\tjustify='flex-end'\n\t\t\t\tclassName='mt-8 i-popconfirm-footer'\n\t\t\t>\n\t\t\t\t{cancelButtonProps !== null && (\n\t\t\t\t\t<Button {...cancel} onClick={handleCancel} />\n\t\t\t\t)}\n\t\t\t\t{extra}\n\t\t\t\t{okButtonProps !== null && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tloading={state.loading}\n\t\t\t\t\t\t{...ok}\n\t\t\t\t\t\tonClick={handleOk}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Flex>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<Popup\n\t\t\tcontent={popconfirmContent}\n\t\t\t{...restProps}\n\t\t\ttrigger={trigger}\n\t\t\tvisible={state.visible}\n\t\t\talign={align}\n\t\t\toffset={offset}\n\t\t\tposition={position}\n\t\t\tonVisibleChange={handleVisibleChange}\n\t\t>\n\t\t\t{children}\n\t\t</Popup>\n\t);\n};\n\nexport default Popconfirm;\n"],"names":["defaultOk","children","defaultCancel","secondary","Popconfirm","props","trigger","visible","icon","_jsx","Icon","InfoOutlined","className","content","okButtonProps","cancelButtonProps","align","position","offset","extra","onOk","onClose","restProps","state","useReactive","loading","ok","Object","assign","cancel","popconfirmContent","_jsxs","Flex","gap","justify","Button","onClick","async","e","then","finally","Popup","onVisibleChange","v"],"mappings":"oSAWA,MAAMA,EAAY,CACjBC,SAAU,MAGLC,EAAgB,CACrBD,SAAU,KACVE,WAAW,GAGNC,EAAcC,IACnB,MAAMC,QACLA,EAAU,QAAOC,QACjBA,EAAOC,KACPA,EAAOC,EAACC,EAAI,CAACF,KAAMC,EAACE,EAAY,CAAA,GAAKC,UAAU,UAAUC,QACzDA,EAAOC,cACPA,EAAaC,kBACbA,EAAiBd,SACjBA,EAAQe,MACRA,EAAQ,MAAKC,SACbA,EAAW,MAAKC,OAChBA,EAAS,GAAEC,MACXA,EAAKC,KACLA,EAAIC,QACJA,KACGC,GACAjB,EAEEkB,EAAQC,EAAY,CACzBC,SAAS,EACTlB,YAGKmB,EAAcZ,EACjBa,OAAOC,OAAO,GAAI5B,EAAWc,GAC7Bd,EACG6B,EAAkBd,EACrBY,OAAOC,OAAO,GAAI1B,EAAea,GACjCb,EA0BG4B,EACLC,EAAK,MAAA,CAAAnB,UAAU,eAAcX,SAAA,CAC5B8B,EAACC,GAAKC,IAAK,GACThC,SAAA,CAAAO,EACDC,EAAK,MAAA,CAAAG,UAAU,gCAAwBC,OAGxCkB,EAACC,EACA,CAAAC,IAAK,GACLC,QAAQ,WACRtB,UAAU,2BAA0BX,SAAA,CAEb,OAAtBc,GACAN,EAAC0B,EAAM,IAAKN,EAAQO,QAnBHC,MAAOC,IAC3BT,EAAOO,UAAUE,SACXjB,OACNE,EAAMhB,SAAU,CAAK,IAkBlBY,EACkB,OAAlBL,GACAL,EAAC0B,EACA,CAAAV,QAASF,EAAME,WACXC,EACJU,QAvCYC,MAAOC,IACvBf,EAAME,SAAU,EAChBC,EAAGU,UAAUE,GAEblB,OACGmB,MAAK,KACNhB,EAAMhB,SAAU,CAAK,IAErBiC,SAAQ,KACRjB,EAAME,SAAU,CAAK,GACpB,UAoCJ,OACChB,EAACgC,EACA,CAAA5B,QAASiB,KACLR,EACJhB,QAASA,EACTC,QAASgB,EAAMhB,QACfS,MAAOA,EACPE,OAAQA,EACRD,SAAUA,EACVyB,gBA5D2BC,IAC5BpB,EAAMhB,QAAUoC,EAChBrB,EAAUoB,kBAAkBC,EAAE,WA4D5B1C,GACM"}