{"version":3,"file":"renderFile.js","sources":["../../../packages/components/upload/renderFile.tsx"],"sourcesContent":["import { ListAltRound } from \"@ricons/material\";\nimport { title } from \"radash\";\nimport { RefObject } from \"react\";\nimport SortableContainer from \"react-easy-sort\";\nimport { TFileType } from \"../../js/usePreview/type\";\nimport { formatBytes, getFileType } from \"../../js/utils\";\nimport Icon from \"../icon\";\nimport Image from \"../image\";\nimport Helpericon from \"../utils/helpericon\";\nimport { IUploadItem } from \"./type\";\n\nexport const ListContainer = (props) => {\n\tconst { sortable, onSortEnd, itemProps, ...restProps } = props;\n\tconst customProps = {\n\t\tclassName: \"i-upload-list\",\n\t\tonClick: (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t},\n\t};\n\n\tif (!sortable) {\n\t\treturn <div {...customProps} {...restProps} />;\n\t}\n\treturn (\n\t\t<SortableContainer\n\t\t\tdraggedItemClassName='i-upload-item-dragged'\n\t\t\tonSortEnd={onSortEnd}\n\t\t\t{...customProps}\n\t\t\t{...restProps}\n\t\t/>\n\t);\n};\n\nconst FileListItem = (\n\tprops: IUploadItem & { ref?: RefObject<HTMLDivElement | null> }\n) => {\n\tconst { ref, mode, index, file, renderItem, onRemove, onPreview } = props;\n\n\tif (!file) return \"\";\n\n\tconst { id, name, size, url, src } = file;\n\tconst type = getFileType(name, file.type);\n\n\tif (renderItem) {\n\t\treturn renderItem(file, index);\n\t}\n\n\tconst CloseBtn = (\n\t\t<Helpericon\n\t\t\tactive\n\t\t\tclassName='i-upload-delete'\n\t\t\tonClick={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tonRemove(index);\n\t\t\t}}\n\t\t/>\n\t);\n\n\tswitch (mode) {\n\t\tcase \"card\":\n\t\t\tlet node = <></>;\n\n\t\t\tswitch (type) {\n\t\t\t\tcase TFileType.IMAGE:\n\t\t\t\t\tnode = (\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\tlazyload\n\t\t\t\t\t\t\tsrc={url || src}\n\t\t\t\t\t\t\tfit='cover'\n\t\t\t\t\t\t\tonMouseDown={(e) => e.preventDefault()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase TFileType.VIDEO:\n\t\t\t\t\tnode = <video src={url || src} preload='none' />;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tnode = (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon icon={<ListAltRound />} />\n\t\t\t\t\t\t\t<span className='i-upload-file-name'>\n\t\t\t\t\t\t\t\t{title(name)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\ttitle={name}\n\t\t\t\t\tclassName='i-upload-item-card'\n\t\t\t\t\tonClick={() => onPreview?.(index)}\n\t\t\t\t>\n\t\t\t\t\t{node}\n\t\t\t\t\t{CloseBtn}\n\t\t\t\t</div>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName='i-upload-item'\n\t\t\t\t\tonClick={() => onPreview?.(index)}\n\t\t\t\t>\n\t\t\t\t\t<span>{name}</span>\n\n\t\t\t\t\t<i className='i-upload-size'>{formatBytes(size ?? 0)}</i>\n\n\t\t\t\t\t{CloseBtn}\n\t\t\t\t</div>\n\t\t\t);\n\t}\n};\n\nexport default FileListItem;\n"],"names":["ListContainer","props","sortable","onSortEnd","itemProps","restProps","customProps","className","onClick","e","stopPropagation","preventDefault","_jsx","SortableContainer","draggedItemClassName","FileListItem","ref","mode","index","file","renderItem","onRemove","onPreview","id","name","size","url","src","type","getFileType","CloseBtn","Helpericon","active","node","_Fragment","TFileType","IMAGE","Image","lazyload","fit","onMouseDown","VIDEO","preload","_jsxs","children","Icon","icon","ListAltRound","title","formatBytes"],"mappings":"kbAWa,MAAAA,EAAiBC,IAC7B,MAAMC,SAAEA,EAAQC,UAAEA,EAASC,UAAEA,KAAcC,GAAcJ,EACnDK,EAAc,CACnBC,UAAW,gBACXC,QAAUC,IACTA,EAAEC,kBACFD,EAAEE,gBAAgB,GAIpB,OAAKT,EAIJU,EAACC,EACA,CAAAC,qBAAqB,wBACrBX,UAAWA,KACPG,KACAD,IAPEO,EAAS,MAAA,IAAAN,KAAiBD,GAQ/B,EAIEU,EACLd,IAEA,MAAMe,IAAEA,EAAGC,KAAEA,EAAIC,MAAEA,EAAKC,KAAEA,EAAIC,WAAEA,EAAUC,SAAEA,EAAQC,UAAEA,GAAcrB,EAEpE,IAAKkB,EAAM,MAAO,GAElB,MAAMI,GAAEA,EAAEC,KAAEA,EAAIC,KAAEA,EAAIC,IAAEA,EAAGC,IAAEA,GAAQR,EAC/BS,EAAOC,EAAYL,EAAML,EAAKS,MAEpC,GAAIR,EACH,OAAOA,EAAWD,EAAMD,GAGzB,MAAMY,EACLlB,EAACmB,GACAC,QAAM,EACNzB,UAAU,kBACVC,QAAUC,IACTA,EAAEC,kBACFD,EAAEE,iBACFU,EAASH,EAAM,IAKlB,GACM,SADED,EACP,CACC,IAAIgB,EAAOrB,EAAAsB,EAAA,IAEX,OAAQN,GACP,KAAKO,EAAUC,MACdH,EACCrB,EAACyB,EACA,CAAAC,UACA,EAAAX,IAAKD,GAAOC,EACZY,IAAI,QACJC,YAAc/B,GAAMA,EAAEE,mBAGxB,MACD,KAAKwB,EAAUM,MACdR,EAAOrB,EAAA,QAAA,CAAOe,IAAKD,GAAOC,EAAKe,QAAQ,SACvC,MACD,QACCT,EACCU,EAAAT,EAAA,CAAAU,SAAA,CACChC,EAACiC,GAAKC,KAAMlC,EAACmC,EAAe,CAAA,KAC5BnC,EAAM,OAAA,CAAAL,UAAU,qBACdqC,SAAAI,EAAMxB,QAOZ,OACCmB,EAAA,MAAA,CACC3B,IAAKA,EACLgC,MAAOxB,EACPjB,UAAU,qBACVC,QAAS,IAAMc,IAAYJ,GAAM0B,SAAA,CAEhCX,EACAH,IACI,CAGP,OACCa,EACC,MAAA,CAAA3B,IAAKA,EAELT,UAAU,gBACVC,QAAS,IAAMc,IAAYJ,GAAM0B,SAAA,CAEjChC,mBAAOY,IAEPZ,EAAG,IAAA,CAAAL,UAAU,gBAAeqC,SAAEK,EAAYxB,GAAQ,KAEjDK,IARIP"}