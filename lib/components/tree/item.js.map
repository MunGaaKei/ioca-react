{"version":3,"file":"item.js","sources":["../../../packages/components/tree/item.tsx"],"sourcesContent":["import { KeyboardArrowDownRound } from \"@ricons/material\";\nimport classNames from \"classnames\";\nimport { MouseEvent, useState } from \"react\";\nimport Checkbox from \"../checkbox\";\nimport Icon from \"../icon\";\nimport { ITree, ITreeHeader, PropsTreeItem } from \"./type\";\n\ninterface ITreeList extends Omit<ITree, \"nodeProps\"> {\n\tnodeProps: {\n\t\tkey: string;\n\t\ttitle: string;\n\t\tchildren: string;\n\t};\n}\n\nexport function TreeList(props: ITreeList) {\n\tconst {\n\t\tdata = [],\n\t\tdepth = 0,\n\t\tround,\n\t\tstyle,\n\t\tclassName,\n\t\tparent,\n\t\tnodeProps,\n\t\t...restProps\n\t} = props;\n\n\tconst contents = data.map((item, i) => {\n\t\tconst { type } = item;\n\t\tconst title = item[nodeProps.title];\n\t\tconst itemKey =\n\t\t\titem[nodeProps.key] ||\n\t\t\t(parent?.key !== undefined ? `${parent.key}-${i}` : `${i}`);\n\n\t\titem.key = itemKey;\n\t\titem.parent = parent;\n\n\t\tif (type === \"title\") {\n\t\t\treturn (\n\t\t\t\t<div key={i} className='i-tree-group-title'>\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif (type && type !== \"item\") {\n\t\t\treturn (\n\t\t\t\t<div key={i} className={`i-tree-type-${type}`}>\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<TreeItem\n\t\t\t\tkey={itemKey}\n\t\t\t\tindex={i}\n\t\t\t\titem={item}\n\t\t\t\tdepth={depth}\n\t\t\t\tnodeProps={nodeProps}\n\t\t\t\t{...restProps}\n\t\t\t/>\n\t\t);\n\t});\n\n\tif (depth > 0) return <>{contents}</>;\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"i-tree\", className, {\n\t\t\t\t\"i-tree-round\": round,\n\t\t\t})}\n\t\t\tstyle={style}\n\t\t>\n\t\t\t{contents}\n\t\t</div>\n\t);\n}\n\nconst Header = (props: ITreeHeader) => {\n\tconst { as: Tag = \"a\", href, selected, children, ...restProps } = props;\n\n\tconst className = classNames(\"i-tree-item-header\", {\n\t\t\"i-tree-item-selected\": selected,\n\t});\n\n\tif (typeof Tag === \"string\") {\n\t\treturn (\n\t\t\t<Tag href={href} className={className} {...restProps}>\n\t\t\t\t{children}\n\t\t\t</Tag>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Tag to={href || \"\"} className={className} {...restProps}>\n\t\t\t{children}\n\t\t</Tag>\n\t);\n};\n\nexport const TreeItem = (props: PropsTreeItem) => {\n\tconst {\n\t\titem,\n\t\tdepth = 0,\n\t\tindex,\n\t\tselected,\n\t\tchecked = [],\n\t\tpartofs = {},\n\t\tcheckable,\n\t\tnodeProps,\n\t\trenderExtra,\n\t\tonItemClick,\n\t\tonItemSelect,\n\t\tonItemCheck,\n\t\t...restProps\n\t} = props;\n\n\tconst { as, key = \"\", href, icon, title, expanded, disabled } = item;\n\tconst children = item[nodeProps.children];\n\n\tconst [expand, setExpand] = useState(expanded);\n\n\tconst handleExpand = (e: MouseEvent<HTMLElement>, fromToggle?: boolean) => {\n\t\tif (fromToggle) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\tif (disabled || !children?.length) return;\n\n\t\tsetExpand((v) => !v);\n\t};\n\n\tconst handleItemClick = (e: MouseEvent<HTMLElement>) => {\n\t\tif (disabled) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\thandleExpand(e);\n\t\tonItemClick?.(item, e);\n\t\tonItemSelect?.(key, item);\n\t};\n\n\tconst handleItemCheck = (checked) => onItemCheck?.(item, checked, []);\n\tconst itemChecked = checked.includes(key);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"i-tree-item\", {\n\t\t\t\t\"i-tree-expand\": expand,\n\t\t\t})}\n\t\t>\n\t\t\t<Header\n\t\t\t\tas={as}\n\t\t\t\thref={href}\n\t\t\t\tstyle={{ paddingLeft: `${depth * 1.5 + 0.5}em` }}\n\t\t\t\tselected={selected === key}\n\t\t\t\tonClick={handleItemClick}\n\t\t\t>\n\t\t\t\t{checkable && (\n\t\t\t\t\t<Checkbox.Item\n\t\t\t\t\t\tvalue={itemChecked}\n\t\t\t\t\t\tpartof={!itemChecked && partofs[key]}\n\t\t\t\t\t\tclassName='i-tree-checkbox'\n\t\t\t\t\t\tonChange={handleItemCheck}\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t{icon && <span className='i-tree-item-icon'>{icon}</span>}\n\n\t\t\t\t<span className='i-tree-item-title'>{title}</span>\n\n\t\t\t\t{renderExtra?.(item)}\n\n\t\t\t\t{children && (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={<KeyboardArrowDownRound />}\n\t\t\t\t\t\tclassName='i-tree-toggle'\n\t\t\t\t\t\tonClick={(e) => handleExpand(e, true)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Header>\n\n\t\t\t{children?.length && (\n\t\t\t\t<div className='i-tree-item-content'>\n\t\t\t\t\t<TreeList\n\t\t\t\t\t\tdata={children}\n\t\t\t\t\t\tdepth={depth + 1}\n\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\tcheckable={checkable}\n\t\t\t\t\t\tparent={item}\n\t\t\t\t\t\tpartofs={partofs}\n\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\tnodeProps={nodeProps}\n\t\t\t\t\t\trenderExtra={renderExtra}\n\t\t\t\t\t\tonItemClick={onItemClick}\n\t\t\t\t\t\tonItemSelect={onItemSelect}\n\t\t\t\t\t\tonItemCheck={onItemCheck}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n"],"names":["TreeList","props","data","depth","round","style","className","parent","nodeProps","restProps","contents","map","item","i","type","title","itemKey","key","undefined","_jsx","children","TreeItem","index","_Fragment","classNames","Header","as","Tag","href","selected","to","checked","partofs","checkable","renderExtra","onItemClick","onItemSelect","onItemCheck","icon","expanded","disabled","expand","setExpand","useState","handleExpand","e","fromToggle","preventDefault","stopPropagation","length","v","itemChecked","includes","_jsxs","paddingLeft","onClick","Checkbox","Item","value","partof","onChange","Icon","KeyboardArrowDownRound"],"mappings":"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"}