{"version":3,"file":"checkbox.js","sources":["../../../packages/components/checkbox/checkbox.tsx"],"sourcesContent":["import { formatOption } from \"@p/js/utils\";\nimport { useReactive } from \"ahooks\";\nimport classNames from \"classnames\";\nimport { useEffect, useMemo } from \"react\";\nimport \"../../css/input.css\";\nimport \"./index.css\";\nimport CheckboxItem from \"./item\";\nimport type { ICheckbox } from \"./type\";\n\nfunction Checkbox(props: ICheckbox) {\n\tconst {\n\t\tlabel,\n\t\tname,\n\t\toptions = [],\n\t\tvalue = \"\",\n\t\ttype = \"default\",\n\t\toptionInline = true,\n\t\tlabelInline,\n\t\tdisabled,\n\t\tstatus = \"normal\",\n\t\tmessage,\n\t\trequired,\n\t\tclassName,\n\t\trenderItem,\n\t\tonChange,\n\t\t...restProps\n\t} = props;\n\n\tconst state = useReactive<{\n\t\tvalue: any;\n\t}>({\n\t\tvalue,\n\t});\n\n\tconst formattedOptions = useMemo(() => formatOption(options), [options]);\n\n\tconst handleChange = (checked, opt, e) => {\n\t\tconst group = [...state.value];\n\t\tconst i = group.findIndex((item) => item === opt.value);\n\n\t\tif (checked && i < 0) {\n\t\t\tgroup.push(opt.value);\n\t\t} else if (!checked && i > -1) {\n\t\t\tgroup.splice(i, 1);\n\t\t}\n\n\t\tstate.value = group;\n\t\tonChange?.(group, opt, e);\n\t};\n\n\tuseEffect(() => {\n\t\tstate.value = value;\n\t}, [value]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t\"i-checkbox i-input-label\",\n\t\t\t\t{\n\t\t\t\t\t[`i-checkbox-${status}`]: status !== \"normal\",\n\t\t\t\t\t\"i-input-inline\": labelInline,\n\t\t\t\t},\n\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...restProps}\n\t\t>\n\t\t\t{label && (\n\t\t\t\t<span className='i-input-label-text'>\n\t\t\t\t\t{required && <span className='error'>*</span>}\n\t\t\t\t\t{label}\n\n\t\t\t\t\t{message && <p className='i-checkbox-message'>{message}</p>}\n\t\t\t\t</span>\n\t\t\t)}\n\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"i-checkbox-options\", {\n\t\t\t\t\t\"i-options-block\": !optionInline,\n\t\t\t\t\t\"i-checkbox-options-button\": type === \"button\",\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{formattedOptions.map((option) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<CheckboxItem\n\t\t\t\t\t\t\tkey={option.value as string}\n\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\tvalue={state.value.includes(option.value)}\n\t\t\t\t\t\t\toptionValue={option.value}\n\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\tdisabled={disabled || option.disabled}\n\t\t\t\t\t\t\tonChange={(checked, e) =>\n\t\t\t\t\t\t\t\thandleChange(checked, option, e)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{renderItem ?? option.label}\n\t\t\t\t\t\t</CheckboxItem>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nCheckbox.Item = CheckboxItem;\n\nexport default Checkbox;\n"],"names":["Checkbox","props","label","name","options","value","type","optionInline","labelInline","disabled","status","message","required","className","renderItem","onChange","restProps","state","useReactive","formattedOptions","useMemo","formatOption","useEffect","_jsxs","classNames","children","_jsx","map","option","CheckboxItem","includes","optionValue","checked","e","opt","group","i","findIndex","item","push","splice","handleChange","Item"],"mappings":"0OASA,SAASA,EAASC,GACjB,MAAMC,MACLA,EAAKC,KACLA,EAAIC,QACJA,EAAU,GAAEC,MACZA,EAAQ,GAAEC,KACVA,EAAO,UAASC,aAChBA,GAAe,EAAIC,YACnBA,EAAWC,SACXA,EAAQC,OACRA,EAAS,SAAQC,QACjBA,EAAOC,SACPA,EAAQC,UACRA,EAASC,WACTA,EAAUC,SACVA,KACGC,GACAf,EAEEgB,EAAQC,EAEX,CACFb,UAGKc,EAAmBC,GAAQ,IAAMC,EAAajB,IAAU,CAACA,IAoB/D,OAJAkB,GAAU,KACTL,EAAMZ,MAAQA,CAAK,GACjB,CAACA,IAGHkB,EACC,MAAA,CAAAV,UAAWW,EACV,2BACA,CACC,CAAC,cAAcd,KAAsB,WAAXA,EAC1B,iBAAkBF,GAGnBK,MAEGG,EAEHS,SAAA,CAAAvB,GACAqB,EAAA,OAAA,CAAMV,UAAU,qBACdY,SAAA,CAAAb,GAAYc,EAAM,OAAA,CAAAb,UAAU,QAAOY,SAAA,MACnCvB,EAEAS,GAAWe,OAAGb,UAAU,qBAAsBY,SAAAd,OAIjDe,EACC,MAAA,CAAAb,UAAWW,EAAW,qBAAsB,CAC3C,mBAAoBjB,EACpB,4BAAsC,WAATD,IAC5BmB,SAEDN,EAAiBQ,KAAKC,GAErBF,EAACG,EAAY,CAEZ1B,KAAMA,EACNE,MAAOY,EAAMZ,MAAMyB,SAASF,EAAOvB,OACnC0B,YAAaH,EAAOvB,MACpBC,KAAMA,EACNG,SAAUA,GAAYmB,EAAOnB,SAC7BM,SAAU,CAACiB,EAASC,IAvDL,EAACD,EAASE,EAAKD,KACnC,MAAME,EAAQ,IAAIlB,EAAMZ,OAClB+B,EAAID,EAAME,WAAWC,GAASA,IAASJ,EAAI7B,QAE7C2B,GAAWI,EAAI,EAClBD,EAAMI,KAAKL,EAAI7B,QACJ2B,GAAWI,MACtBD,EAAMK,OAAOJ,EAAG,GAGjBnB,EAAMZ,MAAQ8B,EACdpB,IAAWoB,EAAOD,EAAKD,EAAE,EA6CnBQ,CAAaT,EAASJ,EAAQK,GAG9BR,SAAAX,GAAcc,EAAO1B,OAVjB0B,EAAOvB,aAiBnB,CAEAL,EAAS0C,KAAOb"}