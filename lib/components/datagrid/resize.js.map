{"version":3,"file":"resize.js","sources":["../../../packages/components/datagrid/resize.tsx"],"sourcesContent":["import { useMouseMove, useMouseUp } from \"@p/js/hooks\";\nimport { useReactive } from \"ahooks\";\n\nexport default function Resize(props) {\n\tconst { index, onWidthChange } = props;\n\tconst state = useReactive({\n\t\tresizing: false,\n\t\tx: 0,\n\t\twidth: 0,\n\t});\n\n\tconst handleMouseDown = (e) => {\n\t\tconst tar = e.target as HTMLElement;\n\t\tconst width = (tar.offsetParent as HTMLElement).offsetWidth;\n\n\t\tObject.assign(state, {\n\t\t\tx: e.pageX,\n\t\t\tresizing: true,\n\t\t\twidth,\n\t\t});\n\t};\n\n\tconst handleMouseMove = (e) => {\n\t\tif (!state.resizing) return;\n\n\t\te.preventDefault();\n\n\t\tconst after = state.width + e.pageX - state.x;\n\t\tif (after <= 24) return;\n\n\t\tonWidthChange(index, after);\n\t};\n\n\tconst handleMouseUp = () => {\n\t\tif (!state.resizing) return;\n\n\t\tstate.resizing = false;\n\t};\n\n\tuseMouseMove(handleMouseMove);\n\tuseMouseUp(handleMouseUp);\n\n\treturn (\n\t\t<i\n\t\t\tclassName='i-datagrid-resizor'\n\t\t\tonMouseDown={handleMouseDown}\n\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t/>\n\t);\n}\n"],"names":["Resize","props","index","onWidthChange","state","useReactive","resizing","x","width","useMouseMove","e","preventDefault","after","pageX","useMouseUp","_jsx","className","onMouseDown","target","offsetParent","offsetWidth","Object","assign","onClick","stopPropagation"],"mappings":"8IAGwB,SAAAA,EAAOC,GAC9B,MAAMC,MAAEA,EAAKC,cAAEA,GAAkBF,EAC3BG,EAAQC,EAAY,CACzBC,UAAU,EACVC,EAAG,EACHC,MAAO,IAkCR,OAHAC,GAjByBC,IACxB,IAAKN,EAAME,SAAU,OAErBI,EAAEC,iBAEF,MAAMC,EAAQR,EAAMI,MAAQE,EAAEG,MAAQT,EAAMG,EACxCK,GAAS,IAEbT,EAAcD,EAAOU,EAAM,IAU5BE,GAPsB,KAChBV,EAAME,WAEXF,EAAME,UAAW,EAAK,IAOtBS,OACCC,UAAU,qBACVC,YAlCuBP,IACxB,MACMF,EADME,EAAEQ,OACKC,aAA6BC,YAEhDC,OAAOC,OAAOlB,EAAO,CACpBG,EAAGG,EAAEG,MACLP,UAAU,EACVE,SACC,EA2BDe,QAAUb,GAAMA,EAAEc,mBAGrB"}