import{jsx as o,jsxs as e,Fragment as t}from"react/jsx-runtime";import i from"classnames";import{useState as n,useRef as r,useEffect as c,useMemo as l}from"react";import{createPortal as s}from"react-dom";import{useKeydown as a}from"../../js/hooks.js";import"../button/index.js";import d from"../utils/helpericon/helpericon.js";import m from"../button/button.js";function u(i){const{title:n,footer:r,hideCloseButton:c,footerLeft:s,okButtonProps:a,cancelButtonProps:u,children:h,onOk:f,onClose:p}=i,k=n||!c,b=async()=>{await(f?.())||p?.()},C=l((()=>{if(r||null===r)return r;const i=Object.assign({children:"确定",onClick:b},a),n=Object.assign({secondary:!0,children:"关闭",onClick:p},u);return e(t,{children:[s,o(m,{...i}),o(m,{...n})]})}),[r,a,u]);return e(t,{children:[k&&e("header",{className:"i-modal-header",children:[n&&o("b",{children:n}),o(d,{active:!c,className:"i-modal-close",onClick:p})]}),o("div",{className:"i-modal-content",children:h}),o("footer",{className:"i-modal-footer",children:C})]})}function h(t){const{visible:l,title:d,footer:m,okButtonProps:h,cancelButtonProps:f,closable:p=!0,hideBackdrop:k,backdropClosable:b=!0,hideCloseButton:C,disableEsc:B,width:j,height:v,customized:N,fixed:P,hideShadow:g,children:y,style:O,className:w,keepDOM:x,footerLeft:E,onClick:L,onVisibleChange:T,onClose:z,onOk:D,...M}=t,[S,V]=n(l),[q,A]=n(!1),[F,G]=n(!1),H=r(!0),I=()=>{if(H.current){if(H.current=!1,!p)return G(!0),void setTimeout((()=>{G(!1),H.current=!0}),400);A(!1),setTimeout((()=>{!x&&V(!1),H.current=!0,T?.(!1),z?.()}),240)}};return a((o=>{"Escape"===o.code&&l&&I()}),{disabled:B}),c((()=>{l?H.current&&((!x||!S)&&V(!0),H.current=!1,setTimeout((()=>{A(!0),T?.(!0),H.current=!0}),24)):I()}),[l]),S?s(o("div",{className:i("i-modal-container",{"i-modal-backdrop":!k,"i-modal-customized":N,"i-modal-active":q,fixed:P},w),style:O,onClick:function(){b&&I()},children:e("div",{className:i("i-modal",{bounced:F,shadow:!g}),style:{width:j,height:v},onClick:o=>{o.stopPropagation(),document.documentElement.click(),L?.(o)},...M,children:[N&&y,!N&&o(u,{title:d,hideCloseButton:C,footer:m,okButtonProps:h,cancelButtonProps:f,children:y,footerLeft:E,onOk:D,onClose:I})]})}),document.body):null}export{h as default};
//# sourceMappingURL=modal.js.map
