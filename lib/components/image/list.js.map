{"version":3,"file":"list.js","sources":["../../../packages/components/image/list.tsx"],"sourcesContent":["import usePreview from \"@p/js/usePreview\";\nimport { TPreviewItem } from \"@p/js/usePreview/type\";\nimport { getFileType, getSuffixByUrl } from \"@p/js/utils\";\nimport { useMemo } from \"react\";\nimport Flex from \"../flex\";\nimport Image from \"./image\";\nimport { IImageList } from \"./type\";\n\nexport default function List(props: IImageList) {\n\tconst {\n\t\titems = [],\n\t\tgap = 8,\n\t\tcolumns,\n\t\twrap,\n\t\tdirection,\n\t\tusePreview: previewable,\n\t\tonClick,\n\t\t...restProps\n\t} = props;\n\tconst preview = usePreview();\n\n\tconst files = useMemo(() => {\n\t\treturn items.map((item) => {\n\t\t\tconst o: TPreviewItem = {\n\t\t\t\tsrc: \"\",\n\t\t\t};\n\t\t\tif (typeof item === \"string\") {\n\t\t\t\to.src = item;\n\t\t\t} else {\n\t\t\t\tObject.assign(o, item);\n\t\t\t}\n\n\t\t\to.suffix = getSuffixByUrl(o.src) || \"\";\n\t\t\to.type = getFileType(o.suffix, item[\"type\"]);\n\n\t\t\treturn o;\n\t\t});\n\t}, [items]);\n\n\tconst handleClick = (e, i) => {\n\t\tonClick?.(e);\n\n\t\tpreviewable &&\n\t\t\tpreview({\n\t\t\t\titems: files,\n\t\t\t\tinitial: i,\n\t\t\t});\n\t};\n\n\tif (!files.length) return \"\";\n\n\treturn (\n\t\t<Flex\n\t\t\tclassName='i-image-list'\n\t\t\tgap={gap}\n\t\t\tcolumns={columns}\n\t\t\twrap={wrap}\n\t\t\tdirection={direction}\n\t\t>\n\t\t\t{files.map((img, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Image\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tsrc={img.src}\n\t\t\t\t\t\tsize={60}\n\t\t\t\t\t\tusePreview={false}\n\t\t\t\t\t\tonClick={(e) => handleClick(e, i)}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t</Flex>\n\t);\n}\n"],"names":["List","props","items","gap","columns","wrap","direction","usePreview","previewable","onClick","restProps","preview","files","useMemo","map","item","o","src","Object","assign","suffix","getSuffixByUrl","type","getFileType","length","_jsx","Flex","className","children","img","i","Image","size","e","initial","handleClick"],"mappings":"iPAQwB,SAAAA,EAAKC,GAC5B,MAAMC,MACLA,EAAQ,GAAEC,IACVA,EAAM,EAACC,QACPA,EAAOC,KACPA,EAAIC,UACJA,EACAC,WAAYC,EAAWC,QACvBA,KACGC,GACAT,EACEU,EAAUJ,IAEVK,EAAQC,GAAQ,IACdX,EAAMY,KAAKC,IACjB,MAAMC,EAAkB,CACvBC,IAAK,IAWN,MAToB,iBAATF,EACVC,EAAEC,IAAMF,EAERG,OAAOC,OAAOH,EAAGD,GAGlBC,EAAEI,OAASC,EAAeL,EAAEC,MAAQ,GACpCD,EAAEM,KAAOC,EAAYP,EAAEI,OAAQL,EAAW,MAEnCC,CAAC,KAEP,CAACd,IAYJ,OAAKU,EAAMY,OAGVC,EAACC,EAAI,CACJC,UAAU,eACVxB,IAAKA,EACLC,QAASA,EACTC,KAAMA,EACNC,UAAWA,EAEVsB,SAAAhB,EAAME,KAAI,CAACe,EAAKC,IAEfL,EAACM,EAEA,CAAAd,IAAKY,EAAIZ,IACTe,KAAM,GACNzB,YAAY,EACZE,QAAUwB,GA3BK,EAACA,EAAGH,KACvBrB,IAAUwB,GAEVzB,GACCG,EAAQ,CACPT,MAAOU,EACPsB,QAASJ,GACR,EAoBiBK,CAAYF,EAAGH,MAC3BpB,GALCoB,OAbgB,EAwB3B"}