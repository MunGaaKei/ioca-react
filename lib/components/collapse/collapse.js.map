{"version":3,"file":"collapse.js","sources":["../../../packages/components/collapse/collapse.tsx"],"sourcesContent":["import { MinusRound, PlusRound } from \"@ricons/material\";\nimport { useReactive } from \"ahooks\";\nimport classNames from \"classnames\";\nimport { Children, useMemo } from \"react\";\nimport Helpericon from \"../utils/helpericon\";\nimport \"./index.css\";\nimport Item from \"./item\";\nimport { ICollapse, ICollapseItem, TKey } from \"./type\";\n\nconst Collapse = (props: ICollapse) => {\n\tconst {\n\t\tactive,\n\t\titems,\n\t\tmultiple,\n\t\tborder,\n\t\theaderClickable,\n\t\tclassName,\n\t\tchildren,\n\t\trenderToggle = (active: boolean) =>\n\t\t\tactive ? <MinusRound /> : <PlusRound />,\n\t\tonCollapse,\n\t\t...restProps\n\t} = props;\n\n\tconst state = useReactive({\n\t\tactive,\n\t});\n\n\tconst collapses = useMemo(() => {\n\t\tif (!items) {\n\t\t\tif (!children) return [];\n\n\t\t\treturn (\n\t\t\t\tChildren.map(children, (node, i) => {\n\t\t\t\t\tconst { key, props: nodeProps } = node as {\n\t\t\t\t\t\tkey?: TKey;\n\t\t\t\t\t\tprops?: any;\n\t\t\t\t\t};\n\t\t\t\t\tconst { title, children, content, disabled, ...restProps } =\n\t\t\t\t\t\tnodeProps;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...restProps,\n\t\t\t\t\t\tkey: key || i,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tcontent: children || content,\n\t\t\t\t\t\tdisabled,\n\t\t\t\t\t};\n\t\t\t\t}) || []\n\t\t\t);\n\t\t}\n\n\t\treturn items;\n\t}, [children]);\n\n\tconst handleHeaderClick = (item: ICollapseItem) => {\n\t\tif (!headerClickable) return;\n\n\t\thandleToggle(item);\n\t};\n\n\tconst handleToggle = (item: ICollapseItem, e?) => {\n\t\tconst { key, disabled } = item;\n\t\te?.stopPropagation();\n\t\tif (disabled) return;\n\n\t\tif (!multiple) {\n\t\t\tstate.active = state.active === key ? undefined : key;\n\t\t\tonCollapse?.(key as TKey, state.active !== undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Array.isArray(state.active)) state.active = [];\n\n\t\tconst i = state.active.findIndex((k) => k === key);\n\n\t\tif (i > -1) {\n\t\t\tstate.active.splice(i, 1);\n\t\t} else {\n\t\t\tkey !== undefined && state.active.push(key);\n\t\t}\n\t\tonCollapse?.(key as TKey, i < 0);\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t\"i-collapse\",\n\t\t\t\t{\n\t\t\t\t\t\"i-collapse-bordered\": border,\n\t\t\t\t},\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...restProps}\n\t\t>\n\t\t\t{collapses.map((item) => {\n\t\t\t\tconst {\n\t\t\t\t\tkey,\n\t\t\t\t\ttitle,\n\t\t\t\t\tcontent,\n\t\t\t\t\tdisabled,\n\t\t\t\t\tclassName,\n\t\t\t\t\t...restProps\n\t\t\t\t} = item;\n\t\t\t\tconst isActive = multiple\n\t\t\t\t\t? ((state.active as TKey[]) || []).includes(key)\n\t\t\t\t\t: state.active === key;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\tclassName={classNames(\"i-collapse-item\", className, {\n\t\t\t\t\t\t\t\"i-collapse-active\": isActive,\n\t\t\t\t\t\t\t\"i-collapse-disabled\": disabled,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{...restProps}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='i-collapse-header'\n\t\t\t\t\t\t\tonClick={() => handleHeaderClick(item)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{title}\n\n\t\t\t\t\t\t\t<Helpericon\n\t\t\t\t\t\t\t\tactive\n\t\t\t\t\t\t\t\tclassName='i-collapse-toggle'\n\t\t\t\t\t\t\t\ticon={renderToggle(isActive)}\n\t\t\t\t\t\t\t\tonClick={(e) => handleToggle(item, e)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='i-collapse-content'>{content}</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n\nCollapse.Item = Item;\n\nexport default Collapse;\n"],"names":["Collapse","props","active","items","multiple","border","headerClickable","className","children","renderToggle","_jsx","MinusRound","PlusRound","onCollapse","restProps","state","useReactive","collapses","useMemo","Children","map","node","i","key","nodeProps","title","content","disabled","handleToggle","item","e","stopPropagation","undefined","Array","isArray","findIndex","k","splice","push","classNames","isActive","includes","_jsxs","onClick","handleHeaderClick","Helpericon","icon","Item"],"mappings":"sSASA,MAAMA,EAAYC,IACjB,MAAMC,OACLA,EAAMC,MACNA,EAAKC,SACLA,EAAQC,OACRA,EAAMC,gBACNA,EAAeC,UACfA,EAASC,SACTA,EAAQC,aACRA,EAAgBP,GACNQ,EAATR,EAAUS,EAAiBC,EAAJ,IAAgBC,WACxCA,KACGC,GACAb,EAEEc,EAAQC,EAAY,CACzBd,WAGKe,EAAYC,GAAQ,IACpBf,IACCK,GAGJW,EAASC,IAAIZ,GAAU,CAACa,EAAMC,KAC7B,MAAMC,IAAEA,EAAKtB,MAAOuB,GAAcH,GAI5BI,MAAEA,EAAKjB,SAAEA,EAAQkB,QAAEA,EAAOC,SAAEA,KAAab,GAC9CU,EAED,MAAO,IACHV,EACHS,IAAKA,GAAOD,EACZG,QACAC,QAASlB,GAAYkB,EACrBC,WACA,KAjBmB,KAuBrB,CAACnB,IAQEoB,EAAe,CAACC,EAAqBC,KAC1C,MAAMP,IAAEA,EAAGI,SAAEA,GAAaE,EAE1B,GADAC,GAAGC,kBACCJ,EAAU,OAEd,IAAKvB,EAGJ,OAFAW,EAAMb,OAASa,EAAMb,SAAWqB,OAAMS,EAAYT,OAClDV,IAAaU,OAA8BS,IAAjBjB,EAAMb,QAI5B+B,MAAMC,QAAQnB,EAAMb,UAASa,EAAMb,OAAS,IAEjD,MAAMoB,EAAIP,EAAMb,OAAOiC,WAAWC,GAAMA,IAAMb,IAE1CD,GAAI,EACPP,EAAMb,OAAOmC,OAAOf,EAAG,QAEfU,IAART,GAAqBR,EAAMb,OAAOoC,KAAKf,GAExCV,IAAaU,EAAaD,EAAI,EAAE,EAGjC,OACCZ,EACC,MAAA,CAAAH,UAAWgC,EACV,aACA,CACC,sBAAuBlC,GAExBE,MAEGO,EAEHN,SAAAS,EAAUG,KAAKS,IACf,MAAMN,IACLA,EAAGE,MACHA,EAAKC,QACLA,EAAOC,SACPA,EAAQpB,UACRA,KACGO,GACAe,EACEW,EAAWpC,GACZW,EAAMb,QAAqB,IAAIuC,SAASlB,GAC1CR,EAAMb,SAAWqB,EAEpB,OACCmB,SAECnC,UAAWgC,EAAW,kBAAmBhC,EAAW,CACnD,oBAAqBiC,EACrB,sBAAuBb,OAEpBb,EAEJN,SAAA,CAAAkC,EAAA,MAAA,CACCnC,UAAU,oBACVoC,QAAS,IAhEW,CAACd,IACrBvB,GAELsB,EAAaC,EAAK,EA6DEe,CAAkBf,GAAKrB,SAAA,CAErCiB,EAEDf,EAACmC,EACA,CAAA3C,QACA,EAAAK,UAAU,oBACVuC,KAAMrC,EAAa+B,GACnBG,QAAUb,GAAMF,EAAaC,EAAMC,QAIrCpB,EAAK,MAAA,CAAAH,UAAU,qBAAsBC,SAAAkB,MArBhCH,EAsBA,KAGH,EAIRvB,EAAS+C,KAAOA"}