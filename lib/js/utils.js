import{createRoot as t}from"react-dom/client";import{TFileType as e}from"./usePreview/type.js";function n(t,e,n={}){const{refWindow:o,gap:r=0,offset:c=0,position:s="top",align:a}=n;if(!t||!e)return[0,0,{arrowX:0,arrowY:0,arrowPos:"bottom"}];const u=t.getBoundingClientRect(),f=e.getBoundingClientRect();let l=window.innerWidth,g=window.innerHeight,{left:h,top:d,right:p,bottom:m,width:w,height:B}=u;const{height:b,width:z}=f;if(!o){const e=t.offsetParent?.getBoundingClientRect();l=e?.width||l,g=e?.height||g,h=t.offsetLeft,d=t.offsetTop,p=h+u.width,m=d+u.height}let M=0,S=0,$=0,v=0,F="bottom";switch(s){case"left":case"right":M=B!==b?i({containerSize:g,targetSize:B,targetOffset:d,contentSize:b,gap:r,align:a}):d,v=M<d?d-M+B/2:B/2;const t=h-c-z,e=p+c+z;if("left"===s){const n=t<0&&e<=l;S=n?p+c:t,$=n?0:z,F=n?"left":"right"}else{const n=l>e||t<0;S=n?p+c:t,$=n?0:z,F=n?"left":"right"}break;case"top":case"bottom":S=w!==z?i({containerSize:l,targetOffset:h,targetSize:w,contentSize:z,gap:r,align:a}):h,$=S>h?z/2:h-S+w/2;const n=d-c-b,o=m+c+b;if("top"===s){const t=n<0&&o<=g;M=t?m+c:n,v=t?0:b,F=t?"top":"bottom"}else{const t=g>o||n<0;M=t?m+c:n,v=t?0:b,F=t?"top":"bottom"}}return[S,M,{arrowX:$,arrowY:v,arrowPos:F}]}function o(t,e){const{width:n,height:o}=e.getBoundingClientRect(),i=e.offsetParent;let r,c,s=0,a=0;if(i){const{width:t,height:e,left:n,top:o}=i.getBoundingClientRect();r=t,c=e,a=o-(i.scrollTop??0),s=n}else r=window.innerWidth,c=window.innerHeight;const u=t.pageX-s,f=t.pageY-a;return[u+n>=r&&u-n>0?u-n:u,f+o>=c&&f-o>0?f-o:f]}function i({containerSize:t,targetSize:e,targetOffset:n,contentSize:o,gap:i,align:r="center"}){const c=n+e/2;switch(r){case"start":return n+o>t?t-o-i:n;case"center":return e>=o?c-o/2:c+o/2+i>t?n+e-o:c-o/2-i<0?i:c-o/2;case"end":const r=n+e-o;return r>0?r:i;default:return c-o/2}}function r(t){return t.map((t=>["string","number"].includes(typeof t)?{label:t,value:t}:t))}function c(t,e,n=1e3,o,i=t=>1-Math.pow(1-t,4)){const r=performance.now(),c=e-t;let s=requestAnimationFrame((function t(){s=requestAnimationFrame(t);let e=(performance.now()-r)/n;e>=1&&(e=1,cancelAnimationFrame(s));const a=c*i(e);o?.(a)}))}function s(t,e={}){const{precision:n,thousand:o}=e,i=t.toFixed(n);if(!o)return i;const r=i.split("."),c=r[0].replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,`$&${o}`);return 1===r.length?c:`${c}.${r[1]}`}function a(e,n=document.body){const o=document.createElement("div");n.append(o);const i=t(o),r=setTimeout((()=>{i?.render(e)}),0);return()=>{o?.remove(),i?.unmount(),r&&clearTimeout(r)}}function u(t){return t.match(/\.([^\./\?]+)($|\?)/)?.[1]}function f(t,n){switch(!0){case["jpg","jpeg","png","webp","svg"].includes(t)||n?.startsWith("image/"):return e.IMAGE;case["mp4","avi"].includes(t)||n?.startsWith("video/"):return e.VIDEO;default:return e.UNKNOWN}}function l(t){t.requestFullscreen?.()}function g(){document.exitFullscreen?.()}function h(t,e){const n=[],{zero:o=!0,units:i=["",":",":"]}=e,r=i.length;let c=0;for(;c<r&&!(t<=0&&c>1);){const e=Math.round(t%60);t=Math.floor(t/60),n.unshift((o&&e<10?`0${e}`:e)+i[c++])}return n.join("")}function d(t,e,n){const o=["desc","asc"];if(t===n){const t=o.findIndex((t=>t===e))+1,i=o[t]||"";return[""===i?"":n,i]}return[n,"desc"]}function p(t,e=2){if(!+t)return"0 Bytes";const n=e<0?0:e,o=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,o)).toFixed(n))} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}`}function m(t,e,n){return t<e?e:t>n?n:t}const w=(t,e,n)=>{if(n>=t.length){let e=n-t.length+1;for(;e--;)t.push(void 0)}return t.splice(n,0,t.splice(e,1)[0]),t};export{c as animate,w as arrayMove,m as clamp,g as exitFullScreen,p as formatBytes,s as formatNumber,r as formatOption,h as formatTime,l as fullScreen,f as getFileType,d as getNextSorter,o as getPointPosition,n as getPosition,u as getSuffixByUrl,a as renderNode};
//# sourceMappingURL=utils.js.map
