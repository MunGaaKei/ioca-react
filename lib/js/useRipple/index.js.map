{"version":3,"file":"index.js","sources":["../../../packages/js/useRipple/index.ts"],"sourcesContent":["import \"./ripple.css\";\n\nconst TIMEOUT = 500;\n\nconst useRipple = () => {\n\tif (document.documentElement.dataset[\"useripple\"]) return;\n\tdocument.documentElement.dataset[\"useripple\"] = \"enable\";\n\n\tdocument.addEventListener(\"mousedown\", listener);\n};\n\nfunction listener(e: MouseEvent) {\n\tconst target = e.target as HTMLElement;\n\tconst parent = target.closest(\"[data-ripple]\") as HTMLElement;\n\n\tif (!target || !parent) return;\n\n\ttriggerRipple(parent, e);\n}\n\nfunction triggerRipple(target: HTMLElement, e: MouseEvent) {\n\tconst [$box, $ripple] = createRipple();\n\tconst rect = target.getBoundingClientRect();\n\tconst size = Math.max(rect.width, rect.height) * 2;\n\n\t$ripple.style.cssText = `\n        left: ${e.pageX - rect.left}px;\n        top: ${e.pageY - rect.top}px;\n        width: ${size}px;\n        height: ${size}px;\n        transition: all ${TIMEOUT / 1000}s;\n    `;\n\ttarget.insertAdjacentElement(\"afterbegin\", $box);\n\ttarget.offsetHeight;\n\t$ripple.classList.add(\"i-ripple-active\");\n\n\tsetTimeout(() => {\n\t\t$box.remove();\n\t}, TIMEOUT);\n}\n\nfunction createRipple() {\n\tconst $box = document.createElement(\"SPAN\");\n\tconst $ripple = document.createElement(\"SPAN\");\n\n\t$box.className = \"i-ripple-container\";\n\t$ripple.className = \"i-ripple\";\n\n\t$box.append($ripple);\n\n\treturn [$box, $ripple];\n}\n\nexport default useRipple;\n"],"names":["TIMEOUT","useRipple","document","documentElement","dataset","addEventListener","listener","e","target","parent","closest","$box","$ripple","createElement","className","append","createRipple","rect","getBoundingClientRect","size","Math","max","width","height","style","cssText","pageX","left","pageY","top","insertAdjacentElement","offsetHeight","classList","add","setTimeout","remove","triggerRipple"],"mappings":"AAEA,MAAMA,EAAU,IAEVC,EAAY,KACbC,SAASC,gBAAgBC,QAAmB,YAChDF,SAASC,gBAAgBC,QAAmB,UAAI,SAEhDF,SAASG,iBAAiB,YAAaC,GAAS,EAGjD,SAASA,EAASC,GACjB,MAAMC,EAASD,EAAEC,OACXC,EAASD,EAAOE,QAAQ,iBAEzBF,GAAWC,GAKjB,SAAuBD,EAAqBD,GAC3C,MAAOI,EAAMC,GAoBd,WACC,MAAMD,EAAOT,SAASW,cAAc,QAC9BD,EAAUV,SAASW,cAAc,QAOvC,OALAF,EAAKG,UAAY,qBACjBF,EAAQE,UAAY,WAEpBH,EAAKI,OAAOH,GAEL,CAACD,EAAMC,EACf,CA9ByBI,GAClBC,EAAOT,EAAOU,wBACdC,EAA2C,EAApCC,KAAKC,IAAIJ,EAAKK,MAAOL,EAAKM,QAEvCX,EAAQY,MAAMC,QAAU,mBACTlB,EAAEmB,MAAQT,EAAKU,yBAChBpB,EAAEqB,MAAQX,EAAKY,0BACbV,yBACCA,4CAGjBX,EAAOsB,sBAAsB,aAAcnB,GAC3CH,EAAOuB,aACPnB,EAAQoB,UAAUC,IAAI,mBAEtBC,YAAW,KACVvB,EAAKwB,QAAQ,GACXnC,EACJ,CAtBCoC,CAAc3B,EAAQF,EACvB"}