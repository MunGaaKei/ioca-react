{"version":3,"file":"utils.js","sources":["../../packages/js/utils.ts"],"sourcesContent":["import { MouseEvent, ReactNode } from \"react\";\nimport { Root, createRoot } from \"react-dom/client\";\nimport { TFileType } from \"../js/usePreview/type\";\nimport { TOption, TOptions, TRelativeOptions } from \"../type\";\n\ntype TComputePosition = {\n\tcontainerSize: number;\n\ttargetSize: number;\n\ttargetOffset: number;\n\tcontentSize: number;\n\tgap: number;\n\talign?: \"start\" | \"center\" | \"end\";\n};\n\nexport function getPosition(\n\t$source?: HTMLElement | null,\n\t$popup?: HTMLElement | null,\n\toptions: TRelativeOptions = {}\n): [\n\tx: number,\n\ty: number,\n\tz: {\n\t\tarrowX: number;\n\t\tarrowY: number;\n\t\tarrowPos: string;\n\t}\n] {\n\tconst { refWindow, gap = 0, offset = 0, position = \"top\", align } = options;\n\n\tif (!$source || !$popup)\n\t\treturn [\n\t\t\t0,\n\t\t\t0,\n\t\t\t{\n\t\t\t\tarrowX: 0,\n\t\t\t\tarrowY: 0,\n\t\t\t\tarrowPos: \"bottom\",\n\t\t\t},\n\t\t];\n\n\tconst rectT = $source.getBoundingClientRect();\n\tconst rectC = $popup.getBoundingClientRect();\n\n\tlet w = window.innerWidth;\n\tlet h = window.innerHeight;\n\tlet {\n\t\tleft: tl,\n\t\ttop: tt,\n\t\tright: tr,\n\t\tbottom: tb,\n\t\twidth: tw,\n\t\theight: th,\n\t} = rectT;\n\tconst { height: ch, width: cw } = rectC;\n\n\tif (!refWindow) {\n\t\tconst rectPa = $source.offsetParent?.getBoundingClientRect();\n\n\t\tw = rectPa?.width || w;\n\t\th = rectPa?.height || h;\n\t\ttl = $source.offsetLeft;\n\t\ttt = $source.offsetTop;\n\t\ttr = tl + rectT.width;\n\t\ttb = tt + rectT.height;\n\t}\n\n\tlet y = 0;\n\tlet x = 0;\n\tlet arrowX = 0;\n\tlet arrowY = 0;\n\tlet arrowPos = \"bottom\";\n\n\tswitch (position) {\n\t\tcase \"left\":\n\t\tcase \"right\":\n\t\t\ty =\n\t\t\t\tth !== ch\n\t\t\t\t\t? computePosition({\n\t\t\t\t\t\t\tcontainerSize: h,\n\t\t\t\t\t\t\ttargetSize: th,\n\t\t\t\t\t\t\ttargetOffset: tt,\n\t\t\t\t\t\t\tcontentSize: ch,\n\t\t\t\t\t\t\tgap,\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t  })\n\t\t\t\t\t: tt;\n\t\t\tarrowY = y < tt ? tt - y + th / 2 : th / 2;\n\n\t\t\tconst xl = tl - offset - cw;\n\t\t\tconst xr = tr + offset + cw;\n\n\t\t\tif (position === \"left\") {\n\t\t\t\tconst R = xl < 0 && xr <= w;\n\t\t\t\tx = R ? tr + offset : xl;\n\t\t\t\tarrowX = R ? 0 : cw;\n\t\t\t\tarrowPos = R ? \"left\" : \"right\";\n\t\t\t} else {\n\t\t\t\tconst R = w > xr || xl < 0;\n\t\t\t\tx = R ? tr + offset : xl;\n\t\t\t\tarrowX = R ? 0 : cw;\n\t\t\t\tarrowPos = R ? \"left\" : \"right\";\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\tcase \"bottom\":\n\t\t\tx =\n\t\t\t\ttw !== cw\n\t\t\t\t\t? computePosition({\n\t\t\t\t\t\t\tcontainerSize: w,\n\t\t\t\t\t\t\ttargetOffset: tl,\n\t\t\t\t\t\t\ttargetSize: tw,\n\t\t\t\t\t\t\tcontentSize: cw,\n\t\t\t\t\t\t\tgap,\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t  })\n\t\t\t\t\t: tl;\n\t\t\tarrowX = x > tl ? cw / 2 : tl - x + tw / 2;\n\n\t\t\tconst yt = tt - offset - ch;\n\t\t\tconst yb = tb + offset + ch;\n\t\t\tif (position === \"top\") {\n\t\t\t\tconst T = yt < 0 && yb <= h;\n\t\t\t\ty = T ? tb + offset : yt;\n\t\t\t\tarrowY = T ? 0 : ch;\n\t\t\t\tarrowPos = T ? \"top\" : \"bottom\";\n\t\t\t} else {\n\t\t\t\tconst B = h > yb || yt < 0;\n\t\t\t\ty = B ? tb + offset : yt;\n\t\t\t\tarrowY = B ? 0 : ch;\n\t\t\t\tarrowPos = B ? \"top\" : \"bottom\";\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\treturn [\n\t\tx,\n\t\ty,\n\t\t{\n\t\t\tarrowX,\n\t\t\tarrowY,\n\t\t\tarrowPos,\n\t\t},\n\t];\n}\n\nexport function getPointPosition(e: MouseEvent, content: HTMLElement) {\n\tconst { width: w, height: h } = content.getBoundingClientRect();\n\tconst parent = content.offsetParent;\n\tlet pw,\n\t\tph,\n\t\tpl = 0,\n\t\tpt = 0;\n\n\tif (parent) {\n\t\tconst {\n\t\t\twidth: ow,\n\t\t\theight: oh,\n\t\t\tleft: ol,\n\t\t\ttop: ot,\n\t\t} = parent.getBoundingClientRect();\n\t\tconst st = parent.scrollTop ?? 0;\n\n\t\tpw = ow;\n\t\tph = oh;\n\t\tpt = ot - st;\n\t\tpl = ol;\n\t} else {\n\t\tpw = window.innerWidth;\n\t\tph = window.innerHeight;\n\t}\n\tconst x = e.pageX - pl;\n\tconst y = e.pageY - pt;\n\n\tconst left = x + w >= pw ? (x - w > 0 ? x - w : x) : x;\n\tconst top = y + h >= ph ? (y - h > 0 ? y - h : y) : y;\n\n\treturn [left, top];\n}\n\nfunction computePosition({\n\tcontainerSize,\n\ttargetSize,\n\ttargetOffset,\n\tcontentSize,\n\tgap,\n\talign = \"center\",\n}: TComputePosition) {\n\tconst centerPoint = targetOffset + targetSize / 2;\n\n\tswitch (align) {\n\t\tcase \"start\":\n\t\t\treturn targetOffset + contentSize > containerSize\n\t\t\t\t? containerSize - contentSize - gap\n\t\t\t\t: targetOffset;\n\t\tcase \"center\":\n\t\t\tif (targetSize >= contentSize) {\n\t\t\t\treturn centerPoint - contentSize / 2;\n\t\t\t}\n\n\t\t\tif (centerPoint + contentSize / 2 + gap > containerSize) {\n\t\t\t\treturn targetOffset + targetSize - contentSize;\n\t\t\t}\n\n\t\t\tif (centerPoint - contentSize / 2 - gap < 0) {\n\t\t\t\treturn gap;\n\t\t\t}\n\n\t\t\treturn centerPoint - contentSize / 2;\n\t\tcase \"end\":\n\t\t\tconst result = targetOffset + targetSize - contentSize;\n\t\t\treturn result > 0 ? result : gap;\n\t\tdefault:\n\t\t\treturn centerPoint - contentSize / 2;\n\t}\n}\n\nexport function formatOption(options: TOptions): TOption[] {\n\treturn options.map((option) =>\n\t\t[\"string\", \"number\"].includes(typeof option)\n\t\t\t? { label: option, value: option }\n\t\t\t: option\n\t) as TOption[];\n}\n\nexport function animate(\n\tfrom: number,\n\tto: number,\n\tduration: number = 1000,\n\tcallback?: (v: number) => void,\n\teasing: (t: number) => number = (t) => 1 - Math.pow(1 - t, 4)\n) {\n\tconst start = performance.now();\n\tconst diff = to - from;\n\tlet raf = requestAnimationFrame(loop);\n\n\tfunction loop() {\n\t\traf = requestAnimationFrame(loop);\n\n\t\tconst past = performance.now() - start;\n\t\tlet percent = past / duration;\n\n\t\tif (percent >= 1) {\n\t\t\tpercent = 1;\n\t\t\tcancelAnimationFrame(raf);\n\t\t}\n\n\t\tconst pass = diff * easing(percent);\n\t\tcallback?.(pass);\n\t}\n}\n\nexport function formatNumber(\n\tvalue: number,\n\toptions: {\n\t\tprecision?: number;\n\t\tthousand?: string;\n\t} = {}\n) {\n\tconst { precision, thousand } = options;\n\n\tconst result = value.toFixed(precision);\n\n\tif (!thousand) return result;\n\n\tconst points = result.split(\".\");\n\tconst integer = points[0].replace(\n\t\t/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,\n\t\t`$&${thousand}`\n\t);\n\n\tif (points.length === 1) return integer;\n\n\treturn `${integer}.${points[1]}`;\n}\n\nexport function renderNode(node: ReactNode, container = document.body) {\n\tconst div: HTMLDivElement | null = document.createElement(\"div\");\n\tcontainer.append(div);\n\n\tconst root: Root | null = createRoot(div);\n\tconst sto = setTimeout(() => {\n\t\troot?.render(node);\n\t}, 0);\n\n\treturn () => {\n\t\tdiv?.remove();\n\t\troot?.unmount();\n\t\tsto && clearTimeout(sto);\n\t};\n}\n\nexport function getSuffixByUrl(url: string) {\n\treturn url.match(/\\.([^\\./\\?]+)($|\\?)/)?.[1];\n}\n\nexport function getFileType(suffix: string, type?: string): TFileType {\n\tswitch (true) {\n\t\tcase [\"jpg\", \"jpeg\", \"png\", \"webp\", \"svg\"].includes(suffix) ||\n\t\t\ttype?.startsWith(\"image/\"):\n\t\t\treturn TFileType[\"IMAGE\"];\n\t\tcase [\"mp4\", \"avi\"].includes(suffix) || type?.startsWith(\"video/\"):\n\t\t\treturn TFileType[\"VIDEO\"];\n\t\tdefault:\n\t\t\treturn TFileType[\"UNKNOWN\"];\n\t}\n}\n\nexport function fullScreen(el: HTMLElement) {\n\tel.requestFullscreen?.();\n}\n\nexport function exitFullScreen() {\n\tdocument.exitFullscreen?.();\n}\n\nexport function formatTime(\n\ttime: number,\n\toptions?: {\n\t\tzero?: boolean;\n\t\tunits?: string[];\n\t}\n) {\n\tconst result: string[] = [];\n\tconst { zero = true, units = [\"\", \":\", \":\"] } = options || {};\n\n\tconst l = units.length;\n\tlet i = 0;\n\n\twhile (i < l) {\n\t\tif (time <= 0 && i > 1) break;\n\n\t\tconst n = Math.round(time % 60);\n\n\t\ttime = Math.floor(time / 60);\n\n\t\tresult.unshift((zero && n < 10 ? `0${n}` : n) + units[i++]);\n\t}\n\n\treturn result.join(\"\");\n}\n\nexport function getNextSorter(\n\tprevSortBy: string,\n\tprevSortType: string,\n\tsortBy: string\n): [sortBy: string, sortType: string] {\n\tconst types = [\"desc\", \"asc\"];\n\n\tif (prevSortBy === sortBy) {\n\t\tconst i = types.findIndex((t) => t === prevSortType) + 1;\n\t\tconst type = types[i] || \"\";\n\t\tconst by = type === \"\" ? \"\" : sortBy;\n\n\t\treturn [by, type];\n\t}\n\n\treturn [sortBy, \"desc\"];\n}\n\nexport function formatBytes(bytes: number, decimals = 2) {\n\tif (!+bytes) return \"0 Bytes\";\n\n\tconst k = 1024;\n\tconst dm = decimals < 0 ? 0 : decimals;\n\tconst sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\n\treturn `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nexport function clamp(value: number, min: number, max: number) {\n\treturn value < min ? min : value > max ? max : value;\n}\n\nexport const arrayMove = (array, fromIndex: number, toIndex: number) => {\n\tif (toIndex >= array.length) {\n\t\tlet k = toIndex - array.length + 1;\n\t\twhile (k--) {\n\t\t\tarray.push(undefined);\n\t\t}\n\t}\n\tarray.splice(toIndex, 0, array.splice(fromIndex, 1)[0]);\n\treturn array;\n};\n"],"names":["getPosition","$source","$popup","options","refWindow","gap","offset","position","align","arrowX","arrowY","arrowPos","rectT","getBoundingClientRect","rectC","w","window","innerWidth","h","innerHeight","left","tl","top","tt","right","tr","bottom","tb","width","tw","height","th","ch","cw","rectPa","offsetParent","offsetLeft","offsetTop","y","x","computePosition","containerSize","targetSize","targetOffset","contentSize","xl","xr","R","yt","yb","T","B","getPointPosition","e","content","parent","pw","ph","pl","pt","ow","oh","ol","ot","scrollTop","pageX","pageY","centerPoint","result","formatOption","map","option","includes","label","value","animate","from","to","duration","callback","easing","t","Math","pow","start","performance","now","diff","raf","requestAnimationFrame","loop","percent","cancelAnimationFrame","pass","formatNumber","precision","thousand","toFixed","points","split","integer","replace","length","renderNode","node","container","document","body","div","createElement","append","root","createRoot","sto","setTimeout","render","remove","unmount","clearTimeout","getSuffixByUrl","url","match","getFileType","suffix","type","startsWith","TFileType","fullScreen","el","requestFullscreen","exitFullScreen","exitFullscreen","formatTime","time","zero","units","l","i","n","round","floor","unshift","join","getNextSorter","prevSortBy","prevSortType","sortBy","types","findIndex","formatBytes","bytes","decimals","dm","log","parseFloat","clamp","min","max","arrayMove","array","fromIndex","toIndex","k","push","undefined","splice"],"mappings":"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"}