import{jsxs as e,jsx as t,Fragment as n}from"react/jsx-runtime";import i from"classnames";import{debounce as r,uid as a,throttle as s,pick as l,title as o}from"radash";import{createElement as c,useEffect as d,useMemo as u,Children as p,cloneElement as m,isValidElement as h,useState as g,useRef as v,Fragment as f,useLayoutEffect as b,useImperativeHandle as y,createContext as k,useContext as N}from"react";import{SkipPreviousRound as C,CloseRound as w,MinusRound as x,PlusRound as $,InboxTwotone as z,FormatBoldRound as D,FormatItalicRound as T,FormatUnderlinedRound as P,StrikethroughSRound as I,RedoRound as S,UndoRound as M,FormatClearRound as O,PauseRound as E,PlayArrowRound as j,StopRound as B,VolumeOffRound as L,VolumeDownRound as A,FullscreenExitRound as Y,FullscreenRound as V,FeedOutlined as H,AspectRatioRound as W,OpenInNewRound as F,FileDownloadOutlined as q,RotateRightRound as R,RotateLeftRound as X,KeyboardArrowLeftRound as U,KeyboardArrowRightRound as G,HideImageTwotone as K,VisibilityRound as Z,VisibilityOffRound as _,SyncAltRound as J,MoreHorizRound as Q,SearchRound as ee,CheckRound as te,UnfoldMoreRound as ne,CalendarMonthTwotone as ie,AccessTimeRound as re,InfoOutlined as ae,KeyboardArrowDownRound as se,ListAltRound as le,PlusSharp as oe}from"@ricons/material";import{useReactive as ce,useCreation as de,useSize as ue}from"ahooks";import{createRoot as pe}from"react-dom/client";import me from"react-custom-scrollbars-2";import{createPortal as he}from"react-dom";import ge,{escapeAttrValue as ve}from"xss";import fe from"pubsub-js";import{findAll as be}from"highlight-words-core";import ye from"@rc-component/color-picker";import"@rc-component/color-picker/assets/index.css";import ke from"dayjs";import Ne from"dayjs/plugin/customParseFormat";import Ce,{SortableItem as we}from"react-easy-sort";const xe=500;function $e(e){const t=e.target,n=t.closest("[data-ripple]");t&&n&&function(e,t){const[n,i]=function(){const e=document.createElement("SPAN"),t=document.createElement("SPAN");return e.className="i-ripple-container",t.className="i-ripple",e.append(t),[e,t]}(),r=e.getBoundingClientRect(),a=2*Math.max(r.width,r.height);i.style.cssText=`\n        left: ${t.pageX-r.left}px;\n        top: ${t.pageY-r.top}px;\n        width: ${a}px;\n        height: ${a}px;\n        transition: all 0.5s;\n    `,e.insertAdjacentElement("afterbegin",n),e.offsetHeight,i.classList.add("i-ripple-active"),setTimeout((()=>{n.remove()}),xe)}(n,e)}const ze=n=>{const{icon:r,text:a,size:s,absolute:l,style:o,className:c,...d}=n;return e("div",{className:i("i-loading-container",{absolute:l},c),style:{...o,inset:l?0:"unset"},...d,children:[r??t("svg",{width:"24",height:"24",stroke:"#000",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"i-loading-icon",style:{fontSize:s},children:t("circle",{cx:"12",cy:"12",r:"9.5",fill:"none",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:40,strokeDashoffset:0})}),a]})},De=({outline:e,flat:t,loading:n,disabled:r,size:a="normal",block:s,round:l,square:o,secondary:c,className:d})=>i("i-btn",d,{"i-btn-outline":e,"i-btn-flat":t,"i-btn-block":s,"i-btn-loading":n,"i-btn-square":o,"i-btn-secondary":c,[`i-btn-${a}`]:"normal"!==a,round:l,disabled:r}),Te=e=>{const{as:i="a",ref:r,children:a,className:s,loading:l,flat:o,outline:u,square:p,secondary:m,size:h,round:g,href:v,ripple:f=!0,onClick:b,...y}=e;if(!a)return t(n,{});const k=[l&&t(ze,{},"loading"),c("span",{key:"content",className:"i-btn-content"},a)],N={className:De(e),"data-ripple":!f||l||y.disabled?void 0:"",onClick:e=>{l||y.disabled?e.stopPropagation():b?.(e)}};return d((()=>{f&&(document.documentElement.dataset.useripple||(document.documentElement.dataset.useripple="enable",document.addEventListener("mousedown",$e)))}),[f]),c(i,"string"==typeof i?{ref:r,href:v,...N,...y}:{to:v||"",...N,...y},k)};Te.Toggle=function(e){const{ref:n,active:r,activeClass:a,after:s,disabled:l,children:o,className:c,toggable:u,onClick:p,onToggle:m,...h}=e,g=ce({active:r,done:!0});return d((()=>{Object.assign(g,{active:r,done:!0})}),[r]),t(Te,{ref:n,className:i(c,{[a||""]:g.active},"i-btn-toggle"),...h,onClick:e=>{p?.(e),!l&&(async()=>{const e=!!s,t=!g.active;(!u||await u())&&(Object.assign(g,{active:t,done:!e}),m?.(t),e&&setTimeout((()=>{g.done=!0}),16))})()},children:t("div",{className:i("i-btn-toggle-content",{"i-btn-toggle-active":g.done}),children:g.active?s??o:o})})},Te.Group=function(e){const{children:n,vertical:r,buttonProps:a,className:s,style:l}=e,o=u((()=>p.map(n,(e=>{const{type:t}=e;return t===Te?m(e,Object.assign({},e.props,a)):e}))),[n]);return t("div",{className:i(s,r?"i-btn-group-vertical":"i-btn-group-horizonal"),style:l,children:o})};const Pe=e=>{const{ref:t,icon:n,size:r="1.425em",rotate:a,style:s,className:l,...o}=e;if(!h(n))return n;const c={ref:t,style:{transform:a?`rotate(${a}deg)`:void 0,...s,width:r,height:r},className:i("i-icon",l),...o};return m(n,c)};function Ie(e){const{style:n,className:r,onClick:a}=e;return t(Te,{square:!0,className:i("i-affix-totop",r),style:{...n},onClick:a,children:t(Pe,{icon:t(C,{}),rotate:90})})}const Se=e=>{const{position:n="fixed",left:a,top:s,right:l,bottom:o,offset:c,style:h,className:v,children:f,getContainer:b=()=>document.body}=e,[y,k]=g(!1),N=u((()=>p.map(f,(e=>{if(e.type===Ie){const{onClick:t}=e.props;return m(e,{key:e.key,...e.props,onClick:e=>{const n=b();t?.(e),n?.scrollTo({top:0,left:0,behavior:"smooth"})}})}return e}))),[f,b]);return d((()=>{const e=b();if(!c||!e)return;const t=r({delay:160},(()=>{const t=e.scrollTop;k(t<c)}));return t(),e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}}),[c,b]),t("div",{className:i("i-affix",v,{"i-affix-hidden":y}),style:{...h,position:n,left:a,top:s,right:l,bottom:o},children:N})};Se.ToTop=Ie;const Me=n=>{const{content:r,contentClass:a,dot:s,dotSize:l,round:o,disabled:c,style:d,className:u,children:p}=n;return e("div",{style:d,className:i("i-badge",{rounded:o},u),children:[p,t("div",{className:i("i-badge-content",a,{"i-badge-dot":s,"i-badge-hidden":c}),style:{fontSize:l},children:r})]})},Oe=n=>{const{hideShadow:r,border:a,className:s,children:l,header:o,footer:c,...d}=n;return e("div",{className:i("i-card",s,{shadow:!r,"i-card-bordered":a}),...d,children:[o&&t("div",{className:"i-card-header",children:o}),l&&t("div",{className:"i-card-content",children:l}),c&&t("div",{className:"i-card-footer",children:c})]})};var Ee;function je(e,t,n={}){const{refWindow:i,gap:r=0,offset:a=0,position:s="top",align:l}=n;if(!e||!t)return[0,0,{arrowX:0,arrowY:0,arrowPos:"bottom"}];const o=e.getBoundingClientRect(),c=t.getBoundingClientRect();let d=window.innerWidth,u=window.innerHeight,{left:p,top:m,right:h,bottom:g,width:v,height:f}=o;const{height:b,width:y}=c;if(!i){const t=e.offsetParent?.getBoundingClientRect();d=t?.width||d,u=t?.height||u,p=e.offsetLeft,m=e.offsetTop,h=p+o.width,g=m+o.height}let k=0,N=0,C=0,w=0,x="bottom";switch(s){case"left":case"right":k=f!==b?Le({containerSize:u,targetSize:f,targetOffset:m,contentSize:b,gap:r,align:l}):m,w=k<m?m-k+f/2:f/2;const e=p-a-y,t=h+a+y;if("left"===s){const n=e<0&&t<=d;N=n?h+a:e,C=n?0:y,x=n?"left":"right"}else{const n=d>t||e<0;N=n?h+a:e,C=n?0:y,x=n?"left":"right"}break;case"top":case"bottom":N=v!==y?Le({containerSize:d,targetOffset:p,targetSize:v,contentSize:y,gap:r,align:l}):p,C=N>p?y/2:p-N+v/2;const n=m-a-b,i=g+a+b;if("top"===s){const e=n<0&&i<=u;k=e?g+a:n,w=e?0:b,x=e?"top":"bottom"}else{const e=u>i||n<0;k=e?g+a:n,w=e?0:b,x=e?"top":"bottom"}}return[N,k,{arrowX:C,arrowY:w,arrowPos:x}]}function Be(e,t){const{width:n,height:i}=t.getBoundingClientRect(),r=t.offsetParent;let a,s,l=0,o=0;if(r){const{width:e,height:t,left:n,top:i}=r.getBoundingClientRect();a=e,s=t,o=i-(r.scrollTop??0),l=n}else a=window.innerWidth,s=window.innerHeight;const c=e.pageX-l,d=e.pageY-o;return[c+n>=a&&c-n>0?c-n:c,d+i>=s&&d-i>0?d-i:d]}function Le({containerSize:e,targetSize:t,targetOffset:n,contentSize:i,gap:r,align:a="center"}){const s=n+t/2;switch(a){case"start":return n+i>e?e-i-r:n;case"center":return t>=i?s-i/2:s+i/2+r>e?n+t-i:s-i/2-r<0?r:s-i/2;case"end":const a=n+t-i;return a>0?a:r;default:return s-i/2}}function Ae(e){return e.map((e=>["string","number"].includes(typeof e)?{label:e,value:e}:e))}function Ye(e,t={}){const{precision:n,thousand:i}=t,r=e.toFixed(n);if(!i)return r;const a=r.split("."),s=a[0].replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,`$&${i}`);return 1===a.length?s:`${s}.${a[1]}`}function Ve(e,t=document.body){const n=document.createElement("div");t.append(n);const i=pe(n),r=setTimeout((()=>{i?.render(e)}),0);return()=>{n?.remove(),i?.unmount(),r&&clearTimeout(r)}}function He(e){return e.match(/\.([^\./\?]+)($|\?)/)?.[1]}function We(e,t){switch(!0){case["jpg","jpeg","png","webp","svg"].includes(e)||t?.startsWith("image/"):return Ee.IMAGE;case["mp4","avi"].includes(e)||t?.startsWith("video/"):return Ee.VIDEO;default:return Ee.UNKNOWN}}function Fe(e,t=2){if(!+e)return"0 Bytes";const n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,i)).toFixed(n))} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}`}function qe(e,t,n){return e<t?t:e>n?n:e}!function(e){e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.PDF="PDF",e.EXCEL="EXCEL",e.TXT="TXT",e.UNKNOWN="UNKNOWN"}(Ee||(Ee={}));function Re(n){const{type:r="default",label:a,name:s,value:l=!1,className:o,status:c="normal",message:u,disabled:p,partof:m,children:h,onChange:g,...v}=n,f=ce({value:l,status:c,message:u});return d((()=>{f.value=l}),[l]),e("label",{className:i("i-checkbox-item",{[`i-checkbox-${f.status}`]:"normal"!==f.status,disabled:p},o),...v,children:[t("input",{type:"checkbox",name:s,className:i("i-checkbox-input",{[`i-checkbox-${r}`]:!m,"i-checkbox-partof":m}),checked:f.value,disabled:p,onChange:e=>{const t=e.target.checked;Object.assign(f,{value:t,status:c,message:u}),g?.(t,e)}}),t("span",{className:"i-checkbox-text",children:h||a}),f.message&&e("span",{className:"i-checkbox-message",children:["*",f.message]})]})}function Xe(n){const{label:r,name:a,options:s=[],value:l="",type:o="default",optionInline:c=!0,labelInline:p,disabled:m,status:h="normal",message:g,required:v,className:f,onChange:b,...y}=n,k=ce({value:l}),N=u((()=>Ae(s)),[s]);return d((()=>{k.value=l}),[l]),e("div",{className:i("i-checkbox i-input-label",{[`i-checkbox-${h}`]:"normal"!==h,"i-input-inline":p},f),...y,children:[r&&e("span",{className:"i-input-label-text",children:[v&&t("span",{className:"error",children:"*"}),r,g&&t("p",{className:"i-checkbox-message",children:g})]}),t("div",{className:i("i-checkbox-options",{"i-options-block":!c,"i-checkbox-options-button":"button"===o}),children:N.map((e=>t(Re,{name:a,value:k.value.includes(e.value),type:o,disabled:m||e.disabled,onChange:(t,n)=>((e,t,n)=>{const i=[...k.value],r=i.findIndex((e=>e===t.value));e&&r<0?i.push(t.value):!e&&r>-1&&i.splice(r,1),k.value=i,b?.(i,t,n)})(t,e,n),children:e.label},e.value)))})]})}Xe.Item=Re;const Ue=e=>{const{as:r="a",active:s,className:l,icon:o=t(w,{}),...d}=e;return s?c(r,{className:i("i-helpericon",l),...d},[c(Pe,{key:a(3),icon:o})]):t(n,{})};const Ge=n=>{const{active:r,items:a,multiple:s,border:l,headerClickable:o,className:c,children:d,renderToggle:m=e=>t(e?x:$,{}),onCollapse:h,...g}=n,v=ce({active:r}),f=u((()=>a||(d&&p.map(d,((e,t)=>{const{key:n,props:i}=e,{title:r,children:a,content:s,disabled:l,...o}=i;return{...o,key:n||t,title:r,content:a||s,disabled:l}}))||[])),[d]),b=(e,t)=>{const{key:n,disabled:i}=e;if(t?.stopPropagation(),i)return;if(!s)return v.active=v.active===n?void 0:n,void h?.(n,void 0!==v.active);Array.isArray(v.active)||(v.active=[]);const r=v.active.findIndex((e=>e===n));r>-1?v.active.splice(r,1):void 0!==n&&v.active.push(n),h?.(n,r<0)};return t("div",{className:i("i-collapse",{"i-collapse-bordered":l},c),...g,children:f.map((n=>{const{key:r,title:a,content:l,disabled:c,className:d,...u}=n,p=s?(v.active||[]).includes(r):v.active===r;return e("div",{className:i("i-collapse-item",d,{"i-collapse-active":p,"i-collapse-disabled":c}),...u,children:[e("div",{className:"i-collapse-header",onClick:()=>(e=>{o&&b(e)})(n),children:[a,t(Ue,{active:!0,className:"i-collapse-toggle",icon:m(p),onClick:e=>b(n,e)})]}),t("div",{className:"i-collapse-content",children:l})]},r)}))})};function Ke(e){const{className:n,...r}=e;return t(z,{className:i("i-empty",n),...r})}function Ze({justify:e,col:t,row:n,colSpan:i=1,rowSpan:r=1}){return{"--datagrid-justify":e,gridArea:`${n+1} / ${t+1} / ${n+1+r} / ${t+1+i}`,insetInline:`var(--datagrid-cell-inset-${t})`}}function _e(e){const{column:n,row:r,col:a,data:s,cellEllipsis:l,onCellClick:o,onCellDoubleClick:c}=e,{id:d,fixed:u,justify:p,rowSpan:m,render:h}=n,g=Ze({justify:p,fixed:u,col:a,row:r,rowSpan:m});return t("div",{className:i("i-datagrid-cell",{[`i-datagrid-cell-fixed-${u}`]:u}),"data-col":d,style:g,onClick:e=>o?.(s,n,r,a,e),onDoubleClick:e=>c?.(s,n,r,a,e),children:h?.(s[d],s,a)??t("div",{className:i("i-datagrid-cell-content",{"i-datagrid-cell-content-ellipsis":l}),children:s[d]})})}Ge.Item=function(e){return t(n,{})};const Je=new Set,Qe=new Set,et=new Set,tt="ontouchend"in document,nt={MOVE:tt?"touchmove":"mousemove",UP:tt?"touchend":"mouseup",KEYDOWN:"keydown"};function it(e,t){d((()=>(Je.add(e),()=>{Je.delete(e)})),[e])}function rt(e,t){d((()=>(Qe.add(e),()=>{Qe.delete(e)})),[e])}function at(e,t){d((()=>{if(!t?.disabled)return et.add(e),()=>{et.delete(e)}}),[e])}function st(e){const t=new WeakMap,n=new IntersectionObserver((e=>{e.map((e=>{const n=t.get(e.target);n?.(e.target,e.isIntersecting)}))}),e);return{observe:function(e,i){t.get(e)||(t.set(e,i),e&&n.observe(e))},unobserve:function(e){e&&n.unobserve(e),t.delete(e)},disconnect:function(){n.disconnect()}}}function lt(e){const{index:n,onWidthChange:i}=e,r=ce({resizing:!1,x:0,width:0});return it((e=>{if(!r.resizing)return;e.preventDefault();const t=r.width+e.pageX-r.x;t<=24||i(n,t)})),rt((()=>{r.resizing&&(r.resizing=!1)})),t("i",{className:"i-datagrid-resizor",onMouseDown:e=>{const t=e.target.offsetParent.offsetWidth;Object.assign(r,{x:e.pageX,resizing:!0,width:t})},onClick:e=>e.stopPropagation()})}document.addEventListener(nt.MOVE,(e=>{for(const t of Je.values())t(e)}),{passive:!1}),document.addEventListener(nt.UP,(e=>{for(const t of Qe.values())t(e)})),document.addEventListener(nt.KEYDOWN,(e=>{for(const t of et.values())t(e)}));const ot=e=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e,children:t("g",{fill:"none",children:t("path",{d:"M9 17.898c0 1.074 1.265 1.648 2.073.941l6.31-5.522a1.75 1.75 0 0 0 0-2.634l-6.31-5.522C10.265 4.454 9 5.028 9 6.102v11.796z",fill:"currentColor"})})});function ct(n){const{type:r}=n;return e("a",{className:i("i-datagrid-sorter",{[`i-datagrid-sorter-${r}`]:r}),children:[t(ot,{className:"i-datagrid-sorter-caret"}),t(ot,{className:"i-datagrid-sorter-caret"})]})}function dt(e){const{row:n,data:i,columns:r,cellEllipsis:a,onRowClick:s,onCellClick:l,onCellDoubleClick:o}=e;return t("div",{className:"i-datagrid-row",onClick:()=>s?.(i,n),children:r.map(((e,r)=>t(_e,{column:e,col:r,row:n,data:i,cellEllipsis:a,onCellClick:l,onCellDoubleClick:o},r)))})}function ut(n){const{columns:r,resizable:a,cellEllipsis:s,sortBy:l,sortType:o,onWidthChange:c,onHeaderClick:d}=n;return t("div",{className:"i-datagrid-header i-datagrid-row",children:r.map(((n,r)=>{const{id:u,title:p,fixed:m,colSpan:h,sorter:g,justify:v,renderHeader:f}=n,b=Ze({justify:v,row:0,col:r,colSpan:h}),y=l===u?o:"";return e("div",{"data-col":u,className:i("i-datagrid-cell",{"i-datagrid-has-sorter":g,"i-datagrid-cell-fixed":m}),style:{...b,insetBlockStart:0},onClick:e=>d?.(n,e),children:[f?.(n,r)??t("div",{className:i("i-datagrid-cell-content",{"i-datagrid-cell-content-ellipsis":s}),children:p||u}),g&&t(ct,{type:y}),a&&t(lt,{index:r,onWidthChange:c})]},r)}))})}const pt=n=>{const{data:r=[],columns:a=[],border:s,striped:l,header:o=!0,resizable:c,cellPadding:p=".5em",cellEllipsis:m,empty:h=t(Ke,{}),loading:g,height:f="unset",style:b,className:y,renderLoading:k=()=>t(ze,{size:"1.5em",className:"color-3"}),onCellClick:N,onRowClick:C,onHeaderClick:w,onSort:x,onScroll:$,onResize:z}=n,D=v(null),T=v(null),P=ce({rows:r,widths:a.map((e=>e.width??"min-content")),sortBy:"",sortType:""}),I=u((()=>{const{widths:e}=P,t={...b,"--grid-template-columns":e.map((e=>"number"==typeof e?`${e}px`:e)).join(" ")};if(!c)return t;const n=a.map(((t,n)=>{const{fixed:i}=t;return i?e[n]:0}));return a.map(((e,i)=>{const{fixed:r}=e;if(r)if(0===i)t["--datagrid-cell-inset-0"]=0;else if(i===n.length-1)t["--datagrid-cell-inset-"+(n.length-1)]="auto 0";else{const e="left"===r,a=(e?n.slice(0,i):n.slice(i+1)).reduce(((e,t)=>e+t))+"px",s=e?`${a} auto`:`auto ${a}`;t[`--datagrid-cell-inset-${i}`]=s}})),t}),[P.widths,c]),S=u((()=>{const{sortBy:e,sortType:t}=P;if(e&&!x){const n=a.find((t=>t.id===e))?.sorter,i="function"==typeof n?n:(t,n)=>n[e]-t[e],s=[...r].sort(i);return"desc"===t?s:s.reverse()}return r}),[r,a,P.sortBy,P.sortType]);d((()=>{if(!D.current)return;const{current:e}=D,t=e.querySelector(".i-datagrid-row")?.children;t?.length&&(P.widths=Array.from(t).map((e=>e.offsetWidth)))}),[a,c]),d((()=>{g&&T.current?.scrollTop(0)}),[g]);const M={"--cell-padding":p,...I};return e(me,{ref:T,autoHide:!0,autoHeight:!0,autoHeightMax:f,style:M,className:i("i-datagrid-container",y,{"i-datagrid-bordered":s,"i-datagrid-striped":l}),renderView:e=>t("div",{...e,className:i({"i-datagrid-loading":g})}),onScroll:$,children:[e("div",{ref:D,className:"i-datagrid",children:[o&&t(ut,{columns:a,resizable:c,sortType:P.sortType,sortBy:P.sortBy,cellEllipsis:m,onWidthChange:(e,t)=>{if(!c)return;const[...n]=P.widths;n[e]=t,P.widths=n,z?.(a[e],t)},onHeaderClick:(e,t)=>{if(e?.sorter){const[t,n]=function(e,t,n){const i=["desc","asc"];if(e===n){const e=i.findIndex((e=>e===t))+1,r=i[e]||"";return[""===r?"":n,r]}return[n,"desc"]}(P.sortBy,P.sortType,e.id);Object.assign(P,{sortBy:t,sortType:n}),x?.(t,n)}w?.(e,t)}}),S.map(((e,n)=>t(dt,{row:n+(o?1:0),data:e,cellEllipsis:m,columns:a,onCellClick:N,onRowClick:C},n))),S.length<1&&h]}),g&&k()]})},mt=n=>{const{data:r,colon:a,columns:s=1,gap:l=".5em",align:o,labelWidth:c,labelAlign:d,vertical:u,equally:p,style:m,className:h}=n;return t("div",{className:i("i-description",h),style:{"--description-label-width":c,gridTemplateColumns:`repeat(${s}, ${p?"1fr":"auto"})`,gap:l,textAlign:o,...m},children:r.map(((n,r)=>{const{label:s,value:l,style:o,hidden:c,rowSpan:p=1,colSpan:m=1}=n;return c?t(f,{},r):e("div",{className:i("i-description-item",{"i-description-item-vertical":u}),style:{gridColumn:`span ${m}`,gridRow:`span ${p}`,...o},children:[s&&e("div",{className:"i-description-label",style:{textAlign:d},children:[s,a]}),t("div",{className:"i-description-value",children:l})]},r)}))})};function ht(n){const{visible:r,position:a="left",header:s,footer:l,backdropClosable:o=!0,hideCloseButton:c,keepDOM:u,className:p,disabledEsc:m,children:h,onVisibleChange:g,onClose:f,...b}=n,y=v(!0),k=ce({show:r,active:r,init:!1});d((()=>{r?N():C()}),[r]);const N=()=>{y.current&&(k.show=!0,g?.(!0),y.current=!1,setTimeout((()=>{k.active=!0,y.current=!0,k.init=!0}),24))},C=()=>{y.current&&(y.current=!1,k.active=!1,setTimeout((()=>{u||(k.show=!1),g?.(!1),y.current=!0,f?.()}),240))};return at((e=>{"Escape"===e.code&&r&&C()}),{disabled:m}),he(k.show&&t("div",{className:i("i-backdrop-drawer",p,{"i-active":k.active}),onClick:function(){o&&C()},...b,children:e("div",{className:i("i-drawer",`i-drawer-${a}`),onClick:e=>e.stopPropagation(),children:[e("header",{className:"i-drawer-header",children:[s,t(Ue,{active:!c,className:"i-drawer-close",onClick:C})]}),t("div",{className:"i-drawer-content",children:h}),t("div",{className:"i-drawer-footer",children:l})]})}),document.body)}const gt=n=>{const{ref:r,active:a,type:s,align:l,disabled:o,label:c,style:d,className:u,children:p,...m}=n;return e("li",{ref:r,className:i("i-list-item",u,{"i-list-item-active":a,"i-list-option":"option"===s,disabled:o}),style:{alignItems:l,...d},...m,children:[void 0!==c&&t("span",{className:"i-list-item-label",children:c}),p]})},vt=e=>{const{label:n,type:r,className:a,children:s,...l}=e;return t("ul",{className:i("i-list",a),...l,children:p.map(s,((e,t)=>{const i="function"==typeof n?n(t):n,{type:r,props:a}=e;return r===gt?m(e,{label:i,...a,type:r}):e}))})};vt.Item=gt;const ft=n=>{const{ref:r,getContainer:a=e=>e?.offsetParent??document.body,trigger:s,arrow:l,arrowProps:o={},className:c,children:d,...p}=n,m=u((()=>{let{left:e,top:t,pos:n}=o,i="";switch(n){case"left":e+=2,i="translate(-100%, -50%) rotate(180deg)";break;case"right":e-=2,i="translate(0, -50%)";break;case"top":t-=2,i="translate(-50%, -50%) rotate(-90deg)";break;case"bottom":t+=2,i="translate(-50%, -50%) rotate(90deg)"}return{left:e,top:t,transform:i}}),[o]),h=e("div",{ref:r,className:i("i-popup",c),...p,children:[l&&t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"i-popup-arrow",style:m,children:t("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z"})}),d]});return he(h,a(s))};function bt(i){const{visible:r=!1,content:a,trigger:s="hover",gap:l=12,offset:o=8,fixed:c,position:g="top",showDelay:f=16,hideDelay:y=12,touchable:k,arrow:N=!0,align:C,fitSize:w,watchResize:x,clickOutside:$=!0,disabled:z,referToWindow:D,style:T,className:P,getContainer:I,children:S,onVisibleChange:M}=i,O=v(null),E=v(null),j=v(null),B=v(""),L=ce({show:!1,style:{position:c?"fixed":"absolute"},arrowProps:{}});rt((e=>{if(!O.current||!E.current||!$)return;const t=e.target,n=O.current.contains(t)||E.current.contains(t);L.show&&!n&&H(!1)}));const A=()=>{j.current&&(clearTimeout(j.current),j.current=null)},Y=()=>{z||L.show&&("hover"!==s||"hover"===s&&!k)||(L.show=!0,B.current="showing",j.current=setTimeout((()=>{if("showing"!==B.current)return;const[e,t,{arrowX:n,arrowY:i,arrowPos:r}]=je(O.current,E.current,{position:g,gap:l,offset:o,align:C,refWindow:D});L.style={...L.style,opacity:1,transform:"none",left:e,top:t},L.arrowProps={left:n,top:i,pos:r},M?.(!0),A(),B.current=""}),f))},V=()=>{L.show&&(B.current="hiding",j.current=setTimeout((()=>{"hiding"===B.current?(L.style={...L.style,opacity:0,transform:"translate(0, 2px)"},setTimeout((()=>{L.show=!1,A(),M?.(!1),B.current=""}),160)):A()}),y))},H=e=>{void 0===e?L.show?V():Y():e?Y():V()},W=de((()=>({click:{onClick:()=>H(!0)},hover:{onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1)},focus:{onFocus:()=>H(!0),onBlur:()=>H(!1)},contextmenu:{onContextMenu:e=>{if(e.preventDefault(),e.stopPropagation(),L.show){const[t,n]=Be(e,E.current);L.style={...L.style,left:t,top:n}}else L.show=!0,j.current=setTimeout((()=>{const[t,n]=Be(e,E.current);L.style={...L.style,opacity:1,transform:"none",left:t,top:n},A(),M?.(!0)}),f)}},none:{}})),[]),F=u((()=>{if(!k)return{};const e={};return"hover"===s&&(e.onMouseEnter=()=>{A()},e.onMouseLeave=()=>H(!1)),e}),[k,s]),q=()=>{if(!L.show)return;const[e,t,{arrowX:n,arrowY:i,arrowPos:r}]=je(O.current,E.current,{position:g,gap:l,offset:o,align:C,refWindow:D});Object.assign(L,{style:{...L.style,left:e,top:t},arrowProps:{left:n,top:i,pos:r}})};return d((()=>{if("contextmenu"===s)return;const{observe:e,unobserve:t,disconnect:n}=function(){const e=new WeakMap,t=new ResizeObserver((t=>{t.map((t=>{const n=e.get(t.target);n?.(t.target)}))}));return{observe:function(n,i){e.get(n)||(n&&t.observe(n),e.set(n,i))},unobserve:function(n){n&&t.unobserve(n),e.delete(n)},disconnect:function(){t.disconnect()}}}();return O.current&&e(O.current,q),x&&E.current?(e(E.current,q),()=>{x&&E.current&&(t(E.current),O.current&&t(O.current),n())}):void 0}),[x,E.current,O.current]),b((()=>{if(!w||!L.show)return;const e=["top","bottom"].includes(g),t=O.current?.[e?"offsetWidth":"offsetHeight"];L.style={...L.style,[e?"width":"height"]:t}}),[L.show,w]),b((()=>{H(r)}),[r]),e(n,{children:[p.map(S,(e=>{if(!h(e))return;const{className:t,...n}=e.props;return Object.keys(W[s]).map((e=>{if(!n[e])return;const t=W[s][e];W[s][e]=i=>{t(),n[e](i)}})),m(e,{ref:O,className:t,...n,...W[s]})})),L.show&&t(ft,{ref:E,arrow:N&&"contextmenu"!==s,style:{...T,...L.style},arrowProps:L.arrowProps,className:P,...F,trigger:O.current,getContainer:I,children:a})]})}const{Item:yt}=vt,kt=e=>{const{width:n,content:i,children:r,...a}=e;return t(bt,{trigger:"click",position:"bottom",touchable:!0,content:t(vt,{className:"i-dropdown-content",style:{minWidth:n},children:i}),...a,children:r})};kt.Item=e=>{const{more:n,moreProps:i,onClick:r,...a}=e,s=t(yt,{onClick:e=>{e.stopPropagation(),r?.(e)},...a});return n?t(bt,{position:"right",touchable:!0,arrow:!1,align:"start",offset:10,hideDelay:240,...i,content:t(vt,{className:"i-dropdown-content",onClick:e=>e.stopPropagation(),children:n}),children:s}):s};const Nt=(e,t,n)=>document.execCommand(e,t,n),Ct={onIgnoreTagAttr:function(e,t,n){if(["data-","style"].includes(t.substr(0,5)))return t+'="'+ve(n)+'"'}},wt={bold:{icon:t(D,{}),onClick:()=>Nt("bold")},italic:{icon:t(T,{}),onClick:()=>Nt("italic")},underline:{icon:t(P,{}),onClick:()=>Nt("underline")},strike:{icon:t(I,{}),onClick:()=>Nt("strikeThrough")},redo:{icon:t(S,{}),onClick:()=>Nt("redo")},undo:{icon:t(M,{}),onClick:()=>Nt("undo")},clear:{icon:t(O,{}),onClick:()=>Nt("removeFormat")}},xt={simple:["undo","redo","bold","italic","underline","strike","clear"],all:Object.keys(wt)};function $t(e,i){const{controlBtnProps:r}=i;return("string"==typeof e?xt[e]:e).map((e=>{if(wt[e]){const{icon:n,render:a,onClick:s}=wt[e];return a?a(i):t(Te,{...r,onClick:s,children:t(Pe,{icon:n})},e)}return t(n,{},e)}))}const zt=n=>{const{ref:i,width:r,height:a="10em",placeholder:s,autosize:l,controls:o="simple",onInput:c}=n,d=v(null);y(i,(()=>({setValue(e){if(!d.current)return;const t=ge(e,Ct);d.current.innerHTML=t},getSafeValue(){const e=d.current?.innerHTML??"";return ge(e,Ct)}})));return e("div",{className:"i-editor",style:{[l?"minHeight":"height"]:a,width:r},children:[t("div",{className:"i-editor-controls",children:$t(o,{controlBtnProps:{square:!0,flat:!0,size:"small"}})}),t("div",{ref:d,className:"i-editor-content","data-placeholder":s,contentEditable:!0,onPaste:async e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");Nt("insertText",!1,t)},onInput:e=>{let t=d.current?.innerHTML??"";["<br>","\n"].includes(t)&&d.current&&(t="",d.current.innerHTML=t),c?.(t,e)},onKeyDown:e=>{switch(e.key){case"Tab":e.preventDefault(),Nt("insertHTML",!1,"&#09;");break;case"Enter":if(e.preventDefault(),Nt("insertLineBreak"),!d.current)return;if(d.current.scrollBy({top:20,left:-1e3,behavior:"smooth"}),!l)return;d.current.style.height=`${d.current.scrollHeight}px`}}})]})},Dt=e=>{const{as:n="div",align:r,justify:a,direction:s,wrap:l,gap:o,columns:c,className:d,style:p,...m}=e,h=u((()=>{if(c)return"number"==typeof c?`repeat(${c}, 1fr)`:c}),[c]);return t(n,{...m,style:{alignItems:r,justifyContent:a,gap:o,flexDirection:s,flexWrap:!0===l?"wrap":l,gridTemplateColumns:h,...p},className:i(d,{[c?"grid":"flex"]:!0})})},Tt=k({});class Pt{id;data={};cacheData={};rules={};constructor(){this.id=a(8),this.data={}}get(e){return e?this.data[e]:this.data}set(e,t){const n=this.id;if(this.data)return"string"==typeof e?(this.data[e]=t,this.cacheData[e]=t,void fe.publish(`${n}:set:${e}`,t)):void Object.keys(e).map((t=>{this.data[t]=e[t],this.cacheData[t]=e[t],fe.publish(`${n}:set:${t}`,e[t])}))}delete(e){delete this.data[e]}clear(){this.data&&(this.cacheData={},Object.keys(this.data).map((e=>{fe.publish(`${this.id}:set:${e}`,void 0),this.data[e]=void 0})))}async validate(e){const{id:t,rules:n,data:i}=this;if(!n)return i;if(e){const r=n[e],a={validator:e=>Array.isArray(e)?e.length>0:![void 0,null,""].includes(e),message:void 0};"function"==typeof r?a.validator=r:!0===r?a.message="required":Object.assign(a,r);const s=a.validator?.(i[e],this);return s?(fe.publish(`${t}:invalid:${name}`,{message:null,status:"normal"}),!0):(fe.publish(`${t}:invalid:${e}`,{message:a.message,status:"error"}),!1)}let r=!0;return Object.keys(i).map((e=>{const a=n[e];if(void 0===a)return;const s={validator:e=>Array.isArray(e)?e.length>0:!!e,message:void 0};"function"==typeof a?s.validator=a:!0===a?s.message="required":Object.assign(s,a);const l=s.validator?.(i[e],this);l?fe.publish(`${t}:invalid:${e}`,{message:null,status:"normal"}):(fe.publish(`${t}:invalid:${e}`,{message:s.message,status:"error"}),r=!1)})),!!r&&Promise.resolve(i)}}const It=e=>{const{form:n={},rules:r,initialValues:a,style:s,className:l,width:o,columns:c=1,gap:p="1em",children:m,onEnter:h,...g}=e,v=u((()=>{if(c)return"number"==typeof c?"minmax(0, 1fr) ".repeat(c):c}),[c]);return d((()=>{Object.assign(n,{data:{...a},rules:r})}),[n]),t(Tt,{value:n,children:t("form",{style:{...s,width:o,gap:p,gridTemplateColumns:v},className:i("i-form",l),onKeyDown:e=>{13===e.keyCode&&h?.(n.data,n)},...g,children:m})})};function St(i){const{title:r,footer:a,hideCloseButton:s,footerLeft:l,okButtonProps:o,cancelButtonProps:c,children:d,onOk:p,onClose:m}=i,h=r||!s,g=async()=>{await(p?.())||m?.()},v=u((()=>{if(a||null===a)return a;const i=Object.assign({children:"确定",onClick:g},o),r=Object.assign({secondary:!0,children:"关闭",onClick:m},c);return e(n,{children:[l,t(Te,{...i}),t(Te,{...r})]})}),[a,o,c]);return e(n,{children:[h&&e("header",{className:"i-modal-header",children:[r&&t("b",{children:r}),t(Ue,{active:!s,className:"i-modal-close",onClick:m})]}),t("div",{className:"i-modal-content",children:d}),t("footer",{className:"i-modal-footer",children:v})]})}function Mt(n){const{visible:r,title:a,footer:s,okButtonProps:l,cancelButtonProps:o,closable:c=!0,hideBackdrop:u,backdropClosable:p=!0,hideCloseButton:m,disableEsc:h,width:f,height:b,customized:y,fixed:k,hideShadow:N,children:C,style:w,className:x,keepDOM:$,footerLeft:z,onClick:D,onVisibleChange:T,onClose:P,onOk:I,...S}=n,[M,O]=g(r),[E,j]=g(!1),[B,L]=g(!1),A=v(!0),Y=()=>{if(A.current){if(A.current=!1,!c)return L(!0),void setTimeout((()=>{L(!1),A.current=!0}),400);j(!1),setTimeout((()=>{!$&&O(!1),A.current=!0,T?.(!1),P?.()}),240)}};return at((e=>{"Escape"===e.code&&r&&Y()}),{disabled:h}),d((()=>{r?A.current&&((!$||!M)&&O(!0),A.current=!1,setTimeout((()=>{j(!0),T?.(!0),A.current=!0}),24)):Y()}),[r]),M?he(t("div",{className:i("i-modal-container",{"i-modal-backdrop":!u,"i-modal-customized":y,"i-modal-active":E,fixed:k},x),style:w,onClick:function(){p&&Y()},children:e("div",{className:i("i-modal",{bounced:B,shadow:!N}),style:{width:f,height:b},onClick:e=>{e.stopPropagation(),document.documentElement.click(),D?.(e)},...S,children:[y&&C,!y&&t(St,{title:a,hideCloseButton:m,footer:s,okButtonProps:l,cancelButtonProps:o,children:C,footerLeft:z,onOk:I,onClose:Y})]})}),document.body):null}It.useForm=function(e){const t=v(null);return t.current||(t.current=e??new Pt),t.current},It.Field=function(e){const{name:t,required:n,children:i}=e,r=ce({value:void 0,status:"normal",message:void 0,update:0}),a=N(Tt),{id:s}=a,l=u((()=>p.map(i,(e=>{if(!h(e))return null;const{onChange:i}=e.props,{value:s,status:l,message:o}=r;return m(e,{value:s,status:l,message:o,required:n,onChange:(...e)=>{var n;n=e[0],t&&a.set(t,n),i?.(...e),Object.assign(r,{status:"normal",message:void 0})}})}))),[i,r.update]);return d((()=>{if(t)return fe.subscribe(`${s}:set:${t}`,((e,t)=>{r.value=t,r.update+=1})),fe.subscribe(`${s}:invalid:${t}`,((e,t)=>{Object.assign(r,t),r.update+=1})),Promise.resolve().then((()=>{a.set(t,a.cacheData[t]??void 0)})),()=>{fe.unsubscribe(`${s}:set:${t}`),fe.unsubscribe(`${s}:invalid:${t}`),a.delete(t)}}),[t,i]),t?l:i};const Ot=e=>{const{ref:n}=e,i=ce({}),r=Object.assign({},e,i);return y(n,(()=>({update:(e={})=>{Object.assign(i,e)},close:()=>{i.visible=!1,r.closable||Promise.resolve().then((()=>{i.visible=!0}))}}))),t(Mt,{...r})},Et=e=>{const{as:n="span",size:r,weight:a,decoration:s,gradient:l,wave:o,style:c,className:d,children:p}=e,m=u((()=>l&&Array.isArray(l)?{backgroundImage:`-webkit-linear-gradient(${l.join(",")})`,backgroundClip:"text"}:{}),[l]);return t(n,{style:{fontSize:r,fontWeight:a,textDecoration:s,...m,...c},className:i(d,{"i-text-gradient":l,"i-text-gradient-wave":o}),children:p})};function jt(n){const{value:i,circleSize:r=40,lineWidth:a=8}=n;return e("div",{className:"i-progress-circle",children:[e("svg",{width:r,height:r,children:[t("circle",{cx:r/2,cy:r/2,r:r/2-a/2,fill:"none",stroke:"var(--background-opacity-2)",strokeWidth:a}),t("circle",{cx:r/2,cy:r/2,r:r/2-a/2,fill:"none",stroke:"var(--color-main)",strokeWidth:a,strokeDasharray:100,pathLength:100,className:"i-progress-circle-path",strokeLinecap:"round",style:{strokeDashoffset:`calc(100 - ${i})`}})]}),e("span",{className:"i-progress-circle-value",children:[t("span",{children:i}),t(Et,{size:".81em",className:"color-7",children:"%"})]})]})}Et.Number=function(e){const{count:n,to:i,decimal:r,thousand:a=",",duration:s=2400,easing:l,...o}=e,[c,p]=g(n),m=u((()=>{if(void 0===c)return;const e=c.toFixed(r);return a?Ye(c,{precision:r,thousand:a}):e}),[c,a]);return d((()=>{void 0!==n&&void 0!==i&&function(e,t,n=1e3,i,r=e=>1-Math.pow(1-e,4)){const a=performance.now(),s=t-e;let l=requestAnimationFrame((function e(){l=requestAnimationFrame(e);let t=(performance.now()-a)/n;t>=1&&(t=1,cancelAnimationFrame(l));const o=s*r(t);i?.(o)}))}(n,i,s,(e=>p(n+e)),l)}),[i]),d((()=>p(n)),[n]),t(Et,{...o,children:m})},Et.Time=function(e){const{seconds:n,zero:i,units:r,...a}=e,s=u((()=>void 0===n?"":function(e,t){const n=[],{zero:i=!0,units:r=["",":",":"]}=t,a=r.length;let s=0;for(;s<a&&!(e<=0&&s>1);){const t=Math.round(e%60);e=Math.floor(e/60),n.unshift((i&&t<10?`0${t}`:t)+r[s++])}return n.join("")}(n,{zero:i,units:r})),[n]);return t(Et,{...a,children:s})},Et.HighLight=function(e){const{keyword:n,text:i,escape:r,caseSensitive:a,renderWord:s=e=>t("mark",{children:e}),...l}=e,o=u((()=>{const e=i;return be({searchWords:"string"==typeof n?[n]:n,textToHighlight:i,caseSensitive:a,autoEscape:r}).map(((n,i)=>{const{end:r,highlight:a,start:l}=n,o=e.slice(l,r);return a?t(f,{children:s(o)},i):o}))}),[n,i,r,a]);return t(Et,{...l,children:o})};const Bt=e=>{const{ref:n,value:r,lineWidth:a,vertical:s,barClass:l,dragging:o,renderCursor:c,onMouseDown:d,onTouchStart:u}=e;return t("div",{ref:n,className:i("i-progress",{"i-progress-vertical":s}),style:{[s?"width":"height"]:a},onMouseDown:d,onTouchStart:u,children:t("div",{className:i("i-progress-bar",l,{"no-transition":o}),style:{[s?"height":"width"]:`${r}%`},children:c&&t("a",{className:"i-progress-cursor",children:c(r??0)})})})},Lt=n=>{const{value:r=0,lineWidth:a=8,circleSize:s=40,precision:l=0,style:o,draggable:c=!0,type:p="line",barClass:m,vertical:h,label:g,labelInline:f,className:b,renderCursor:y,onChange:k,onDraggingChange:N}=n,C=v(null),w=ce({value:r,dragging:!1,size:0,start:0}),x=h?"pageY":"pageX",$=h?"top":"left",z=h?"height":"width",D=u((()=>{let e=+w.value.toFixed(l);return e=Math.min(100,e),e=Math.max(0,e),e}),[w.value,l]),T=e=>{if(!C.current||!c)return;e.touches&&(e=e.touches[0]);const t=C.current.getBoundingClientRect(),n=100*(e[x]-t[$])/t[z];Object.assign(w,{value:h?100-n:n,size:t[z],start:t[$],dragging:!0}),N?.(!0)};return it((e=>{if(!w.dragging||!c)return;e.preventDefault(),e.touches&&(e=e.touches[0]);const{start:t,size:n}=w,i=e[x]-t;if(i<0||i>n)return;const r=100*(e[x]-t)/n;w.value=h?100-r:r})),rt((()=>{w.dragging&&c&&(k?.(D),w.dragging=!1,N?.(!1))})),d((()=>{w.value=r>100?100:r<0?0:r}),[r]),e("div",{className:i("i-input-label",b,{"i-input-inline":f}),style:o,children:[g&&t("span",{className:"i-input-label-text",children:g}),"line"===p&&t(Bt,{ref:C,vertical:h,lineWidth:a,barClass:m,dragging:w.dragging,value:w.value,renderCursor:y,onMouseDown:T,onTouchStart:T}),"circle"===p&&t(jt,{value:w.value,circleSize:s,lineWidth:a})]})},At=n=>{const{ref:r,style:a,hideControls:l,autoplay:o,muted:c,volume:u=50,height:p,width:m,useOriginControls:h,timeProgressProps:g={barClass:"bg-blue"},volumeProgressProps:f={barClass:"bg-blue"},className:b,onFullScreenChange:k,...N}=n,C=ce({playing:o,volume:c?0:u,volumeCache:0,muted:c,current:0,duration:0,isFullscreen:!1,controlHidden:!0,draggingProgress:!1}),w=v(null),x=v(null),$=e=>{const t=e.target;t.paused||C.draggingProgress||Object.assign(C,{current:t.currentTime})},z=e=>{C.playing=!e.target.paused},D=()=>{const e=w.current?.parentElement;e&&(C.isFullscreen=document.fullscreenElement===e)},T=e=>{const t=e.target;Object.assign(C,{volume:100*t.volume,muted:0===t.volume})},P=()=>{const e=w.current;e&&(e.paused?e.play():e.pause())},I=()=>{const e=w.current;e&&(e.currentTime=0,e.pause())},S=()=>{const e=w.current?.parentElement;var t;e&&(C.isFullscreen?document.exitFullscreen?.():(t=e,t.requestFullscreen?.()),k?.(!C.isFullscreen))},M=!l&&!h,O=()=>{x.current&&(clearTimeout(x.current),x.current=null)},H=s({interval:900},(()=>{M&&C.controlHidden&&(C.controlHidden=!1,O(),x.current=setTimeout((()=>{C.controlHidden=!0}),1e3))}));y(r,(()=>({play:()=>{const e=w.current;e&&e.play()},pause:()=>{const e=w.current;e&&e.pause()},stop:I,fullscreen:S,getVideo:()=>w.current}))),d((()=>{const e=w.current;if(e)return e.addEventListener("timeupdate",$),e.addEventListener("play",z),e.addEventListener("pause",z),e.addEventListener("volumechange",T),document.addEventListener("fullscreenchange",D),()=>{O(),e.removeEventListener("timeupdate",$),e.removeEventListener("play",z),e.removeEventListener("pause",z),e.removeEventListener("volumechange",T),document.removeEventListener("fullscreenchange",D)}}),[]);const W=C.current/C.duration*100;return e("div",{className:i("i-video",b),style:{height:p,width:m,...a},onClick:P,onDoubleClick:()=>S(),onMouseMove:H,children:[t("video",{ref:w,onCanPlay:e=>{const t=e.target;Object.assign(C,{duration:t.duration,current:t.currentTime}),t.volume=C.volume/100},...N,controls:h}),M&&e("div",{className:i("i-video-controls",{"i-video-controls-hidden":C.controlHidden}),onClick:e=>e.stopPropagation(),children:[t(Te.Toggle,{className:"i-video-btn",flat:!0,square:!0,after:t(Pe,{icon:t(E,{})}),active:C.playing,onClick:P,children:t(Pe,{icon:t(j,{})})}),t(Te,{className:"i-video-btn",flat:!0,square:!0,onClick:I,children:t(Pe,{icon:t(B,{})})}),e("span",{className:"i-video-times font-sm",children:[t(Et.Time,{seconds:C.current})," /",t(Et.Time,{seconds:C.duration})]}),t(Lt,{...g,value:W,onChange:e=>{const t=w.current;t&&(t.currentTime=C.duration*e/100)},onDraggingChange:e=>{C.draggingProgress=e}}),e("div",{className:"i-video-control-volume",children:[t(Te.Toggle,{className:"i-video-btn",flat:!0,square:!0,active:C.volume<=0,after:t(Pe,{icon:t(L,{}),style:{padding:".125em"}}),onClick:()=>{const e=w.current;if(e)return e.volume>0?(C.volumeCache=e.volume,void(e.volume=0)):void(e.volume=0===C.volumeCache?.5:C.volumeCache)},children:t(Pe,{icon:t(A,{})})}),t("div",{className:"i-video-volume",children:t(Lt,{style:{height:100},vertical:!0,...f,value:C.volume,onChange:e=>{const t=w.current;t&&(t.volume=e/100)}})})]}),t(Te.Toggle,{className:"i-video-btn",flat:!0,square:!0,after:t(Pe,{icon:t(Y,{})}),active:C.isFullscreen,onClick:()=>S(),children:t(Pe,{icon:t(V,{})})})]})]})};function Yt(n){const{name:i,suffix:r,type:a}=n;switch(a){case Ee.IMAGE:return t("img",{src:n.src});case Ee.VIDEO:return t(At,{...n});default:return e("div",{className:"i-preview-unknown",children:[t(Pe,{icon:t(H,{}),size:"3em"}),t("h5",{className:"mt-4",children:i||r||"?"})]})}}function Vt(r){const{items:a=[],initial:l=0,renderFile:o=Yt,onRotate:c,onChange:d,onClose:p,onZoom:m}=r,h=ce({current:l,rotate:0,scale:1,translate:[0,0],start:[0,0],dragging:!1,controlHidden:!0}),g=v(null),f=v([0,0]),b=v(null),y=u((()=>a.map((e=>{const t={src:""};return"string"==typeof e?t.src=e:Object.assign(t,e),t.suffix=He(t.src)||"",t.type=We(t.suffix,e.type),t}))),[a]),{file:k,content:N}=u((()=>{const e=y[h.current];return{file:e,content:o(e)}}),[h.current,a]),C=k.type===Ee.IMAGE,x=e=>{const t=y.length,{current:n}=h;h.current=e>=t?0:e<0?t-1:e,d?.(h.current,n),h.rotate=y[h.current].rotate||0,1!==h.scale&&(h.scale=1,m?.(1)),c?.(h.rotate),h.translate=f.current=[0,0]},$=e=>{h.rotate+=e,c?.(h.rotate)},z=s({interval:60},(e=>{if(!C)return;let t=h.scale+(e.deltaY<0?.05:-.05);t>2&&(t=2),t<.25&&(t=.25),m?.(t),h.scale=t})),D=s({interval:300},(()=>{h.controlHidden&&(h.controlHidden=!1,b.current&&!h.controlHidden&&(clearTimeout(b.current),b.current=null),b.current=setTimeout((()=>{h.controlHidden=!0}),1e3))}));return it((e=>{if(D(),!h.dragging)return;e.preventDefault();const[t,n]=f.current,[i,r]=h.start,a=e.pageX-i,s=e.pageY-r;h.translate=[t+a,n+s]})),rt((()=>{h.dragging&&(h.dragging=!1,f.current=h.translate)})),e(n,{children:[t("div",{ref:g,className:i("i-preview-content",{"no-transition":h.dragging}),style:{transform:`translate(${h.translate.map((e=>`${e}px`)).join(",")}) rotate(${h.rotate}deg) scale(${h.scale})`},onWheel:z,onMouseDown:e=>{C&&(e.preventDefault(),h.dragging=!0,h.start=[e.pageX,e.pageY])},onClick:e=>e.stopPropagation(),children:N}),e("div",{className:i("i-preview-controls",{"i-preview-controls-hidden":h.controlHidden}),children:[t(Te,{square:!0,flat:!0,onClick:p,children:t(Pe,{icon:t(w,{})})}),y.length>1&&e("span",{className:"px-8",children:[h.current+1," / ",y.length]}),1!==h.scale&&e(Te,{flat:!0,onClick:()=>h.scale=1,children:[t(Pe,{icon:t(W,{})}),e("span",{className:"mt-2",children:[(100*h.scale).toFixed(0),"%"]})]}),t(Te,{square:!0,flat:!0,href:k.src,target:"_blank",children:t(Pe,{icon:t(F,{})})}),t(Te,{square:!0,flat:!0,href:k.src,download:!0,target:"_blank",children:t(Pe,{icon:t(q,{})})}),t(Te,{square:!0,flat:!0,onClick:()=>$(90),children:t(Pe,{icon:t(R,{})})}),t(Te,{square:!0,flat:!0,onClick:()=>$(-90),children:t(Pe,{icon:t(X,{})})}),y.length>1&&e(n,{children:[t(Te,{square:!0,flat:!0,onClick:()=>x(h.current-1),children:t(Pe,{icon:t(U,{})})}),t(Te,{square:!0,flat:!0,onClick:()=>x(h.current+1),children:t(Pe,{icon:t(G,{})})})]})]})]})}function Ht(){const e=v(null);return n=>{const{items:i,modalProps:r,onClose:a,...s}=n,l=Ve(t(Ot,{ref:e,visible:!0,className:"i-preview",customized:!0,hideShadow:!0,...r,children:t(Vt,{...s,items:i,onClose:()=>{e.current?.update({visible:!1})}}),fixed:!0,onClose:()=>{a?.(),l?.()}}))}}const Wt=r=>{const{src:a,round:s,size:l,initSize:o,lazyload:c,fallback:u=t(Pe,{icon:t(K,{}),size:"2em",className:"color-5"}),fit:p,style:m,className:h,cover:g,coverClass:f,usePreview:b,onLoad:y,onError:k,onClick:N,...C}=r,w=ce({status:"loading"}),x=v(null),$=p?"100%":void 0,{observe:z,unobserve:D}=st(),T=Ht(),P=e=>{N?.(e),b&&a&&T({items:[{src:a,type:Ee.IMAGE}]})};d((()=>{if(a&&(x.current?.complete||(w.status="loading"),c&&x.current))return z(x.current,((e,t)=>{t&&(e.setAttribute("src",e.dataset.src||""),D(e))})),()=>{x.current&&D(x.current)}}),[a]),C[c?"data-src":"src"]=a;const I="loading"===w.status?o:void 0;return t("div",{style:{width:l??I,height:l??I,...m},className:i("i-image",h,{rounded:s,[`i-image-${w.status}`]:w.status}),children:"error"===w.status?u:e(n,{children:[a&&t("img",{ref:x,style:{objectFit:p,width:$,height:$},...C,onLoad:e=>{y?.(e),w.status=void 0},onError:e=>{k?.(e),w.status="error"},onClick:P}),a&&"loading"===w.status&&t(ze,{absolute:!0}),g&&t("div",{className:i("i-image-cover",f),onClick:P,children:g})]})})};function Ft(n){const{as:r="label",label:a,className:s,labelInline:l,style:o,children:c,status:d,tip:u,required:p}=n;return e(r,{className:i("i-input-label",s,{"i-input-inline":l}),style:o,children:[a&&e("span",{className:"i-input-label-text",children:[p&&t("span",{className:"error",children:"*"}),a]}),c,u&&t("span",{className:i("i-input-message",{[`i-input-${d}`]:"normal"!==d}),children:u})]})}Wt.List=function(e){const{items:n=[],gap:i=8,columns:r,wrap:a,direction:s,usePreview:l,onClick:o,...c}=e,d=Ht(),p=u((()=>n.map((e=>{const t={src:""};return"string"==typeof e?t.src=e:Object.assign(t,e),t.suffix=He(t.src)||"",t.type=We(t.suffix,e.type),t}))),[n]);return p.length?t(Dt,{className:"i-image-list",gap:i,columns:r,wrap:a,direction:s,children:p.map(((e,n)=>t(Wt,{src:e.src,size:60,usePreview:!1,onClick:e=>((e,t)=>{o?.(e),l&&d({items:p,initial:t})})(e,n),...c},n)))}):""};const qt=n=>{const{ref:r,type:a="text",label:s,name:l,value:o=n.initValue??"",initValue:c="",prepend:p,append:m,labelInline:h,className:g,status:v="normal",message:f,tip:b,clear:y,hideVisible:k,border:N,required:C,onChange:w,onEnter:x,style:$,...z}=n,D=ce({value:o,type:a,visible:!1}),T=u((()=>{if("password"===a)return D.visible?t(Z,{}):t(_,{})}),[D.visible]);d((()=>{D.value=o}),[o]);const P={ref:r,type:D.type,name:l,value:D.value,className:i("i-input",`i-input-${a}`),onChange:e=>{const t=e.target.value;D.value=t,w?.(t,e)},onKeyDown:e=>{"Enter"===e.code&&x?.(e)},...z},I=y&&D.value,S="password"===a&&!!D.value;return t(Ft,{label:s,labelInline:h,className:g,style:$,tip:f??b,status:v,required:C,children:e("div",{className:i("i-input-item",{[`i-input-${v}`]:"normal"!==v,"i-input-borderless":!N}),children:[p&&t("div",{className:"i-input-prepend",children:p}),t("input",{...P}),t(Ue,{active:!!I||S,icon:T,onClick:()=>{if("password"===a&&!k)return void Object.assign(D,{visible:!D.visible,type:D.visible?"password":"text"});w?.("")}}),m&&t("div",{className:"i-input-append",children:m})]})})};qt.Textarea=e=>{const{ref:n,label:r,name:a,value:s=e.initValue,initValue:l,labelInline:o,className:c,status:u="normal",message:p,tip:m,autoSize:h,border:g,style:f,onChange:b,onEnter:y,...k}=e,N=ce({value:s}),C=v(null);d((()=>{N.value=s}),[s]);const w={ref:n,name:a,value:N.value,className:"i-input i-textarea",onChange:e=>{const t=e.target.value;N.value=t;const n=C.current?.firstChild;h&&n&&(n.style.height=`${n.scrollHeight}px`),b?.(t,e)},onKeyDown:e=>{"Enter"===e.code&&(e.stopPropagation(),y?.(e))},...k};return t(Ft,{label:r,labelInline:o,className:c,style:f,tip:p??m,status:u,children:t("div",{ref:C,className:i("i-input-item",{[`i-input-${u}`]:"normal"!==u,"i-input-borderless":!g}),children:t("textarea",{...w})})})},qt.Number=n=>{const{ref:r,label:a,name:s,value:l=n.initValue??"",initValue:o,labelInline:c,step:u=1,min:p=-1/0,max:m=1/0,thousand:h,precision:g,type:v,className:f,status:b="normal",append:y,border:k,prepend:N,message:C,tip:w,hideControl:z,style:D,onChange:T,onEnter:P,onInput:I,onBlur:S,...M}=n,O=ce({value:l}),E=e=>e?"number"!=typeof e&&h?e.replaceAll(h,""):e:"",j=e=>{const t=E(O.value)??0,n=qe(+t+e,p,m);O.value=(e=>Ye(e,{precision:g,thousand:h}))(n),T?.(n)};d((()=>{O.value=l}),[l]);const B={ref:r,name:s,value:O.value,className:"i-input i-input-number",onChange:e=>{const{value:t}=e.target,n=E(t.replace(/[^\d\.-]/g,""));O.value=n,T?.(+n,e)},...M};return t(Ft,{label:a,labelInline:c,className:f,style:D,tip:C??w,status:b,children:e("div",{className:i("i-input-item",{[`i-input-${b}`]:"normal"!==b,"i-input-borderless":!k}),children:[N&&t("div",{className:"i-input-prepend",children:N}),!z&&t(Ue,{active:!0,icon:t(x,{}),onClick:()=>j(-u)}),t("input",{...B}),!z&&t(Ue,{active:!0,icon:t($,{}),onClick:()=>j(u)}),y&&t("div",{className:"i-input-append",children:y})]})})},qt.Range=n=>{const{label:r,name:a,value:s=n.initValue??"",initValue:l,labelInline:o,min:c=-1/0,max:u=1/0,type:p,className:m,status:h="normal",message:g,tip:v,append:f,prepend:b,step:y=1,thousand:k,precision:N,hideControl:C,placeholder:w,border:z,onChange:D,onBlur:T,style:P,...I}=n,S=ce({value:s}),M=e=>e?"number"!=typeof e&&k?e.replaceAll(k,""):e:"",O=(e,t)=>{const{value:n}=e.target,i=M(n.replace(/[^\d\.-]/g,"")),r=Array.isArray(S.value)?S.value:[];r[t]=+i,S.value=r,D?.(r,e)},E=(e,t,n)=>{e.preventDefault(),e.stopPropagation();const i=Array.isArray(S.value)?S.value:[],r=M(i[n])??0,a=qe(+r+t,c,u);i[n]=(e=>Ye(e,{precision:N,thousand:k}))(a),S.value=i,D?.(i,e)};d((()=>{S.value=s}),[s]);const j={name:a,className:"i-input i-input-number",...I};return t(Ft,{label:r,labelInline:o,className:m,style:P,tip:g??v,status:h,children:e("div",{className:i("i-input-item",{[`i-input-${h}`]:"normal"!==h,"i-input-borderless":!z}),children:[b&&t("div",{className:"i-input-prepend",children:b}),!C&&t(Ue,{active:!0,icon:t(x,{}),onClick:e=>E(e,-y,0)}),t("input",{value:S.value?.[0]||"",placeholder:w?.[0],...j,onChange:e=>O(e,0)}),!C&&t(Ue,{active:!0,icon:t($,{}),onClick:e=>E(e,y,0)}),t(Ue,{active:!0,icon:t(J,{}),style:{margin:0},onClick:e=>{e.preventDefault(),e.stopPropagation();const t=S.value?S.value:[],n=t[0];t[0]=t[1],t[1]=n,S.value=t,D?.(t)}}),!C&&t(Ue,{active:!0,icon:t(x,{}),onClick:e=>E(e,-y,1)}),t("input",{value:S.value?.[1]||"",placeholder:w?.[1],...j,onChange:e=>O(e,1)}),!C&&t(Ue,{active:!0,icon:t($,{}),onClick:e=>E(e,y,1)}),f&&t("div",{className:"i-input-append",children:f})]})})};const Rt={left:"flex-start",center:"center",right:"flex-end"},Xt=12,Ut={duration:3e3,closable:!0,active:!1},Gt=function(){const e=document.createElement("div");return e.dataset.id="messages",document.body.append(e),e}(),Kt={oneInstance:null,callout(e){},close(){}},Zt={left:[],center:[],right:[]},_t={left:[],center:[],right:[]};pe(Gt).render(t((function(){const i=v(null),r=ce({items:{left:[],center:[],right:[]},tops:{left:[],center:[],right:[]}}),a={left:0,center:0,right:0};d((()=>{Object.assign(Kt,{callout:function(e){const{align:t="center",unshift:n,onShow:a}=e,s=Zt[t][n?"unshift":"push"](e);r.items[t]=[...Zt[t]],e.close=this.close.bind(e),setTimeout((()=>{const e=i.current?.offsetHeight||0;Zt[t][n?0:s-1].active=!0,r.items[t]=[...Zt[t]],_t[t][n?"unshift":"push"](e),r.tops[t]=[..._t[t]],a?.()}),12),0!==e.duration&&(e.timer=setTimeout((()=>{this.close.call(e)}),e.duration))},close:function(){const e=this,{align:t="center",onHide:n}=e,i=Zt[t].findIndex((t=>t.id===e.id));i<0||(Zt[t][i].active=!1,r.items[t]=[...Zt[t]],e.timer=setTimeout((()=>{const i=Zt[t].findIndex((t=>t.id===e.id));Zt[t].splice(i,1),_t[t].splice(i,1),r.tops[t]=[..._t[t]],r.items[t]=[...Zt[t]],e.timer&&clearTimeout(e.timer),n?.()}),240))}})}),[]);const s=(e,s)=>{if(!e)return t(n,{});const{id:l,active:o,content:c,align:d="center",className:u}=e;a[d]+=r.tops[d][s-1]||0;const p=Xt*s+a[d];return t(Jt,{ref:i,active:o,content:c,top:p,className:u,style:{alignSelf:Rt[d]},onClick:Kt.close.bind(e)},l)};return e("div",{className:"i-messages",children:[r.items.left.map(s),r.items.center.map(s),r.items.right.map(s)]})}),{}));const Jt=function({ref:e,active:n,content:r,top:a,className:s,style:l,onClick:o}){return t("div",{ref:e,className:i("i-message",s,{"i-message-active":n}),style:{...l,top:a},onClick:o,children:r})};function Qt(e){return(["string","number"].includes(typeof e)||h(e))&&(e={content:e}),e=Object.assign({id:a(7)},Ut,e),Kt.callout(e),{instance:e,close:Kt.close.bind(e)}}Qt.error=e=>Qt({content:e,className:"bg-error"}),Qt.success=e=>Qt({content:e,className:"bg-success"}),Qt.warning=e=>Qt({content:e,className:"bg-warning"}),Qt.one=e=>{const t=Kt.oneInstance;if(t)t.active&&0!==t.duration?(clearTimeout(t.timer),t.timer=setTimeout((()=>{t.close?.()}),t.duration)):Kt.callout(t);else{const{instance:t}=Qt(e);Kt.oneInstance=t}},Mt.useModal=function(){const e=v(null);return{open:n=>{const i=Ve(t(Ot,{ref:e,visible:!0,...n,onClose:()=>{n.onClose?.(),i?.()}}))},update:t=>{if(!e.current)return;const{update:n}=e.current;n(t)},close:()=>{if(!e.current)return;const{close:t}=e.current;t()}}};const en=n=>{const{page:r,active:a,children:s,onChange:l}=n,[o,c]=g(!1);return e("a",{className:i("i-page",{"i-page-active":a,"i-page-loading":o,"i-page-disabled":!1}),"data-page":r,onClick:async()=>{a||o||(c(!0),await(l?.(r)),c(!1))},children:[o&&t(ze,{}),s]})},tn=r=>{const{page:a=1,size:s=10,total:l=0,sibling:o=2,prev:c=t(Pe,{icon:t(U,{})}),next:p=t(Pe,{icon:t(G,{})}),simple:m,jumper:h,className:v,renderEllipsis:f=()=>t(Pe,{icon:t(Q,{}),className:"color-7"}),renderPage:b=e=>e,onChange:y,...k}=r,[N,C]=g(a),[w,x]=g(!1),$=u((()=>Math.ceil(l/s)),[s,l]),[z,D,T]=u((()=>{const e=Math.max(1,N-o),t=Math.min($,N+o);return[e,t,Array.from({length:t-e+1}).map(((t,n)=>e+n))]}),[N,$,o]);if($<=N&&1===N)return t(n,{});const P=async e=>{if(y&&!w)return x(!0),new Promise((async t=>{void 0!==e&&(await y(e),C(e),x(!1),t())}))};return d((()=>C(a)),[a]),e("div",{className:i("i-pagination",v),...k,children:[c&&t(en,{page:N-1||1,onChange:P,children:c}),z>1&&t(en,{page:1,onChange:P,children:b(1)}),z>2&&f(),T.map((e=>t(en,{page:e,active:e===N,onChange:P,children:b(e)},e))),D<$-1&&f(),D<$&&t(en,{page:$,onChange:P,children:b($)}),p&&t(en,{page:N+1,onChange:P,children:p})]})},nn=n=>{const{dot:r,dotClass:a,outline:s,round:l,size:o="normal",hoverShowClose:c,className:d,children:u,onClose:p,onClick:m,...h}=n;return e("span",{className:i("i-tag",{"i-tag-outline":s,"i-tag-clickable":m,[`i-tag-${o}`]:"normal"!==o,round:l},d),onClick:m,...h,children:[r&&t("span",{className:i("i-tag-dot",a)}),u,p&&t(Ue,{active:!0,className:i("i-tag-close",{"i-tag-hover-close":c}),onClick:p})]})},rn=n=>{const{value:r,options:a,filter:s,filterPlaceholder:l,multiple:o,empty:c=t(Ke,{}),onSelect:d,onFilter:u}=n;return e("div",{className:i("i-select-options",{"i-select-options-multiple":o}),children:[s&&o&&e("div",{className:"i-select-filter",children:[t(Pe,{icon:t(ee,{}),className:"color-8 ml-8 my-auto",size:"1.2em"}),t("input",{type:"text",className:"i-input",placeholder:l,onChange:u})]}),0===a.length&&c,a.map(((n,i)=>{const{label:a,value:s,disabled:l}=n,c=o?r?.includes(s):r===s;return e(vt.Item,{active:c,type:"option",onClick:()=>d?.(s,n),disabled:l,children:[o&&t(Pe,{icon:t(te,{}),className:"i-select-option-check",size:"1em"}),a]},s||i)}))]})},an=n=>{const{options:i,value:r,maxDisplay:a,multiple:s,onSelect:l}=n;return s?((e=[],t=[],n=3)=>{const i=e.flatMap((e=>t.includes(e.value)?[e]:[]));if(n>=i.length)return i;const r=i.length-n,a=i.slice(0,n);return a.push(r),a})(i,r,a).map(((n,i)=>{if("number"==typeof n)return e(nn,{children:["+",n]},i);const{label:r,value:a}=n;return t(nn,{hoverShowClose:!0,onClose:e=>{e?.stopPropagation(),l?.(a,n)},children:r},a)})):i.find((e=>e.value===r))?.label},sn=n=>{const{ref:a,type:s="text",name:l,label:o,value:c="",placeholder:p,options:m=[],multiple:h,prepend:v,append:f,labelInline:b,style:y,className:k,message:N,status:C="normal",hideClear:w,hideArrow:x,maxDisplay:$,border:z,filter:D,tip:T,filterPlaceholder:P="...",popupProps:I,onSelect:S,onChange:M,...O}=n,E=ce({inputValue:"",filterValue:"",value:c,loading:!1}),[j,B]=g(!1),L=u((()=>Ae(m)),[m]),A=u((()=>{const{filterValue:e}=E;if(!e||!D)return L;const t="function"==typeof D?D:t=>t.value.includes(e)||t.label.includes(e);return L.filter(t)}),[L,D,E.filterValue]),Y=e=>{E.value=e,M?.(e)},V=(e,t)=>{if(S?.(e,t),h){const t=[...E.value],n=t.findIndex((t=>t===e));return n>-1?t.splice(n,1):t.push(e),void Y(t)}B(!1),Y(e)},H=r({delay:400},(e=>{const t=e.target.value;E.filterValue=t}));d((()=>{E.value=c}),[c]);const W=h?E.value.length>0:!!E.value,F=!w&&j&&W,q=N??T;return e("label",{className:i("i-input-label",k,{"i-input-inline":b}),style:y,children:[o&&t("span",{className:"i-input-label-text",children:o}),t(bt,{position:"bottom",arrow:!1,fitSize:!0,...I,visible:j,trigger:"none",onVisibleChange:e=>{B(e),D&&(E.filterValue="")},content:t(rn,{options:A,value:E.value,multiple:h,filter:!!D,filterPlaceholder:P,onSelect:V,onFilter:H}),children:e("div",{className:i("i-input-item",{[`i-input-${C}`]:"normal"!==C,"i-input-borderless":!z,"i-input-focus":j}),onClick:()=>B(!0),children:[v,t("input",{ref:a,type:"hidden",value:E.value,...O}),h?W?t("div",{className:i("i-input i-select",{"i-select-multiple":h}),children:an({options:L,value:E.value,multiple:h,maxDisplay:$,onSelect:V})}):t("input",{className:"i-input i-select",placeholder:p,readOnly:!0}):null,!h&&t("input",{value:j?E.filterValue:E.value,className:"i-input i-select",placeholder:E.value||p,onChange:e=>{E.filterValue=e.target.value},readOnly:!D}),t(Ue,{active:!x,icon:F?void 0:t(ne,{}),onClick:e=>{e.stopPropagation(),B(!0),j&&Y(h?[]:"")}}),f]})}),q&&t("span",{className:"i-input-message",children:q})]})},ln={HEX:"toHexString",RGB:"toRgbString",HSB:"toHsbString"};function on(n){const{value:i,type:r,onTypeChange:a,onChange:s,onOk:l}=n,o=ce({value:i,type:r});return d((()=>{o.value=i,o.type=r}),[i,r]),e("div",{className:"i-colorpicker-footer",children:[t(sn,{readOnly:!0,hideClear:!0,hideArrow:!0,style:{width:"5.6em"},options:["RGB","HEX","HSB"],value:o.type,onChange:e=>{o.type=e,a(e)}}),t(qt,{placeholder:"color",value:o.value,onChange:e=>{o.value=e,s(e)}}),t(Te,{square:!0,onClick:l,children:t(Pe,{icon:t(te,{})})})]})}const cn=n=>{const{ref:r,color:a,handle:s,placeholder:l,className:o,...c}=n;return e("div",{ref:r,className:i("i-colorpicker-handle",o),...c,children:["text"!==s&&t("i",{className:"i-colorpicker-square",style:{background:a}}),"square"!==s&&t("span",{className:"i-colorpicker-text",style:{color:a},children:a??l})]})};function dn(i){const{value:r,type:a="HEX",disabledAlpha:s,children:l,usePanel:o,handle:c="both",placeholder:u="Colors",popupProps:p,onChange:m}=i,h=ce({type:a,value:r,syncValue:r,visible:p?.visible}),g=e=>{const t=ln[e];h.type=e,h.value=h.syncValue[t]?.()},v=e=>{h.value=e,h.syncValue=e},f=()=>{m?.(h.value),h.visible=!1};return d((()=>{h.syncValue=r,h.value=r}),[r]),o?t(ye,{...i}):t(bt,{trigger:"click",touchable:!0,position:"bottom",...p,visible:h.visible,content:t(ye,{value:h.syncValue,disabledAlpha:s,panelRender:i=>e(n,{children:[i,t(on,{value:h.value,type:h.type,onTypeChange:g,onChange:v,onOk:f})]}),onChange:e=>{h.syncValue=e},onChangeComplete:e=>{const t=ln[h.type];1!==e.a&&(e.a=parseFloat(e.a.toFixed(3))),h.value=e[t]?.()}}),onVisibleChange:e=>{h.visible=e,p?.onVisibleChange?.(e)},children:l??t(cn,{color:r,handle:c,placeholder:u})})}const un=r=>{const{value:a,month:s,weeks:l=["一","二","三","四","五","六","日"],renderDate:o=e=>e.date(),disabledDate:c,onDateClick:d}=r,p=ke(),m=u((()=>{const e=[],t=s.add(-1,"month").endOf("month");let{$W:n,$D:i}=t;if(0!==n){const i=Array.from({length:n}).map(((e,i)=>t.add(i+1-n,"day")));e.push(...i)}const r=s.endOf("month");return i=r.$D,n=r.$W,e.push(...Array.from({length:i}).map(((e,t)=>r.add(t+1-i,"day")))),0!==n&&e.push(...Array.from({length:7-n}).map(((e,t)=>r.add(t+1,"day")))),e}),[s]);return e(n,{children:[t("div",{className:"i-datepicker-weeks",children:l.map(((e,n)=>t("span",{className:"i-datepicker-week",children:e},n)))}),t("div",{className:"i-datepicker-dates",children:m.map(((e,n)=>{const r=e.isSame(a,"day"),l=e.isSame(s,"month"),u=e.isSame(p,"day"),m=c?.(e);return t("div",{className:i("i-datepicker-item",{"i-datepicker-active":r,"i-datepicker-same-month":l,"i-datepicker-today":u,"i-datepicker-disabled":m}),onClick:()=>(e=>{c?.(e)||d?.(e)})(e),children:o(e)},n)}))})]})},pn=[1,2,3,4,5,6,7,8,9,10,11,12],mn=n=>{const{value:i,unitMonth:r="月",unitYear:a="年",renderYear:s,renderMonth:l,onClick:o}=n;return e("a",{className:"i-datepicker-action","data-ripple":!0,onClick:o,children:[t("span",{children:s?.(i.year())}),a,t("span",{children:l?.(i.month()+1)}),r]})},hn=n=>{const{value:r,unitYear:a,unitMonth:l,renderDate:o,renderMonth:c=e=>e,renderYear:u=e=>e,disabledDate:p,onDateClick:m}=n,h=ce({today:r,month:r||ke(),selectedYear:ke(),years:[],selectable:!1}),g=v(null),f=e=>{h.month=h.month[e?"add":"subtract"](1,"month")},b=s({interval:100},(e=>{const t=e.deltaY<0;h.years=h.years.map((e=>e+(t?-1:1)))}));return d((()=>{if(!h.selectable)return;h.selectedYear=h.month;const e=h.selectedYear.year(),t=Array.from({length:7}).map(((t,n)=>e-3+n));h.years=[...t]}),[h.selectable]),d((()=>{h.today=r,h.month=r||ke()}),[r]),e("div",{className:"i-datepicker",children:[e("div",{className:"i-datepicker-units",children:[t(mn,{value:h.month,unitYear:a,unitMonth:l,renderMonth:c,renderYear:u,onClick:()=>h.selectable=!0}),t("a",{className:"ml-auto i-datepicker-action","data-ripple":!0,onClick:()=>f(!1),children:t(Pe,{icon:t(U,{})})}),t("a",{className:"i-datepicker-action","data-ripple":!0,onClick:()=>f(!0),children:t(Pe,{icon:t(G,{})})})]}),e("div",{className:i("i-datepicker-ym",{"i-datepicker-active":h.selectable}),children:[t(Ue,{active:!0,className:"i-datepicker-close",onClick:e=>{e.stopPropagation(),h.selectable=!1}}),t("div",{ref:g,className:"i-datepicker-years",onWheel:b,children:h.years.map((e=>t("a",{className:i("i-datepicker-year",{"i-datepicker-active":e===h.selectedYear.year()}),onClick:()=>h.selectedYear=h.selectedYear.year(e),children:u(e)},e)))}),t("div",{className:"i-datepicker-months",children:pn.map((e=>t("a",{className:i("i-datepicker-month",{"i-datepicker-active":e===h.month.month()+1}),onClick:()=>{return t=e,h.month=h.month.year(h.selectedYear.year()).month(t-1),void(h.selectable=!1);var t},children:c(e)},e)))})]}),t(un,{value:h.today,month:h.month,disabledDate:p,onDateClick:e=>{e.isSame(h.today,"day")||(e.isSame(h.month,"month")||(h.month=e),h.today=e,m?.(e))},renderDate:o})]})};ke.extend(Ne);const gn=["YYYY-MM-DD","YYYY-M-D","YYYY/MM/DD","YYYY/M/D"],vn="YYYY-MM-DD",fn=e=>{const{name:n,value:i,weeks:r,format:a=vn,placeholder:s=e.format??vn,renderDate:l,renderMonth:o,renderYear:c,popupProps:p,disabledDate:m,onDateClick:h,onChange:v,onBlur:f,...b}=e,y=ce({value:i}),[k,N]=g(!1),C=u((()=>{if(!y.value)return null;const e=ke(y.value,a,!0);return e.isValid()?e:null}),[y.value]),w=e=>{y.value=e,v?.(e)},x=()=>{if(!y.value)return;const e=ke(y.value,gn,!0);e.isValid()?w(e.format(a)):w("")};return d((()=>{y.value=i}),[i]),t(bt,{visible:k,trigger:"click",position:"bottom",arrow:!1,align:"start",onVisibleChange:e=>{p?.onVisibleChange?.(e),N(e)},watchResize:!0,content:t(hn,{value:C,weeks:r,renderDate:l,renderMonth:o,renderYear:c,disabledDate:m,onDateClick:e=>{w(e.format(a))}}),...p,children:t(qt,{value:y.value,append:t(Pe,{icon:t(ie,{}),className:"i-datepicker-icon",size:"1em"}),placeholder:s,onChange:w,onBlur:e=>{f?.(e),x()},onEnter:x,...b})})};function bn(e){const{items:n=[],active:r,renderItem:a,unit:s,onClick:l}=e;return n.map((e=>{const n=e===r;return t("a",{className:i("i-timepicker-item",{"i-timepicker-item-active":n}),onClick:()=>l(e),children:a?.(e,n,s)??(e<10?`0${e}`:e)},e)}))}const yn={h:"hour",hh:"hour",m:"minute",mm:"minute",s:"second",ss:"second"};function kn(i){const{value:r,stepH:a=1,stepM:s=1,stepS:l=1,format:o,periods:c,renderItem:p,onChange:m,onFallback:h}=i,g=ce({period:void 0,hour:void 0,minute:void 0,second:void 0}),[v,f,b]=u((()=>{const e=o.includes("h"),t=o.includes("m"),n=o.includes("s");return[e?Array.from({length:(c?12:24)/a},((e,t)=>t*a)):[],t?Array.from({length:60/s},((e,t)=>t*s)):[],n?Array.from({length:60/l},((e,t)=>t*l)):[]]}),[a,s,l,o,c]),y=(e,t)=>{g[t]=e,(()=>{let e=o.replace(/(hh|h){1}|(mm|m){1}|(ss|s){1}/gi,(e=>{const t=e.toLowerCase(),n=g[yn[t]]??0;return t.length>1&&n<10?`0${n??0}`:n??0}));c&&v.length>0&&(e=`${g.period??c[0]} ${e}`),m(e)})()};return d((()=>{let e=r??"";if(c&&v.length>0&&r){const[t,n]=r.split(" ");e=n??"",g.period=c.includes(t)?t:void 0}const t=e.match(/\d+/g)??[];if(!t.length)return void h("");let n=0;const i=o.replace(/(hh|h)+|(mm|m)+|(ss|s)+/gi,(e=>{const i=t[n++]??0;let r=e;return"hour"===yn[e]&&(r=Math.min(c?11:23,i)),r=Math.min(59,i),g[yn[e]]=r,e.length>1&&r<10?`0${r}`:r}));h(i)}),[r]),e("div",{className:"i-timepicker",children:[v.length>0&&e(n,{children:[c&&t("div",{className:"i-timepicker-list",children:t(bn,{items:c,active:g.period,onClick:e=>y(e,"period")})}),t("div",{className:"i-timepicker-list",children:t(bn,{items:v,active:g.hour,unit:"hour",renderItem:p,onClick:e=>y(e,"hour")})})]}),f.length>0&&t("div",{className:"i-timepicker-list",children:t(bn,{items:f,active:g.minute,unit:"minute",renderItem:p,onClick:e=>y(e,"minute")})}),b.length>0&&t("div",{className:"i-timepicker-list",children:t(bn,{items:b,active:g.second,unit:"second",renderItem:p,onClick:e=>y(e,"second")})})]})}const Nn="hh:mm:ss";function Cn(e){const{name:n,value:i,format:r=Nn,periods:a,placeholder:s=e.format??Nn,renderItem:l,onChange:o,onBlur:c,popupProps:u,...p}=e,m=ce({value:i,safeValue:void 0}),[h,v]=g(!1),f=e=>{m.value=e};return d((()=>{m.value=i}),[i]),t(bt,{visible:h,trigger:"click",position:"bottom",arrow:!1,align:"start",watchResize:!0,...u,onVisibleChange:e=>{u?.onVisibleChange?.(e),v(e)},content:t(kn,{value:m.value,format:r,periods:a,renderItem:l,onChange:f,onFallback:e=>{m.safeValue=e}}),children:t(qt,{value:m.value,placeholder:s,append:t(Pe,{icon:t(re,{}),className:"i-timepicker-icon",size:"1em"}),onChange:f,onBlur:e=>{c?.(e),m.value&&(m.value=m.safeValue,f(m.safeValue))},...p})})}const wn={children:"确定"},xn={children:"取消",secondary:!0},$n=n=>{const{trigger:i="click",visible:r,icon:a=t(Pe,{icon:t(ae,{}),className:"error"}),content:s,okButtonProps:l,cancelButtonProps:o,children:c,align:d="end",position:u="top",offset:p=12,extra:m,onOk:h,onClose:g,...v}=n,f=ce({loading:!1,visible:r}),b=l?Object.assign({},wn,l):wn,y=o?Object.assign({},xn,o):xn,k=e("div",{className:"i-popconfirm",children:[e(Dt,{gap:12,children:[a,t("div",{className:"i-popconfirm-content",children:s})]}),e(Dt,{gap:12,justify:"flex-end",className:"mt-8 i-popconfirm-footer",children:[null!==o&&t(Te,{...y,onClick:async e=>{y.onClick?.(e),await(g?.()),f.visible=!1}}),m,null!==l&&t(Te,{loading:f.loading,...b,onClick:async e=>{f.loading=!0,b.onClick?.(e),h?.()?.then((()=>{f.visible=!1})).finally((()=>{f.loading=!1}))}})]})]});return t(bt,{content:k,...v,trigger:i,visible:f.visible,align:d,offset:p,position:u,onVisibleChange:e=>{f.visible=e,v.onVisibleChange?.(e)},children:c})};function zn(n){const{type:r="default",name:a,value:s,checked:l,disabled:o,children:c,onChange:d}=n;return e("label",{className:i("i-radio-item",{disabled:o}),children:[t("input",{type:"radio",name:a,checked:l,className:i("i-radio-input",`i-radio-${r}`),disabled:o,onChange:e=>{d?.(s,e)}}),t("span",{className:"i-radio-text",children:c})]})}function Dn(n){const{label:r,name:a,options:s,value:l,type:o="default",status:c="normal",message:p,optionInline:m=!0,labelInline:h,disabled:g,required:v,className:f,onChange:b}=n,y=ce({value:l}),k=u((()=>Ae(s)),[s]),N=(e,t)=>{y.value=e,b?.(e,t)};return d((()=>{y.value=l}),[l]),e("div",{className:i("i-radio i-input-label",{[`i-radio-${c}`]:"normal"!==c,"i-input-inline":h},f),children:[r&&e("span",{className:"i-input-label-text",children:[v&&t("span",{className:"error",children:"*"}),r,p&&t("p",{className:"i-radio-message",children:p})]}),t("div",{className:i("i-radio-options",{"i-options-block":!m,"i-radio-options-button":"button"===o}),children:k.map((e=>t(zn,{name:a,value:e.value,checked:y.value===e.value,type:o,disabled:g||e.disabled,onChange:N,children:e.label},e.value)))})]})}Dn.Item=zn;const Tn=n=>{const{other:r,children:a,vertical:s,height:l,size:o="auto",minSize:c=0,maxSize:d="100%",style:u,line:p,className:m,asPercent:h,onResize:g,onResizeComplete:f}=n,b=ce({size:o,resizing:!1,start:0,total:0}),y=v(null),k=()=>{const e=y.current?.getBoundingClientRect();if(e){if(b.resizing=!0,s)return b.total=e.height,void(b.start=e.top);b.total=e.width,b.start=e.left}};return rt((()=>{b.resizing&&(b.resizing=!1,f?.(b.size))})),it((e=>{if(!b.resizing)return;e.preventDefault(),e.touches&&(e=e.touches[0]);const t=e[s?"pageY":"pageX"]-b.start;b.size=h?t/b.total*100+"%":t,g?.(b.size)})),e("div",{ref:y,className:i("i-resizable",m,{"i-resizable-vertical":s}),style:{...u,height:l},children:[t("div",{className:"i-resizable-a",style:{[s?"height":"width"]:b.size,[s?"minHeight":"minWidth"]:c,[s?"maxHeight":"maxWidth"]:d},children:r}),t("div",{className:i("i-resizable-line",{"i-resizable-resizing":b.resizing}),onMouseDown:k,onTouchStart:k,onContextMenu:e=>e.preventDefault(),children:t("div",{className:"i-resizable-line-node",children:p})}),t("div",{className:"i-resizable-b",children:a})]})};function Pn(){return t("i",{className:"i-step-divider"})}const In=["finished","active","pending"];function Sn(e,n){return t("span",{className:"i-step-item-index",children:"finished"===n?t(te,{style:{width:"1em",height:"1.5em"}}):e+1})}function Mn(r){const{index:a=0,active:s=0,renderIcon:l=Sn,title:o,vertical:c,line:d=t(Pn,{}),asList:u,style:p,className:m,children:h,onClick:g}=r,v=In[a===s?1:a<s?0:2];return t("div",{style:p,className:i("i-step-item",{[`i-step-item-${v}`]:!u},m),onClick:()=>{g?.(a)},children:e(n,c?{children:[e("div",{className:"i-step-item-left",children:[l?.(a,v),d]}),e("div",{className:"i-step-item-right",children:[t("div",{className:"i-step-item-title",children:o}),h&&t("div",{className:"i-step-item-content",children:h})]})]}:{children:[e("div",{className:"i-step-item-title",children:[l?.(a,v),t("span",{children:o}),d]}),h&&t("div",{className:"i-step-item-content",children:h})]})})}const On=e=>{const{active:n=0,vertical:r,renderIcon:a,line:s,style:l,asList:o,className:c,children:d,onClick:m}=e,h=u((()=>{const e=[];let t=0;return p.map(d,(i=>{if(!i||i.type!==Mn)return;const{props:l}=i;e.push({...i,props:{renderIcon:a,line:s,onClick:m,...l,vertical:r,active:n,asList:o,index:t++}})})),e}),[n,d]);return t("div",{className:i("i-step",{"i-step-vertical":r},c),style:l,children:h})};function En(e){const{index:n=0,itemIndex:r=0,active:a,type:s,transition:l,gap:o=0,itemHeight:c,vertical:d,style:p,className:m,children:h,onItemClick:g}=e,v=u((()=>"normal"===s?{[d?"paddingBlock":"paddingInline"]:o/2,height:c}:{transform:`translate(-${100*n}%, 0)`,transition:l}),[n,o,c,d,s]);return t("div",{style:{...p,...v},className:i("i-swiper-item",m,{"i-swiper-active":a}),"data-index":r,onClick:e=>g?.(r,e),children:h})}On.Item=Mn;const jn=r=>{const{ref:a,type:s="normal",initial:l=0,display:o=1,scroll:c=1,loop:m=!0,vertical:h,prev:g=t(Pe,{icon:t(U,{}),size:"2em"}),next:f=t(Pe,{icon:t(G,{}),size:"2em"}),duration:b=600,interval:k=3e3,autoplay:N,pauseOnHover:C,arrow:w=!0,reverse:x,draggable:$,dragOffset:z=40,gap:D=0,itemHeight:T,indicator:P,fixedIndicator:I,style:S,className:M,children:O,renderIndicator:E,onBeforeSwipe:j,onAfterSwipe:B,onItemClick:L}=r,A=v(null),Y=v(null),V=`all ${b/1e3}s`,H=ce({current:l,swipable:!0,transition:"fade"===s?"none":V,dragStart:0,dragging:!1,initialized:!1}),W=u((()=>p.map(O,(e=>{if(e.type===En)return e}))),[O]),[F,q,R,X,K]=u((()=>{const e="normal"===s&&m&&W.length>o?o+1:0;let t=[];if(e<=0)t=[...W];else{const n=W.slice(0,e);t=[...W.slice(-e),...W,...n]}const n=t.length/o*100+"%";return[t,e,W.length,t.length,n]}),[o,m,s,W]),Z=u((()=>-100*(H.current+q)/X),[H.current,X]),_=u((()=>{if(R<=o||"fade"===s)return;return`translate3d(${h?`0, ${Z}%`:`${Z}%, 0`}, 0)`}),[Z,h,o,R,s]),J=u((()=>{if(h&&T)return{height:T*o}}),[h,T,o]),Q=u((()=>Array.from({length:Math.ceil((R-o)/c)+1})),[m,P]),ee=()=>{clearTimeout(Y.current),Y.current=null},te=e=>{if(!H.swipable||e===H.current)return;H.swipable=!1,j?.(H.current);let t=!1,n=e;const i=R-o;return m?e>i?(t=!0,e=R,n=0):e<0&&(t=!0,e=-o,n=i):(n=qe(n,0,i),e=n),setTimeout((()=>{H.swipable=!0}),b+32),"fade"===s?(H.current=n,void B?.(n)):(H.current=e,t?void setTimeout((()=>{H.transition="none",H.current=n,B?.(n),N&&(Y.current=setTimeout(ne,k)),setTimeout((()=>{H.transition=V}),60)}),b+20):(N&&(Y.current=setTimeout(ne,k)),void setTimeout((()=>{B?.(n)}),b+12)))},ne=()=>{te(x?H.current-c:H.current+c)},ie=()=>{te(x?H.current+c:H.current-c)},re=e=>{$&&H.swipable&&"fade"!==s&&(e.stopPropagation(),e.preventDefault(),e.touches&&(e=e.touches[0]),Object.assign(H,{dragStart:h?e.clientY:e.clientX,dragging:!0,transition:"none"}))};return it((e=>{if(!H.dragging||!A.current)return;e.preventDefault(),e.touches&&(e=e.touches[0]);const t=61.8*((h?e.clientY:e.clientX)-H.dragStart)/A.current[h?"offsetHeight":"offsetWidth"]+Z;A.current.style.transform=`translate3d(${h?`0, ${t}%`:`${t}%, 0`}, 0)`})),rt((e=>{if(!H.dragging||!A.current)return;e.changedTouches&&(e=e.changedTouches[0]);const t=h?e.clientY:e.clientX,n=A.current[h?"offsetHeight":"offsetWidth"]/X,i=.618*(t-H.dragStart),r=Math.abs(i);if(r>z){const e=Math.floor(r/n)+(r%n-z>0?1:0);let t=H.current+(i>0?-e:e);te(t)}A.current.style.transform=_||"",Object.assign(H,{dragging:!1,transition:V})})),y(a,(()=>({swipeTo:te,swipeNext:ne,swipePrev:ie}))),d((()=>{if(N)return Y.current=setTimeout(ne,k),()=>{clearTimeout(Y.current),Y.current=null}}),[N,k]),e("div",{style:S,className:i("i-swiper",{"i-swiper-vertical":h,"i-swiper-initialized":H.initialized},M),children:[e("div",{className:"i-swiper-track",style:J,onMouseOver:()=>{C&&ee()},onMouseLeave:()=>{C&&(ee(),Y.current=setTimeout(ne,k))},children:[t("div",{ref:A,className:i("i-swiper-list",{"i-swiper-fade":"fade"===s}),style:{[h?"height":"width"]:K,transform:_,transition:H.transition},onMouseDown:re,onTouchStart:re,children:F.map(((e,n)=>{const{props:i}=e;return t(En,{index:n,itemIndex:(n-q+R)%R,active:n-q===H.current,type:s,gap:D,transition:V,itemHeight:T,vertical:h,onItemClick:L,...i},n)}))}),w&&e(n,{children:[(m||0!==H.current)&&t("a",{className:"i-swiper-arrow i-swiper-prev",onClick:ie,children:g}),(m||H.current<R-o)&&t("a",{className:"i-swiper-arrow i-swiper-next",onClick:ne,children:f})]})]}),P&&t("div",{className:i("i-swiper-indicators",{"i-swiper-indicators-fixed":I}),children:Q.map(((e,n)=>t("a",{className:i("i-swiper-indicator",{"i-indicator-active":n===Math[m?"floor":"ceil"]((H.current+R)%R/c)}),onClick:()=>te(n*c),children:E?.(n)},n)))})]})};jn.Item=En;const Bn=n=>{const{ref:r,active:a,tabs:s,type:o="default",prepend:c,append:u,children:m,className:h,vertical:g,toggable:f,navsJustify:b="start",bar:k=!0,hideMore:N,barClass:C,renderMore:w=()=>t(Te,{flat:!0,square:!0,size:"small",children:t(Pe,{icon:t(Q,{})})}),onTabChange:x,...$}=n,z=v([]),D=v(null),T=v(null),P=ce({active:a,prevActive:void 0,barStyle:{},cachedTabs:[],overflow:!1,more:[],tabs:[]}),{observe:I,unobserve:S}=st(),M=ue(T);d((()=>{if(!s)return m?void(P.tabs=p.map(m,((e,t)=>{const{key:n,props:i}=e,{title:r,children:a,content:s,keepDOM:o}=i,c=a?"string"==typeof a?a:l(a,["props","type","$$typeof","ref"]):s;return{key:n||String(t),title:r,content:c,keepDOM:o}}))):void(P.tabs=[]);P.tabs=s.map(((e,t)=>["string","number"].includes(typeof e)?{key:e,title:e}:(void 0===e.key&&(e.key=t),e)))}),[m,s]);const O=e=>{const{key:t}=e,n=P.tabs.findIndex((e=>e.key===t));if(n>-1)return void j(P.tabs[n].key??n);const i=P.tabs.length,r=e.key??i;P.tabs.push({...e,key:r}),j(r)},E=e=>{const t=P.tabs.findIndex((t=>t.key===e));if(t<0)return;if(P.tabs.splice(t,1),P.active!==e)return;const n=P.tabs[t]||P.tabs[t-1];j(P.prevActive??n?.key??"")},j=e=>{if(e===P.active){if(!f)return;return x?.(void 0,e),P.active=void 0,void(P.barStyle={height:0,width:0})}P.prevActive=P.active,x?.(e,P.active),P.active=e},B=e=>{e.stopPropagation(),e.preventDefault(),g||T.current?.scrollBy({left:e.deltaY+e.deltaX})};return d((()=>{if(!M||N)return;const{scrollHeight:e,scrollWidth:t}=T.current,{width:n,height:i}=M;P.overflow=e>i||t>n,P.overflow&&z.current.map(((e,t)=>{e&&I(e,((e,n)=>{P.tabs[t]&&(P.tabs[t].intersecting=n,P.more=P.tabs.filter((e=>!e.intersecting)))}))}))}),[M,N,P.tabs.length]),d((()=>{if(!k||"pane"===o||void 0===P.active)return;const e=P.tabs.findIndex((e=>e.key===P.active));setTimeout((()=>{const t=z.current[e];if(!t)return;if(P.tabs[e].keepDOM&&P.active){P.cachedTabs.findIndex((e=>e===P.active))<0&&P.cachedTabs.unshift(P.active)}const{offsetHeight:n,offsetLeft:i,offsetTop:r,offsetWidth:a}=t,s="line"===o;P.barStyle={height:!g&&s?".25em":n,width:g&&s?".25em":a,transform:`translate(${i}px, ${r}px)`}}),16)}),[P.active,k]),d((()=>{void 0!==a&&P.active!==a&&j(a)}),[a]),d((()=>{if(!N)return()=>{z.current?.map(S)}}),[P.tabs.length]),d((()=>{if(T.current&&!g)return T.current.addEventListener("wheel",B,{passive:!1}),()=>{T.current&&T.current.removeEventListener("wheel",B)}}),[T.current]),y(r,(()=>({open:j,close:E,add:O,navs:T}))),e("div",{className:i("i-tabs",{flex:g,[`i-tabs-${o}`]:"default"!==o},h),...$,children:[e("div",{className:i("i-tab-navs-container",{"i-tab-navs-vertical":g}),children:[c,e("div",{ref:T,className:i("i-tab-navs",`justify-${b}`),children:[P.tabs.map(((n,r)=>{const{title:a,key:s=r,closable:l}=n;return e("a",{ref:e=>z.current[r]=e,className:i("i-tab-nav",{"i-tab-active":P.active===s}),onClick:()=>j(s),children:[a,l&&t(Ue,{as:"i",active:!0,className:"i-tab-nav-close",onClick:e=>{e.stopPropagation(),E(s)}})]},s)})),k&&t("span",{ref:D,className:i("i-tab-navs-bar",C),style:P.barStyle})]}),!N&&P.overflow&&P.more.length>0&&t(bt,{arrow:!1,position:g?"right":"bottom",align:"end",touchable:!0,hideDelay:500,content:t("div",{className:"i-tabs-morelist pd-4",children:P.more.map(((e,n)=>{const{key:r=n,title:a}=e,s=P.active===r;return t("a",{className:i("i-tab-nav",{"i-tab-active":s}),onClick:()=>j(r),children:a},r)}))}),children:w(P.more)}),u]}),t("div",{className:"i-tab-contents",children:P.tabs.map(((e,n)=>{const{key:r=n,content:a}=e,s=P.active===r;return(s||void 0!==r&&P.cachedTabs.includes(r))&&t("div",{className:i("i-tab-content",{"i-tab-active":s}),children:a},r)}))})]})};function Ln(e){const{data:r=[],depth:a=0,round:s,style:l,className:o,parent:c,nodeProps:d,...u}=e,p=r.map(((e,n)=>{const{type:i}=e,r=e[d.title],s=e[d.key]||(void 0!==c?.key?`${c.key}-${n}`:`${n}`);return e.key=s,e.parent=c,"title"===i?t("div",{className:"i-tree-group-title",children:r},n):i&&"item"!==i?t("div",{className:`i-tree-type-${i}`,children:r},n):t(Yn,{index:n,item:e,depth:a,nodeProps:d,...u},s)}));return a>0?t(n,{children:p}):t("div",{className:i("i-tree",o,{"i-tree-round":s}),style:l,children:p})}Bn.Item=e=>t(n,{});const An=e=>{const{as:n="a",href:r,selected:a,children:s,...l}=e,o=i("i-tree-item-header",{"i-tree-item-selected":a});return t(n,"string"==typeof n?{href:r,className:o,...l,children:s}:{to:r||"",className:o,...l,children:s})},Yn=n=>{const{item:r,depth:a=0,index:s,selected:l,checked:o=[],partofs:c={},checkable:d,nodeProps:u,renderExtra:p,onItemClick:m,onItemSelect:h,onItemCheck:v,...f}=n,{as:b,key:y="",href:k,icon:N,title:C,expanded:w,disabled:x}=r,$=r[u.children],[z,D]=g(w),T=(e,t)=>{t&&(e.preventDefault(),e.stopPropagation()),!x&&$?.length&&D((e=>!e))},P=o.includes(y);return e("div",{className:i("i-tree-item",{"i-tree-expand":z}),children:[e(An,{as:b,href:k,style:{paddingLeft:1.5*a+.5+"em"},selected:l===y,onClick:e=>{if(x)return e.preventDefault(),void e.stopPropagation();T(e),m?.(r,e),h?.(y,r)},children:[d&&t(Xe.Item,{value:P,partof:!P&&c[y],className:"i-tree-checkbox",onChange:e=>v?.(r,e,[]),onClick:e=>e.stopPropagation()}),N&&t("span",{className:"i-tree-item-icon",children:N}),t("span",{className:"i-tree-item-title",children:C}),p?.(r),$&&t(Pe,{icon:t(se,{}),className:"i-tree-toggle",onClick:e=>T(e,!0)})]}),$?.length&&t("div",{className:"i-tree-item-content",children:t(Ln,{data:$,depth:a+1,selected:l,checkable:d,parent:r,partofs:c,checked:o,nodeProps:u,renderExtra:p,onItemClick:m,onItemSelect:h,onItemCheck:v,...f})})]})},Vn={key:"key",title:"title",children:"children"},Hn=e=>{const{data:n=[],ref:i,selected:r,checked:a=[],disabledRelated:s,nodeProps:l,onItemSelect:o,onItemCheck:c,...u}=e,p=ce({selected:r,checked:a,partofs:{},nodeMaps:new Map}),m=Object.assign({},Vn,l),h=e=>p.checked.includes(e||""),g=(e,t,n)=>{const{key:i="",parent:r,children:a}=e,l={[i]:t},o={[i]:!1};if(s)return[l];if(t){if(r&&"leaf"!==n){const e=r.children?.some((e=>e.key!==i&&!h(e.key))),[t,n]=g(r,!0,"root");e||Object.assign(l,t),Object.assign(o,e?n:{},{[r.key]:!0})}return a?.length&&"root"!==n&&a.map((e=>{if(h(e.key))return;const[t]=g(e,!0,"leaf");Object.assign(l,t),o[e.key]=!1})),[l,o]}if(r&&"leaf"!==n){const[e,t]=g(r,!1,"root");Object.assign(l,e);const n=r.children?.some((e=>h(e.key)&&e.key!==i));Object.assign(o,n?{}:t,{[r.key]:n,[i]:!1})}return a?.length&&"root"!==n&&a.map((e=>{const[t]=g(e,!1,"leaf");h(e.key)&&(Object.assign(l,t),o[e.key]=!1)})),[l,o]};return d((()=>{void 0!==r&&(p.selected=r)}),[r]),d((()=>{p.nodeMaps.clear();const{key:e,children:t}=m,i=n=>{n.map((n=>{p.nodeMaps.set(n[e],n),n[t]?.length>0&&i(n[t])}))};i(n)}),[n]),y(i,(()=>({getChecked:()=>{const e=[];return p.checked.map((t=>{const n=p.nodeMaps.get(t);e.push(n)})),[p.checked,e]},getSelected:()=>{const e=p.nodeMaps.get(p.selected);return[p.selected,e]},getPartofs:()=>{const e=[];return[Object.keys(p.partofs).filter((t=>{const n=p.partofs[t];if(n){const n=p.nodeMaps.get(t);e.push(n)}return n})),e]}}))),t(Ln,{data:n,selected:p.selected,checked:p.checked,partofs:p.partofs,nodeProps:m,onItemCheck:(e,t)=>{const[n,i]=g(e,t),r=Object.keys(n);p.checked=t?Array.from(new Set([...p.checked,...r])):p.checked.filter((e=>!r.includes(e))),Object.assign(p.partofs,i),c?.(e,t,p.checked)},onItemSelect:(t,n)=>{e.selectable&&(p.selected=t,o?.(t,n))},...u})},Wn=e=>{const{sortable:n,onSortEnd:i,itemProps:r,...a}=e,s={className:"i-upload-list",onClick:e=>{e.stopPropagation(),e.preventDefault()}};return n?t(Ce,{draggedItemClassName:"i-upload-item-dragged",onSortEnd:i,...s,...a}):t("div",{...s,...a})},Fn=i=>{const{ref:r,mode:a,index:s,file:l,renderItem:c,onRemove:d,onPreview:u}=i;if(!l)return"";const{id:p,name:m,size:h,url:g,src:v}=l,f=We(m,l.type);if(c)return c(l,s);const b=t(Ue,{active:!0,className:"i-upload-delete",onClick:e=>{e.stopPropagation(),e.preventDefault(),d(s)}});if("card"===a){let i=t(n,{});switch(f){case Ee.IMAGE:i=t(Wt,{lazyload:!0,src:g||v,fit:"cover",onMouseDown:e=>e.preventDefault()});break;case Ee.VIDEO:i=t("video",{src:g||v,preload:"none"});break;default:i=e(n,{children:[t(Pe,{icon:t(le,{})}),t("span",{className:"i-upload-file-name",children:o(m)})]})}return e("div",{ref:r,title:m,className:"i-upload-item-card",onClick:()=>u?.(s),children:[i,b]})}return e("div",{ref:r,className:"i-upload-item",onClick:()=>u?.(s),children:[t("span",{children:m}),t("i",{className:"i-upload-size",children:Fe(h??0)}),b]},p)},qn=n=>{const{ref:r,label:s,labelInline:l,value:o,files:c=[],initialFiles:p,placeholder:m,status:h="normal",message:g,className:f,style:b,children:k,defaultText:N="Upload",mode:C="default",cardSize:w="4em",disabled:x,sortable:$,limit:z=(n.multiple?1/0:1),multiple:D,renderItem:T,shouldUpload:P=()=>!0,uploader:I,onChange:S,onFilesChange:M,onUpload:O,...E}=n,j=ce({files:c,value:o,status:h,message:g}),B=v(null),L=Ht(),A=u((()=>k||t(Te,"card"===C?{className:"i-upload-card-btn color-5",square:!0,flat:!0,outline:!0,disabled:x,children:t(Pe,{icon:t(oe,{})})}:{className:"i-upload-btn",disabled:x,children:N})),[C,k]),Y=e=>{const[...t]=j.files,n=t.splice(e,1);URL.revokeObjectURL(n[0]?.src||""),j.files=t,M?.(t,n),S?.(t),B.current&&(B.current.value="")},V=async e=>{if(!I)return;const t=e.filter(P),n=Promise.all(t.map(I));return O?.(n)},H=e=>{L({items:j.files,initial:e})},W=e=>{e&&(j.files=e.map((e=>({...e,id:e.id??a(7)}))))};return d((()=>{Object.assign(j,{status:h,message:g})}),[h,g]),d((()=>{j.files=o?.filter?.((e=>!!e.id))??[]}),[o]),d((()=>{W(p)}),[]),y(r,(()=>({getFileList:()=>j.files,setFileList:W})),[]),t(Ft,{as:"div",label:s,labelInline:l,className:i("i-input-label-file",f),style:b,children:e("div",{className:i("i-upload-inner",{[`i-upload-${C}`]:"default"!==C}),style:{"--upload-card-size":w},children:[t(Wn,{sortable:$,onSortEnd:(e,t)=>{const[...n]=j.files;j.files=((e,t,n)=>{if(n>=e.length){let t=n-e.length+1;for(;t--;)e.push(void 0)}return e.splice(n,0,e.splice(t,1)[0]),e})(n,e,t),S?.(j.files)},children:j.files.map(((e,n)=>{const i=t(Fn,{index:n,file:e,mode:C,renderItem:T,onRemove:Y,onPreview:H},n);return $?t(we,{children:i},n):i}))}),j.message&&t("span",{className:"i-upload-message",children:j.message}),j.files.length<z&&e("label",{children:[t("input",{...E,disabled:x,ref:B,type:"file",className:"i-input-file-hidden",multiple:D,onChange:e=>{const t=Array.from(e.target.files||[]),{files:n}=j,i=[];t.map((e=>{const{id:t,name:r,size:s,type:l}=e,o=n.find((e=>{const{name:t,size:n,type:i}=e;return t===r&&n===s&&i===l})),c=URL.createObjectURL(e);Object.assign(e,{id:t??a(7),src:c??e.name,url:c??e.name}),!o&&i.push(e)}));const r=[...n,...i];Object.assign(j,{files:D?r.slice(0,z):[r.at(-1)],status:h,message:g}),M?.(j.files,i,e),S?.(j.files,e),V(i),B.current&&(B.current.value="")}}),A]})]})})};export{Se as Affix,Me as Badge,Te as Button,Oe as Card,Xe as Checkbox,Ge as Collapse,dn as ColorPicker,pt as Datagrid,fn as DatePicker,mt as Description,ht as Drawer,kt as Dropdown,zt as Editor,Dt as Flex,It as Form,Pe as Icon,Wt as Image,qt as Input,vt as List,ze as Loading,Qt as Message,Mt as Modal,tn as Pagination,$n as Popconfirm,bt as Popup,Lt as Progress,Dn as Radio,Tn as Resizable,sn as Select,On as Step,jn as Swiper,Bn as Tabs,nn as Tag,Et as Text,Cn as TimePicker,Hn as Tree,qn as Upload,At as Video,Ht as usePreview};
//# sourceMappingURL=index.js.map
